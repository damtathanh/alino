This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
public/
  logo/
    logo.png
src/
  app/
    AppGate.tsx
    brandRoutes.tsx
    creatorRoutes.tsx
    dashboardRoutes.tsx
    routeConfig.tsx
    routeGuards.tsx
    router.tsx
  components/
    AvatarUpload/
      AvatarUpload.tsx
      index.ts
      useAvatarUpload.ts
    brand/
      BrandDashboardLayout.tsx
    creator/
      CreatorDashboardLayout.tsx
    dashboard/
      DashboardHeader.tsx
    layout/
      Footer.tsx
      Header.tsx
      UserMenu.tsx
    shared/
      ErrorState.tsx
      LoadingState.tsx
      NotificationModal.tsx
      ScrollToTop.tsx
      Toast.tsx
      UpgradePlanModal.tsx
  contexts/
    AuthContext.tsx
  hooks/
    useAuth.ts
    useAuthOperations.ts
    useAuthState.ts
    useProfile.ts
  lib/
    supabase.ts
  pages/
    brand/
      campaigns/
        CampaignDetailPage.tsx
        CampaignListPage.tsx
        CampaignManagementListPage.tsx
        CampaignWorkspacePage.tsx
        CreateCampaignPage.tsx
        PrivateCampaignBookingPage.tsx
      dashboard/
        BrandCampaignAnalyticsPage.tsx
        BrandDashboard.tsx
      deals/
        ProposalInboxPage.tsx
      discovery/
        BrandDiscoveryPage.tsx
        CreatorDiscoveryPage.tsx
      profile/
        ProfilePage.tsx
        SettingsPage.tsx
      workspace/
        WorkspaceCampaignPage.tsx
        WorkspacePage.tsx
        WorkspaceRoutes.tsx
    creator/
      dashboard/
        AnalyticsPage.tsx
        DashboardHome.tsx
        MyDealsPage.tsx
        MyProposalsPage.tsx
        NotificationsPage.tsx
      discovery/
        OpportunitiesPage.tsx
      profile/
        components/
          ProfileSummaryCard.tsx
          TabbedContent.tsx
        hooks/
          useCreatorProfileForm.ts
          useCreatorProfileOperations.ts
        ProfilePage.tsx
        SettingsPage.tsx
      proposals/
        DealWorkspacePage.tsx
        ProposalsListPage.tsx
        SubmitProposalPage.tsx
      services/
        ServicesPage.tsx
    onboarding/
      OnboardingPage.tsx
      RolePage.tsx
    public/
      LandingPage.tsx
      LoginPage.tsx
      PrivacyPage.tsx
      PublicCreatorProfilePage.tsx
      SignupPage.tsx
      TermsPage.tsx
      VerifyEmailPage.tsx
    shared/
      ComingSoonPage.tsx
  types/
    campaign.ts
    deal.ts
    profile.ts
    proposal.ts
    subscription.ts
    toast.ts
    workspace.ts
  utils/
    authHelpers.ts
    cropImage.ts
  App.tsx
  index.css
  main.tsx
  vite-env.d.ts
.env.example
.gitignore
index.html
package.json
postcss.config.cjs
tailwind.config.js
tsconfig.json
vite.config.ts
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="src/pages/brand/campaigns/PrivateCampaignBookingPage.tsx">
import { useState, useEffect } from 'react'
import { useNavigate, useSearchParams } from 'react-router-dom'
import { useAuth } from '../../../hooks/useAuth'
import { getSupabase } from '../../../lib/supabase'
import { LoadingState } from '../../../components/shared/LoadingState'
import { ErrorState } from '../../../components/shared/ErrorState'

/**
 * PrivateCampaignBookingPage: Create private campaign and book creator
 * 
 * Route: /dashboard/brand/campaigns/new/private?creator_id=xxx
 * - Creates a private campaign (status: draft)
 * - Immediately creates a deal (status: invited)
 */

interface BookingFormData {
  title: string
  description: string
  budget_min: string
  budget_max: string
  creator_id: string
}

export default function PrivateCampaignBookingPage() {
  const navigate = useNavigate()
  const [searchParams] = useSearchParams()
  const { session } = useAuth()
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState<string | null>(null)
  const [submitting, setSubmitting] = useState(false)

  const creatorIdFromUrl = searchParams.get('creator_id') || ''

  const [formData, setFormData] = useState<BookingFormData>({
    title: '',
    description: '',
    budget_min: '',
    budget_max: '',
    creator_id: creatorIdFromUrl,
  })

  // Update creator_id when URL param changes
  useEffect(() => {
    if (creatorIdFromUrl) {
      setFormData(prev => ({ ...prev, creator_id: creatorIdFromUrl }))
    }
  }, [creatorIdFromUrl])

  const validate = (): boolean => {
    if (!formData.title.trim()) {
      setError('Campaign title is required')
      return false
    }
    if (!formData.creator_id.trim()) {
      setError('Creator ID is required')
      return false
    }
    if (formData.budget_min && isNaN(Number(formData.budget_min))) {
      setError('Minimum budget must be a valid number')
      return false
    }
    if (formData.budget_max && isNaN(Number(formData.budget_max))) {
      setError('Maximum budget must be a valid number')
      return false
    }
    if (formData.budget_min && formData.budget_max) {
      const min = Number(formData.budget_min)
      const max = Number(formData.budget_max)
      if (min > max) {
        setError('Minimum budget cannot be greater than maximum budget')
        return false
      }
    }
    setError(null)
    return true
  }

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    
    if (!validate()) {
      return
    }

    if (!session?.user?.id) {
      setError('You must be logged in to create a campaign')
      return
    }

    setSubmitting(true)
    setError(null)

    const supabase = getSupabase()

    try {
      // Step 1: Create campaign
      const campaignData = {
        brand_id: session.user.id,
        title: formData.title.trim(),
        description: formData.description.trim() || null,
        status: 'draft' as const,
        budget_min: formData.budget_min ? Number(formData.budget_min) : null,
        budget_max: formData.budget_max ? Number(formData.budget_max) : null,
      }

      const { data: campaign, error: campaignError } = await supabase
        .from('campaigns')
        .insert(campaignData)
        .select()
        .single()

      if (campaignError) {
        throw new Error(`Failed to create campaign: ${campaignError.message}`)
      }

      if (!campaign) {
        throw new Error('Campaign creation failed - no data returned')
      }

      // Step 2: Create deal immediately
      const dealData = {
        campaign_id: campaign.id,
        brand_id: session.user.id,
        creator_id: formData.creator_id.trim(),
        status: 'invited' as const,
      }

      const { error: dealError } = await supabase
        .from('deals')
        .insert(dealData)

      if (dealError) {
        // If deal creation fails, we should ideally rollback the campaign
        // For now, just show the error
        throw new Error(`Failed to create deal: ${dealError.message}`)
      }

      // Success - navigate to campaigns list
      navigate('/dashboard/brand/campaigns')
    } catch (err: any) {
      setError(err.message || 'Failed to create campaign and deal')
      setSubmitting(false)
    }
  }

  if (!session) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-4xl mx-auto">
          <ErrorState message="You must be logged in to create a campaign" />
        </div>
      </div>
    )
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-4xl mx-auto">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">Create Private Campaign & Book Creator</h1>
          <p className="text-gray-600">
            Create a private campaign and immediately invite a creator to collaborate
          </p>
        </div>

        <form onSubmit={handleSubmit}>
          <div className="space-y-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Campaign Details</h2>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Campaign Title *
                  </label>
                  <input
                    type="text"
                    value={formData.title}
                    onChange={(e) => setFormData({ ...formData, title: e.target.value })}
                    className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Enter campaign title"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Description
                  </label>
                  <textarea
                    value={formData.description}
                    onChange={(e) => setFormData({ ...formData, description: e.target.value })}
                    rows={4}
                    className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent resize-y"
                    placeholder="Enter campaign description (optional)"
                  />
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Budget</h2>
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Minimum Budget
                  </label>
                  <input
                    type="number"
                    step="0.01"
                    value={formData.budget_min}
                    onChange={(e) => setFormData({ ...formData, budget_min: e.target.value })}
                    className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="0.00"
                  />
                </div>
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    Maximum Budget
                  </label>
                  <input
                    type="number"
                    step="0.01"
                    value={formData.budget_max}
                    onChange={(e) => setFormData({ ...formData, budget_max: e.target.value })}
                    className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="0.00"
                  />
                </div>
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Creator Selection</h2>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Creator ID *
                </label>
                <input
                  type="text"
                  value={formData.creator_id}
                  onChange={(e) => setFormData({ ...formData, creator_id: e.target.value })}
                  className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                  placeholder="Enter creator ID (UUID)"
                  readOnly={!!creatorIdFromUrl}
                />
                {creatorIdFromUrl && (
                  <p className="mt-1 text-sm text-gray-500">
                    Creator ID pre-filled from URL
                  </p>
                )}
              </div>
            </div>
          </div>

          {error && (
            <div className="mt-6 bg-red-50 border border-red-200 rounded-lg p-4">
              <p className="text-sm text-red-600">{error}</p>
            </div>
          )}

          <div className="flex items-center justify-end gap-4 mt-8">
            <button
              type="button"
              onClick={() => navigate('/dashboard/brand/campaigns')}
              className="px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
              disabled={submitting}
            >
              Cancel
            </button>
            <button
              type="submit"
              className="px-6 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"
              disabled={submitting}
            >
              {submitting ? 'Creating...' : 'Create Campaign & Book Creator'}
            </button>
          </div>
        </form>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/discovery/BrandDiscoveryPage.tsx">
import { useEffect, useState, useMemo } from 'react'
import { Link } from 'react-router-dom'
import { getSupabase } from '../../../lib/supabase'
import type { CreatorProfile } from '../../../types/profile'
import { LoadingState } from '../../../components/shared/LoadingState'
import { ErrorState } from '../../../components/shared/ErrorState'
import { FaStar, FaRegStar } from 'react-icons/fa'

/**
 * BrandDiscoveryPage: Lightweight discovery funnel for brands
 * 
 * Route: /dashboard/brand/discovery
 * - Fetch creators from profiles + creator_profiles
 * - Client-side filters (platform, category, country)
 * - Local shortlist (localStorage)
 * - Link to creator profiles
 * - Book creator button
 */

const SHORTLIST_STORAGE_KEY = 'alino_creator_shortlist'

interface FilterState {
  platforms: string[]
  categories: string[]
  country: string
}

export default function BrandDiscoveryPage() {
  const [creators, setCreators] = useState<CreatorProfile[]>([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)
  const [shortlist, setShortlist] = useState<Set<string>>(new Set())
  const [filters, setFilters] = useState<FilterState>({
    platforms: [],
    categories: [],
    country: '',
  })

  // Load shortlist from localStorage on mount
  useEffect(() => {
    try {
      const saved = localStorage.getItem(SHORTLIST_STORAGE_KEY)
      if (saved) {
        const parsed = JSON.parse(saved)
        setShortlist(new Set(parsed))
      }
    } catch (err) {
      console.error('Failed to load shortlist:', err)
    }
  }, [])

  // Save shortlist to localStorage when it changes
  useEffect(() => {
    try {
      localStorage.setItem(SHORTLIST_STORAGE_KEY, JSON.stringify(Array.from(shortlist)))
    } catch (err) {
      console.error('Failed to save shortlist:', err)
    }
  }, [shortlist])

  // Fetch creators
  useEffect(() => {
    async function fetchCreators() {
      const supabase = getSupabase()

      try {
        // Fetch profiles with role = 'creator'
        const { data: profiles, error: profilesError } = await supabase
          .from('profiles')
          .select('id, role')
          .eq('role', 'creator')

        if (profilesError) {
          throw new Error(`Failed to fetch profiles: ${profilesError.message}`)
        }

        if (!profiles || profiles.length === 0) {
          setCreators([])
          setLoading(false)
          return
        }

        // Fetch creator_profiles for all creator IDs
        const creatorIds = profiles.map(p => p.id)
        const { data: creatorProfiles, error: creatorError } = await supabase
          .from('creator_profiles')
          .select('*')
          .in('user_id', creatorIds)

        if (creatorError) {
          throw new Error(`Failed to fetch creator profiles: ${creatorError.message}`)
        }

        // Merge profiles with creator_profiles
        const merged: CreatorProfile[] = profiles
          .map(profile => {
            const creatorProfile = creatorProfiles?.find(cp => cp.user_id === profile.id)
            if (!creatorProfile) return null

            return {
              ...profile,
              ...creatorProfile,
              role: 'creator',
            } as CreatorProfile
          })
          .filter((p): p is CreatorProfile => p !== null)

        setCreators(merged)
        setLoading(false)
      } catch (err: any) {
        setError(err.message || 'Failed to load creators')
        setLoading(false)
      }
    }

    fetchCreators()
  }, [])

  // Get unique values for filters
  const availablePlatforms = useMemo(() => {
    const platforms = new Set<string>()
    creators.forEach(creator => {
      creator.creator_platforms?.forEach(p => platforms.add(p))
    })
    return Array.from(platforms).sort()
  }, [creators])

  const availableCategories = useMemo(() => {
    const categories = new Set<string>()
    creators.forEach(creator => {
      creator.content_categories?.forEach(c => categories.add(c))
    })
    return Array.from(categories).sort()
  }, [creators])

  const availableCountries = useMemo(() => {
    const countries = new Set<string>()
    creators.forEach(creator => {
      if (creator.country) countries.add(creator.country)
    })
    return Array.from(countries).sort()
  }, [creators])

  // Filter creators
  const filteredCreators = useMemo(() => {
    return creators.filter(creator => {
      // Platform filter
      if (filters.platforms.length > 0) {
        const creatorPlatforms = creator.creator_platforms || []
        const hasMatchingPlatform = filters.platforms.some(filterPlatform =>
          creatorPlatforms.includes(filterPlatform)
        )
        if (!hasMatchingPlatform) return false
      }

      // Category filter
      if (filters.categories.length > 0) {
        const creatorCategories = creator.content_categories || []
        const hasMatchingCategory = filters.categories.some(filterCategory =>
          creatorCategories.includes(filterCategory)
        )
        if (!hasMatchingCategory) return false
      }

      // Country filter
      if (filters.country) {
        if (creator.country !== filters.country) return false
      }

      return true
    })
  }, [creators, filters])

  const toggleShortlist = (creatorId: string) => {
    setShortlist(prev => {
      const next = new Set(prev)
      if (next.has(creatorId)) {
        next.delete(creatorId)
      } else {
        next.add(creatorId)
      }
      return next
    })
  }

  const handlePlatformToggle = (platform: string) => {
    setFilters(prev => ({
      ...prev,
      platforms: prev.platforms.includes(platform)
        ? prev.platforms.filter(p => p !== platform)
        : [...prev.platforms, platform],
    }))
  }

  const handleCategoryToggle = (category: string) => {
    setFilters(prev => ({
      ...prev,
      categories: prev.categories.includes(category)
        ? prev.categories.filter(c => c !== category)
        : [...prev.categories, category],
    }))
  }

  if (loading) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <LoadingState />
        </div>
      </div>
    )
  }

  if (error) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <ErrorState message={error} />
        </div>
      </div>
    )
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        {/* Header */}
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">Kh√°m ph√° Creator</h1>
          <p className="text-gray-600">
            T√¨m ki·∫øm creator ph√π h·ª£p cho chi·∫øn d·ªãch c·ªßa b·∫°n
          </p>
          {shortlist.size > 0 && (
            <p className="text-sm text-gray-500 mt-2">
              ƒê√£ l∆∞u {shortlist.size} creator v√†o shortlist
            </p>
          )}
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-4 gap-6">
          {/* Filters Sidebar */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">B·ªô l·ªçc</h2>

              {/* Platform Filter */}
              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Platform
                </label>
                <div className="space-y-2 max-h-48 overflow-y-auto">
                  {availablePlatforms.map(platform => (
                    <label
                      key={platform}
                      className="flex items-center gap-2 cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        checked={filters.platforms.includes(platform)}
                        onChange={() => handlePlatformToggle(platform)}
                        className="w-4 h-4 text-[#6366F1] border-gray-300 rounded focus:ring-[#6366F1]"
                      />
                      <span className="text-sm text-gray-700">{platform}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Category Filter */}
              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Category
                </label>
                <div className="space-y-2 max-h-48 overflow-y-auto">
                  {availableCategories.map(category => (
                    <label
                      key={category}
                      className="flex items-center gap-2 cursor-pointer"
                    >
                      <input
                        type="checkbox"
                        checked={filters.categories.includes(category)}
                        onChange={() => handleCategoryToggle(category)}
                        className="w-4 h-4 text-[#6366F1] border-gray-300 rounded focus:ring-[#6366F1]"
                      />
                      <span className="text-sm text-gray-700">{category}</span>
                    </label>
                  ))}
                </div>
              </div>

              {/* Country Filter */}
              <div className="mb-6">
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  Country
                </label>
                <select
                  value={filters.country}
                  onChange={(e) => setFilters(prev => ({ ...prev, country: e.target.value }))}
                  className="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent text-sm"
                >
                  <option value="">All Countries</option>
                  {availableCountries.map(country => (
                    <option key={country} value={country}>
                      {country}
                    </option>
                  ))}
                </select>
              </div>

              {/* Clear Filters */}
              {(filters.platforms.length > 0 || filters.categories.length > 0 || filters.country) && (
                <button
                  onClick={() => setFilters({ platforms: [], categories: [], country: '' })}
                  className="w-full px-4 py-2 text-sm text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  Clear Filters
                </button>
              )}
            </div>
          </div>

          {/* Creators Grid */}
          <div className="lg:col-span-3">
            {filteredCreators.length === 0 ? (
              <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
                <p className="text-gray-600 mb-2">No creators found</p>
                <p className="text-sm text-gray-500">
                  Try adjusting your filters
                </p>
              </div>
            ) : (
              <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                {filteredCreators.map(creator => {
                  const isShortlisted = shortlist.has(creator.id)
                  const displayName = creator.full_name || 'Creator'
                  const location = [creator.city, creator.country].filter(Boolean).join(', ') || 'Location not specified'
                  const platforms = creator.creator_platforms || []
                  const categories = creator.content_categories || []

                  return (
                    <div
                      key={creator.id}
                      className="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow"
                    >
                      {/* Header */}
                      <div className="flex items-start justify-between mb-4">
                        <div className="flex items-center gap-3">
                          {creator.avatar_url ? (
                            <img
                              src={creator.avatar_url}
                              alt={displayName}
                              className="w-16 h-16 rounded-full object-cover border-2 border-gray-200"
                            />
                          ) : (
                            <div className="w-16 h-16 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center text-white text-lg font-bold">
                              {displayName.charAt(0).toUpperCase()}
                            </div>
                          )}
                          <div>
                            <h3 className="font-semibold text-gray-900">{displayName}</h3>
                            <p className="text-sm text-gray-600">{location}</p>
                          </div>
                        </div>
                        <button
                          onClick={() => toggleShortlist(creator.id)}
                          className="text-2xl text-gray-400 hover:text-yellow-500 transition-colors"
                          title={isShortlisted ? 'Remove from shortlist' : 'Add to shortlist'}
                        >
                          {isShortlisted ? (
                            <FaStar className="text-yellow-500" />
                          ) : (
                            <FaRegStar />
                          )}
                        </button>
                      </div>

                      {/* Platforms */}
                      {platforms.length > 0 && (
                        <div className="mb-4">
                          <div className="flex flex-wrap gap-2">
                            {platforms.slice(0, 3).map((platform, index) => (
                              <span
                                key={index}
                                className="px-2 py-1 bg-gray-100 text-gray-700 rounded-full text-xs font-medium"
                              >
                                {platform}
                              </span>
                            ))}
                            {platforms.length > 3 && (
                              <span className="px-2 py-1 text-gray-500 text-xs">
                                +{platforms.length - 3} more
                              </span>
                            )}
                          </div>
                        </div>
                      )}

                      {/* Categories */}
                      {categories.length > 0 && (
                        <div className="mb-4">
                          <div className="flex flex-wrap gap-2">
                            {categories.slice(0, 3).map((category, index) => (
                              <span
                                key={index}
                                className="px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium"
                              >
                                {category}
                              </span>
                            ))}
                            {categories.length > 3 && (
                              <span className="px-2 py-1 text-gray-500 text-xs">
                                +{categories.length - 3} more
                              </span>
                            )}
                          </div>
                        </div>
                      )}

                      {/* Actions */}
                      <div className="flex gap-2 mt-4 pt-4 border-t border-gray-200">
                        <Link
                          to={`/creator/${creator.id}`}
                          className="flex-1 px-4 py-2 text-sm text-center border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                        >
                          View Profile
                        </Link>
                        <Link
                          to={`/dashboard/brand/campaigns/new/private?creator_id=${creator.id}`}
                          className="flex-1 px-4 py-2 text-sm text-center bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
                        >
                          Book Creator
                        </Link>
                      </div>
                    </div>
                  )
                })}
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/creator/dashboard/MyDealsPage.tsx">
import { useEffect, useState } from 'react'
import { useAuth } from '../../../hooks/useAuth'
import { getSupabase } from '../../../lib/supabase'
import type { Deal } from '../../../types/deal'
import { LoadingState } from '../../../components/shared/LoadingState'
import { ErrorState } from '../../../components/shared/ErrorState'

export default function MyDealsPage() {
  const { session } = useAuth()
  const userId = session?.user?.id ?? null

  const [deals, setDeals] = useState<Deal[]>([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    if (!userId) {
      setLoading(false)
      setDeals([])
      return
    }

    async function fetchDeals() {
      const supabase = getSupabase()

      try {
        const { data, error: fetchError, status } = await supabase
          .from('deals')
          .select('*')
          .eq('creator_id', userId)
          .order('created_at', { ascending: false })

        // üîë IMPORTANT UX FIX:
        // 403 (RLS) is treated as empty state, not error
        if (fetchError) {
          if (status === 403) {
            setDeals([])
            setError(null)
          } else {
            setError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch deal')
          }
          setLoading(false)
          return
        }

        setDeals(data ?? [])
        setError(null)
        setLoading(false)
      } catch (err) {
        console.error('Fetch deals failed:', err)
        setError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch deal')
        setLoading(false)
      }
    }

    fetchDeals()
  }, [userId])

  const getStatusBadge = (status: Deal['status']) => {
    const statusConfig: Record<Deal['status'], { label: string; className: string }> = {
      invited: { label: 'Invited', className: 'bg-blue-100 text-blue-700' },
      accepted: { label: 'Accepted', className: 'bg-green-100 text-green-700' },
      in_progress: { label: 'In Progress', className: 'bg-yellow-100 text-yellow-700' },
      delivered: { label: 'Delivered', className: 'bg-purple-100 text-purple-700' },
      approved: { label: 'Approved', className: 'bg-indigo-100 text-indigo-700' },
      completed: { label: 'Completed', className: 'bg-gray-100 text-gray-700' },
      cancelled: { label: 'Cancelled', className: 'bg-red-100 text-red-700' },
    }

    const config = statusConfig[status] || statusConfig.invited

    return (
      <span className={`px-3 py-1 rounded-full text-xs font-medium ${config.className}`}>
        {config.label}
      </span>
    )
  }

  const formatDate = (dateString: string) => {
    const date = new Date(dateString)
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    })
  }

  if (loading) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <LoadingState />
        </div>
      </div>
    )
  }

  if (error) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <ErrorState message={error} />
        </div>
      </div>
    )
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">My Deals</h1>
          <p className="text-gray-600">
            View all your deals and collaborations with brands
          </p>
        </div>

        {deals.length === 0 ? (
          <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
            <p className="text-gray-600 mb-2">You don't have any deals yet</p>
            <p className="text-sm text-gray-500">
              Deals will appear here once brands book you
            </p>
          </div>
        ) : (
          <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-gray-50 border-b border-gray-200">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Deal ID
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Status
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Created
                    </th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-200">
                  {deals.map((deal) => (
                    <tr key={deal.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 text-sm font-medium text-gray-900">
                        {deal.id}
                      </td>
                      <td className="px-6 py-4">
                        {getStatusBadge(deal.status)}
                      </td>
                      <td className="px-6 py-4 text-sm text-gray-600">
                        {formatDate(deal.created_at)}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="src/pages/creator/dashboard/MyProposalsPage.tsx">
import { useEffect, useState } from 'react'
import { useAuth } from '../../../hooks/useAuth'
import { getSupabase } from '../../../lib/supabase'
import type { Proposal } from '../../../types/proposal'
import { LoadingState } from '../../../components/shared/LoadingState'
import { ErrorState } from '../../../components/shared/ErrorState'

export default function MyProposalsPage() {
  const { session } = useAuth()
  const userId = session?.user?.id ?? null

  const [proposals, setProposals] = useState<Proposal[]>([])
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    if (!userId) {
      setLoading(false)
      setProposals([])
      return
    }

    async function fetchProposals() {
      const supabase = getSupabase()

      try {
        const { data, error: fetchError, status } = await supabase
          .from('proposals')
          .select('*')
          .eq('creator_id', userId)
          .order('created_at', { ascending: false })

        // üîë UX FIX:
        // 403 (RLS) = empty state, not failure
        if (fetchError) {
          if (status === 403) {
            setProposals([])
            setError(null)
          } else {
            setError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch proposal')
          }
          setLoading(false)
          return
        }

        setProposals(data ?? [])
        setError(null)
        setLoading(false)
      } catch (err) {
        console.error('Fetch proposals failed:', err)
        setError('Kh√¥ng th·ªÉ t·∫£i danh s√°ch proposal')
        setLoading(false)
      }
    }

    fetchProposals()
  }, [userId])

  const getStatusBadge = (status: Proposal['status']) => {
    const statusConfig: Record<
      Proposal['status'],
      { label: string; className: string }
    > = {
      pending: { label: 'Pending', className: 'bg-yellow-100 text-yellow-700' },
      accepted: { label: 'Accepted', className: 'bg-green-100 text-green-700' },
      rejected: { label: 'Rejected', className: 'bg-red-100 text-red-700' },
    }

    const config = statusConfig[status]

    return (
      <span className={`px-3 py-1 rounded-full text-xs font-medium ${config.className}`}>
        {config.label}
      </span>
    )
  }

  const formatDate = (dateString: string) => {
    const date = new Date(dateString)
    return date.toLocaleDateString('en-US', {
      year: 'numeric',
      month: 'short',
      day: 'numeric',
    })
  }

  const formatPrice = (price: number | null) => {
    if (price === null) return 'N/A'
    return `$${price.toLocaleString('en-US', {
      minimumFractionDigits: 2,
      maximumFractionDigits: 2,
    })}`
  }

  if (loading) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <LoadingState />
        </div>
      </div>
    )
  }

  if (error) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <ErrorState message={error} />
        </div>
      </div>
    )
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="mb-8">
          <h1 className="text-3xl font-bold text-gray-900 mb-2">My Proposals</h1>
          <p className="text-gray-600">
            View all your proposals submitted to brands
          </p>
        </div>

        {proposals.length === 0 ? (
          <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
            <p className="text-gray-600 mb-2">You don't have any proposals yet</p>
            <p className="text-sm text-gray-500">
              Proposals will appear here once you submit them
            </p>
          </div>
        ) : (
          <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-gray-50 border-b border-gray-200">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Proposal ID
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Campaign ID
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Price
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Status
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">
                      Created
                    </th>
                  </tr>
                </thead>
                <tbody className="divide-y divide-gray-200">
                  {proposals.map((proposal) => (
                    <tr key={proposal.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 text-sm font-medium text-gray-900">
                        {proposal.id}
                      </td>
                      <td className="px-6 py-4 text-sm text-gray-600">
                        {proposal.campaign_id}
                      </td>
                      <td className="px-6 py-4 text-sm text-gray-600">
                        {formatPrice(proposal.price)}
                      </td>
                      <td className="px-6 py-4">
                        {getStatusBadge(proposal.status)}
                      </td>
                      <td className="px-6 py-4 text-sm text-gray-600">
                        {formatDate(proposal.created_at)}
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="src/pages/public/PublicCreatorProfilePage.tsx">
import { useEffect, useState } from 'react'
import { useParams, Link } from 'react-router-dom'
import { getSupabase } from '../../lib/supabase'
import type { CreatorProfile } from '../../types/profile'
import { LoadingState } from '../../components/shared/LoadingState'
import { ErrorState } from '../../components/shared/ErrorState'

/**
 * PublicCreatorProfilePage: Public read-only creator profile
 * 
 * Route: /creator/:id or /c/:id
 * - No authentication required
 * - Read-only view
 */

interface PublicCreatorData {
  profile: CreatorProfile
  subscription: {
    plan: 'free' | 'pro'
  } | null
}

export default function PublicCreatorProfilePage() {
  const { id } = useParams<{ id: string }>()
  const [data, setData] = useState<PublicCreatorData | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)

  useEffect(() => {
    if (!id) {
      setError('Creator ID is required')
      setLoading(false)
      return
    }

    async function fetchCreatorProfile() {
      const supabase = getSupabase()

      try {
        // Step 1: Fetch core profile to verify it's a creator
        const { data: coreProfile, error: coreError } = await supabase
          .from('profiles')
          .select('id, role')
          .eq('id', id)
          .single()

        if (coreError) {
          if (coreError.code === 'PGRST116') {
            setError('Creator profile not found')
          } else {
            setError('Failed to load creator profile')
          }
          setLoading(false)
          return
        }

        if (!coreProfile || coreProfile.role !== 'creator') {
          setError('Creator profile not found')
          setLoading(false)
          return
        }

        // Step 2: Fetch creator profile data
        const { data: creatorProfile, error: creatorError } = await supabase
          .from('creator_profiles')
          .select('*')
          .eq('user_id', id)
          .single()

        if (creatorError) {
          if (creatorError.code === 'PGRST116') {
            setError('Creator profile not found')
          } else {
            setError('Failed to load creator profile')
          }
          setLoading(false)
          return
        }

        if (!creatorProfile) {
          setError('Creator profile not found')
          setLoading(false)
          return
        }

        // Step 3: Fetch subscription (for future use, no logic yet)
        const { data: subscription } = await supabase
          .from('subscriptions')
          .select('plan')
          .eq('user_id', id)
          .maybeSingle()

        // Merge profile data
        const mergedProfile: CreatorProfile = {
          ...coreProfile,
          ...creatorProfile,
          role: 'creator',
        }

        setData({
          profile: mergedProfile,
          subscription: subscription || null,
        })
        setLoading(false)
      } catch (err: any) {
        setError(err.message || 'Failed to load creator profile')
        setLoading(false)
      }
    }

    fetchCreatorProfile()
  }, [id])

  if (loading) {
    return (
      <div className="min-h-screen bg-gray-50">
        <div className="max-w-4xl mx-auto px-6 py-12">
          <LoadingState />
        </div>
      </div>
    )
  }

  if (error || !data) {
    return (
      <div className="min-h-screen bg-gray-50">
        <div className="max-w-4xl mx-auto px-6 py-12">
          <ErrorState message={error || 'Creator profile not found'} />
        </div>
      </div>
    )
  }

  const { profile } = data
  const displayName = profile.full_name || 'Creator'
  const location = [profile.city, profile.country].filter(Boolean).join(', ') || null
  const platforms = profile.creator_platforms || []
  const categories = profile.content_categories || []
  const followersCount = profile.followers_count

  const formatFollowers = (count: number | null | undefined): string => {
    if (!count) return 'N/A'
    if (count >= 1000000) return `${(count / 1000000).toFixed(1)}M`
    if (count >= 1000) return `${(count / 1000).toFixed(1)}K`
    return count.toLocaleString()
  }

  return (
    <div className="min-h-screen bg-gray-50">
      <div className="max-w-4xl mx-auto px-6 py-12">
        <div className="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
          {/* Header Section */}
          <div className="p-8 border-b border-gray-200">
            <div className="flex flex-col sm:flex-row items-start sm:items-center gap-6">
              {/* Avatar */}
              <div className="flex-shrink-0">
                {profile.avatar_url ? (
                  <img
                    src={profile.avatar_url}
                    alt={displayName}
                    className="w-24 h-24 rounded-full object-cover border-2 border-gray-200"
                  />
                ) : (
                  <div className="w-24 h-24 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center text-white text-2xl font-bold">
                    {displayName.charAt(0).toUpperCase()}
                  </div>
                )}
              </div>

              {/* Basic Info */}
              <div className="flex-1">
                <h1 className="text-3xl font-bold text-gray-900 mb-2">{displayName}</h1>
                {location && (
                  <p className="text-gray-600 mb-4">
                    <span className="inline-flex items-center">
                      <svg
                        className="w-4 h-4 mr-1"
                        fill="none"
                        stroke="currentColor"
                        viewBox="0 0 24 24"
                      >
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                        />
                        <path
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeWidth={2}
                          d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                        />
                      </svg>
                      {location}
                    </span>
                  </p>
                )}
                {followersCount !== null && followersCount !== undefined && (
                  <p className="text-gray-600">
                    <span className="font-medium">{formatFollowers(followersCount)}</span> followers
                  </p>
                )}
              </div>
            </div>
          </div>

          {/* Book Creator Button (for brands) */}
          <div className="px-8 py-4 bg-gray-50 border-b border-gray-200">
            <Link
              to={`/dashboard/brand/campaigns/new/private?creator_id=${profile.id}`}
              className="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity text-sm font-medium"
            >
              Book This Creator
            </Link>
          </div>

          {/* Content Section */}
          <div className="p-8 space-y-8">
            {/* Platforms */}
            {platforms.length > 0 && (
              <div>
                <h2 className="text-xl font-semibold text-gray-900 mb-4">Platforms</h2>
                <div className="flex flex-wrap gap-2">
                  {platforms.map((platform, index) => (
                    <span
                      key={index}
                      className="px-4 py-2 bg-gray-100 text-gray-700 rounded-full text-sm font-medium"
                    >
                      {platform}
                    </span>
                  ))}
                </div>
              </div>
            )}

            {/* Content Categories */}
            {categories.length > 0 && (
              <div>
                <h2 className="text-xl font-semibold text-gray-900 mb-4">Content Categories</h2>
                <div className="flex flex-wrap gap-2">
                  {categories.map((category, index) => (
                    <span
                      key={index}
                      className="px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium"
                    >
                      {category}
                    </span>
                  ))}
                </div>
              </div>
            )}

            {/* Empty State */}
            {platforms.length === 0 && categories.length === 0 && (
              <div className="text-center py-12 text-gray-500">
                <p>No additional information available</p>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/types/campaign.ts">
/**
 * Campaign types (matches database schema exactly)
 */

export type CampaignStatus = 'draft' | 'open' | 'closed'

export interface Campaign {
  id: string
  brand_id: string
  title: string
  description: string | null
  status: CampaignStatus
  budget_min: number | null
  budget_max: number | null
  created_at: string
  updated_at: string
}
</file>

<file path="src/types/deal.ts">
/**
 * Deal types (matches database schema exactly)
 */

export type DealStatus = 'invited' | 'accepted' | 'in_progress' | 'delivered' | 'approved' | 'completed' | 'cancelled'

export interface Deal {
  id: string
  campaign_id: string | null
  brand_id: string
  creator_id: string
  status: DealStatus
  created_at: string
}
</file>

<file path="src/types/proposal.ts">
/**
 * Proposal types (matches database schema exactly)
 */

export type ProposalStatus = 'pending' | 'accepted' | 'rejected'

export interface Proposal {
  id: string
  campaign_id: string
  creator_id: string
  message: string | null
  price: number | null
  status: ProposalStatus
  created_at: string
}
</file>

<file path="src/types/subscription.ts">
/**
 * Subscription types (matches database schema exactly)
 */

export type SubscriptionPlan = 'free' | 'pro'

export interface Subscription {
  user_id: string
  plan: SubscriptionPlan
  valid_until: string | null
  created_at: string
}
</file>

<file path="src/app/routeGuards.tsx">
import { ReactNode } from 'react'
import { Navigate, useParams } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'
import { useProfile } from '../hooks/useProfile'
import { LoadingState } from '../components/shared/LoadingState'
import type { RouteRole } from './routeConfig'

/**
 * routeGuards: Permission and validation logic for routes
 * 
 * These components handle authentication and role validation.
 * Route definitions are separate from permission logic.
 */

/**
 * DashboardRouteGuard: Validates authentication and role for dashboard routes
 * 
 * Responsibilities:
 * - Checks if user is authenticated
 * - Validates role matches URL parameter
 * - Redirects to /app if role mismatch (AppGate will handle routing)
 */
export function DashboardRouteGuard({ children }: { children: ReactNode }) {
  const { role } = useParams<{ role: RouteRole }>()
  const { session, loading: authLoading } = useAuth()
  const { profile, loading: profileLoading } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )

  if (authLoading || profileLoading) {
    return <LoadingState />
  }

  if (!session || !profile) {
    return <Navigate to="/login" replace />
  }

  // Validate role in URL matches profile role
  if (!role || (role !== 'creator' && role !== 'brand') || profile.role !== role) {
    return <Navigate to="/app" replace />
  }

  return <>{children}</>
}
</file>

<file path="src/components/AvatarUpload/AvatarUpload.tsx">
import Cropper from 'react-easy-crop'
import { useAvatarUpload, CROP_SIZE } from './useAvatarUpload'

interface AvatarUploadProps {
  currentAvatarUrl?: string
  onAvatarChange: (url: string) => void
  userId: string
}

/**
 * AvatarUpload: Presentational component for avatar upload UI
 * 
 * Responsibilities:
 * - Renders avatar display and upload UI
 * - Renders crop modal UI
 * - Delegates all upload logic to useAvatarUpload hook
 */
export default function AvatarUpload({
  currentAvatarUrl,
  onAvatarChange,
  userId,
}: AvatarUploadProps) {
  const {
    imageSrc,
    showCropModal,
    crop,
    zoom,
    uploading,
    fileInputRef,
    handleFileSelect,
    handleCropComplete,
    handleCrop,
    handleCancel,
    setCrop,
    setZoom,
  } = useAvatarUpload({
    userId,
    onUploadComplete: onAvatarChange,
  })

  return (
    <>
      {/* AVATAR */}
      <div className="flex flex-col items-center gap-2">
        <div
          onClick={() => fileInputRef.current?.click()}
          className="relative w-24 h-24 rounded-full overflow-hidden bg-gray-200 cursor-pointer group"
        >
          {currentAvatarUrl ? (
            <img src={currentAvatarUrl} alt="Avatar" className="w-full h-full object-cover" />
          ) : (
            <div className="w-full h-full flex items-center justify-center text-gray-400 text-4xl">
              üë§
            </div>
          )}

          <div className="absolute inset-0 bg-black/30 opacity-0 group-hover:opacity-100 flex items-center justify-center transition">
            <span className="text-white text-xs font-medium">ƒê·ªïi avatar</span>
          </div>
        </div>
      </div>

      <input
        ref={fileInputRef}
        type="file"
        accept="image/*"
        hidden
        onChange={handleFileSelect}
      />

      {/* MODAL */}
      {showCropModal && imageSrc && (
        <div className="fixed inset-0 z-50 bg-black/60 flex justify-center p-4">
          <div
            className="bg-white rounded-xl p-5 w-full"
            style={{
              maxWidth: '400px',
              maxHeight: '80vh',
              display: 'flex',
              flexDirection: 'column',
            }}
          >
            <h3 className="font-semibold mb-4 flex-shrink-0">Ch·ªânh s·ª≠a avatar</h3>

            {/* Crop Area - Compact, centered */}
            <div
              className="relative mx-auto flex-shrink-0"
              style={{
                width: `${CROP_SIZE}px`,
                height: `${CROP_SIZE}px`,
                backgroundColor: '#000',
              }}
            >
              <Cropper
                image={imageSrc}
                crop={crop}
                zoom={zoom}
                aspect={1}
                cropShape="round"
                showGrid={true}
                onCropChange={setCrop}
                onZoomChange={setZoom}
                onCropComplete={handleCropComplete}
                style={{
                  containerStyle: {
                    width: '100%',
                    height: '100%',
                  },
                }}
              />
            </div>

            {/* Zoom Control - Directly below crop */}
            <div
              className="mt-4 mb-4 flex-shrink-0"
              style={{ width: `${CROP_SIZE}px`, marginLeft: 'auto', marginRight: 'auto' }}
            >
              <label className="block text-sm font-medium text-gray-700 mb-2">Zoom</label>
              <input
                type="range"
                min="1"
                max="3"
                step="0.1"
                value={zoom}
                onChange={(e) => setZoom(parseFloat(e.target.value))}
                className="w-full"
              />
            </div>

            {/* Buttons - Always visible */}
            <div className="flex justify-end gap-2 mt-3 flex-shrink-0">
              <button
                onClick={handleCancel}
                disabled={uploading}
                className="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-50 text-gray-700 font-medium disabled:opacity-50"
              >
                H·ªßy
              </button>
              <button
                onClick={handleCrop}
                disabled={uploading}
                className="px-4 py-2 rounded-lg bg-gradient-to-r from-indigo-500 to-pink-500 text-white font-medium disabled:opacity-50"
              >
                {uploading ? 'ƒêang l∆∞u‚Ä¶' : 'L∆∞u'}
              </button>
            </div>
          </div>
        </div>
      )}
    </>
  )
}
</file>

<file path="src/components/AvatarUpload/index.ts">
export { default } from './AvatarUpload'
export { useAvatarUpload, CROP_SIZE } from './useAvatarUpload'
export type { UseAvatarUploadOptions, UseAvatarUploadReturn } from './useAvatarUpload'
</file>

<file path="src/components/AvatarUpload/useAvatarUpload.ts">
import { useState, useRef } from 'react'
import { Area } from 'react-easy-crop'
import { getSupabase } from '../../lib/supabase'
import { getCroppedImg } from '../../utils/cropImage'

const CROP_SIZE = 300
const MAX_FILE_SIZE = 5 * 1024 * 1024 // 5MB
const ALLOWED_FILE_TYPES = ['image/jpeg', 'image/png', 'image/webp']

export interface UseAvatarUploadOptions {
  userId: string
  onUploadComplete: (url: string) => void
}

export interface UseAvatarUploadReturn {
  // State
  imageSrc: string | null
  showCropModal: boolean
  crop: { x: number; y: number }
  zoom: number
  uploading: boolean
  
  // Refs
  fileInputRef: React.RefObject<HTMLInputElement>
  
  // Handlers
  handleFileSelect: (e: React.ChangeEvent<HTMLInputElement>) => void
  handleCropComplete: (croppedArea: Area, croppedAreaPixels: Area) => void
  handleCrop: () => Promise<void>
  handleCancel: () => void
  setCrop: (crop: { x: number; y: number }) => void
  setZoom: (zoom: number) => void
}

/**
 * useAvatarUpload: Handles avatar upload logic including validation, cropping, and upload
 * 
 * Responsibilities:
 * - File validation (type, size)
 * - Image cropping state management
 * - Supabase storage upload
 * - State management for upload flow
 */
export function useAvatarUpload({ userId, onUploadComplete }: UseAvatarUploadOptions): UseAvatarUploadReturn {
  const [imageSrc, setImageSrc] = useState<string | null>(null)
  const [showCropModal, setShowCropModal] = useState(false)
  const [crop, setCrop] = useState({ x: 0, y: 0 })
  const [zoom, setZoom] = useState(1)
  const [croppedAreaPixels, setCroppedAreaPixels] = useState<Area | null>(null)
  const [uploading, setUploading] = useState(false)
  
  const fileInputRef = useRef<HTMLInputElement>(null)

  const validateFile = (file: File): string | null => {
    if (!ALLOWED_FILE_TYPES.includes(file.type)) {
      return 'Ch·ªâ h·ªó tr·ª£ JPG, PNG, WEBP'
    }
    
    if (file.size > MAX_FILE_SIZE) {
      return '·∫¢nh t·ªëi ƒëa 5MB'
    }
    
    return null
  }

  const resetCropState = () => {
    setImageSrc(null)
    setCrop({ x: 0, y: 0 })
    setZoom(1)
    setCroppedAreaPixels(null)
  }

  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
    const file = e.target.files?.[0]
    if (!file) return

    const validationError = validateFile(file)
    if (validationError) {
      alert(validationError)
      return
    }

    const reader = new FileReader()
    reader.onload = () => {
      setImageSrc(reader.result as string)
      setShowCropModal(true)
      setCrop({ x: 0, y: 0 })
      setZoom(1)
    }
    reader.readAsDataURL(file)
  }

  const handleCropComplete = (croppedArea: Area, croppedAreaPixels: Area) => {
    setCroppedAreaPixels(croppedAreaPixels)
  }

  const handleCrop = async () => {
    if (!imageSrc || !croppedAreaPixels) return

    setUploading(true)

    try {
      // Get cropped image blob
      const croppedImage = await getCroppedImg(imageSrc, croppedAreaPixels)
      
      if (!croppedImage) {
        throw new Error('Kh√¥ng th·ªÉ crop ·∫£nh')
      }

      // Upload to Supabase Storage
      const supabase = getSupabase()
      const timestamp = Date.now()
      const fileExt = 'jpg'
      const path = `${userId}/${timestamp}.${fileExt}`

      // Upload file to storage
      const { error: uploadError } = await supabase.storage
        .from('avatars')
        .upload(path, croppedImage, {
          upsert: true,
          contentType: 'image/jpeg',
        })

      if (uploadError) {
        throw new Error(`Upload failed: ${uploadError.message}`)
      }

      // Get public URL
      const { data: urlData } = supabase.storage
        .from('avatars')
        .getPublicUrl(path)

      if (!urlData?.publicUrl) {
        throw new Error('Failed to get public URL')
      }

      // Notify parent component
      onUploadComplete(urlData.publicUrl)

      // Close modal and reset
      setShowCropModal(false)
      resetCropState()
    } catch (error: any) {
      console.error('Avatar upload error:', error)
      alert(error.message || 'Upload th·∫•t b·∫°i')
      // Reset state on error
      setShowCropModal(false)
      resetCropState()
    } finally {
      setUploading(false)
    }
  }

  const handleCancel = () => {
    setShowCropModal(false)
    resetCropState()
  }

  return {
    imageSrc,
    showCropModal,
    crop,
    zoom,
    uploading,
    fileInputRef,
    handleFileSelect,
    handleCropComplete,
    handleCrop,
    handleCancel,
    setCrop,
    setZoom,
  }
}

export { CROP_SIZE }
</file>

<file path="src/components/shared/ErrorState.tsx">
/**
 * ErrorState: Shared error component
 * 
 * Used for consistent error UI across the application.
 */

interface ErrorStateProps {
  message?: string
}

export function ErrorState({ message = 'C√≥ l·ªói x·∫£y ra' }: ErrorStateProps) {
  return (
    <div className="flex items-center justify-center py-20">
      <div className="text-[#6B7280]">{message}</div>
    </div>
  )
}
</file>

<file path="src/components/shared/LoadingState.tsx">
/**
 * LoadingState: Shared loading component
 * 
 * Used across the application for consistent loading UI.
 */
export function LoadingState() {
  return (
    <div className="flex items-center justify-center py-20">
      <div className="text-[#6B7280]">ƒêang t·∫£i...</div>
    </div>
  )
}

/**
 * LoadingStateCompact: Compact loading state for smaller areas
 */
export function LoadingStateCompact() {
  return (
    <div className="flex items-center justify-center py-10">
      <div className="text-[#6B7280] text-sm">ƒêang t·∫£i...</div>
    </div>
  )
}

/**
 * NotFoundState: Shared not found component
 * 
 * Used for consistent "not found" UI across the application.
 */
export function NotFoundState({ message = 'Kh√¥ng t√¨m th·∫•y' }: { message?: string }) {
  return (
    <div className="flex items-center justify-center py-20">
      <div className="text-[#6B7280]">{message}</div>
    </div>
  )
}
</file>

<file path="src/components/shared/NotificationModal.tsx">
import { useState, useEffect } from 'react'
import { FaCheck, FaCheckCircle, FaTimes } from 'react-icons/fa'

// Mock notification data - replace with real API data later
interface Notification {
  id: string
  type: 'proposal' | 'booking' | 'approval' | 'comment' | 'campaign' | 'profile' | 'collaboration'
  avatar: string
  content: string
  time: string
  timeAgo: string
  read: boolean
  ctaLabel: string
  ctaAction?: () => void
  section: 'new' | 'thisWeek' | 'earlier'
}

const MOCK_NOTIFICATIONS: Notification[] = [
  {
    id: '1',
    type: 'proposal',
    avatar: 'https://ui-avatars.com/api/?name=Brand+X&background=6366F1&color=fff',
    content: 'Brand X ƒë√£ g·ª≠i cho b·∫°n m·ªôt ƒë·ªÅ xu·∫•t m·ªõi cho ƒë·ªÅ xu·∫•t Winter Car c·ªßa h·ªç',
    time: '2025-01-20T10:00:00Z',
    timeAgo: '5 ph√∫t tr∆∞·ªõc',
    read: false,
    ctaLabel: 'Xem ƒë·ªÅ xu·∫•t',
    section: 'new'
  },
  {
    id: '2',
    type: 'booking',
    avatar: 'https://ui-avatars.com/api/?name=Sarah+Chen&background=EC4899&color=fff',
    content: 'Sarah Chen ƒë√£ ch·∫•p nh·∫≠n y√™u c·∫ßu ƒë·∫∑t l·ªãch c·ªßa b·∫°n cho bu·ªïi ch·ª•p ·∫£nh',
    time: '2025-01-20T09:00:00Z',
    timeAgo: '1 gi·ªù tr∆∞·ªõc',
    read: false,
    ctaLabel: 'Qu·∫£n l√Ω l·ªãch',
    section: 'new'
  },
  {
    id: '3',
    type: 'profile',
    avatar: 'https://ui-avatars.com/api/?name=Profile&background=8B5CF6&color=fff',
    content: 'H·ªì s∆° c·ªßa b·∫°n ƒë√£ ƒë·∫°t 1000 l∆∞·ª£t xem trong tu·∫ßn n√†y! H√£y ti·∫øp t·ª•c ph√°t huy.',
    time: '2025-01-20T07:00:00Z',
    timeAgo: '3 gi·ªù tr∆∞·ªõc',
    read: false,
    ctaLabel: '',
    section: 'new'
  },
  {
    id: '4',
    type: 'approval',
    avatar: 'https://ui-avatars.com/api/?name=Alpha+Corp&background=6366F1&color=fff',
    content: 'Alpha Corp c·∫ßn b·∫°n ph√™ duy·ªát b·∫£n nh√°p m·ªõi nh·∫•t cho "Project Zenith"',
    time: '2025-01-19T15:00:00Z',
    timeAgo: 'H√¥m qua',
    read: true,
    ctaLabel: 'Ph√™ duy·ªát b·∫£n nh√°p',
    section: 'thisWeek'
  },
  {
    id: '5',
    type: 'comment',
    avatar: 'https://ui-avatars.com/api/?name=Emily+White&background=EC4899&color=fff',
    content: 'Emily White ƒë√£ b√¨nh lu·∫≠n v·ªÅ b·∫£n nh√°p b·∫°n v·ª´a t·∫£i l√™n',
    time: '2025-01-19T10:00:00Z',
    timeAgo: 'H√¥m qua',
    read: true,
    ctaLabel: 'Xem b√¨nh lu·∫≠n',
    section: 'thisWeek'
  },
  {
    id: '6',
    type: 'campaign',
    avatar: 'https://ui-avatars.com/api/?name=Global+Brands&background=6366F1&color=fff',
    content: 'Global Brands Inc. ƒë√£ ƒëƒÉng c∆° h·ªôi chi·∫øn d·ªãch m·ªõi: "Summer Collec Campaign"',
    time: '2025-01-18T14:00:00Z',
    timeAgo: '2 ng√†y tr∆∞·ªõc',
    read: true,
    ctaLabel: 'Xem chi·∫øn d·ªãch',
    section: 'thisWeek'
  },
  {
    id: '7',
    type: 'approval',
    avatar: 'https://ui-avatars.com/api/?name=Creative+Studio&background=8B5CF6&color=fff',
    content: 'Creative Studio ƒë√£ ph√™ duy·ªát s·∫£n ph·∫©m c·ªßa b·∫°n cho "Animated Explainer Project"',
    time: '2025-01-17T11:00:00Z',
    timeAgo: '3 ng√†y tr∆∞·ªõc',
    read: true,
    ctaLabel: 'Xem th·ªèa thu·∫≠n',
    section: 'thisWeek'
  },
  {
    id: '8',
    type: 'collaboration',
    avatar: 'https://ui-avatars.com/api/?name=Jessica+Lee&background=EC4899&color=fff',
    content: 'Jessica Lee ƒë√£ m·ªùi b·∫°n c·ªông t√°c trong "Brand Launch Event"',
    time: '2025-01-13T09:00:00Z',
    timeAgo: '1 tu·∫ßn tr∆∞·ªõc',
    read: true,
    ctaLabel: 'Ch·∫•p nh·∫≠n l·ªùi m·ªùi',
    section: 'earlier'
  },
]

const FILTER_TABS = [
  { id: 'all', label: 'T·∫•t c·∫£' },
  { id: 'unread', label: 'Ch∆∞a ƒë·ªçc' },
  { id: 'proposals', label: 'ƒê·ªÅ xu·∫•t' },
  { id: 'bookings', label: 'ƒê·∫∑t l·ªãch' },
  { id: 'drafts', label: 'B·∫£n nh√°p' },
  { id: 'approvals', label: 'Ph√™ duy·ªát' },
] as const

type FilterTab = typeof FILTER_TABS[number]['id']

interface NotificationModalProps {
  isOpen: boolean
  onClose: () => void
}

export default function NotificationModal({ isOpen, onClose }: NotificationModalProps) {
  const [activeFilter, setActiveFilter] = useState<FilterTab>('all')
  const [notifications, setNotifications] = useState<Notification[]>(MOCK_NOTIFICATIONS)

  // Handle Esc key to close modal
  useEffect(() => {
    if (!isOpen) return

    const handleEscKey = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose()
      }
    }

    document.addEventListener('keydown', handleEscKey)
    return () => {
      document.removeEventListener('keydown', handleEscKey)
    }
  }, [isOpen, onClose])

  const unreadCount = notifications.filter(n => !n.read).length

  const filteredNotifications = notifications.filter((notification) => {
    if (activeFilter === 'all') return true
    if (activeFilter === 'unread') return !notification.read
    if (activeFilter === 'proposals') return notification.type === 'proposal'
    if (activeFilter === 'bookings') return notification.type === 'booking'
    if (activeFilter === 'drafts') return notification.type === 'comment'
    if (activeFilter === 'approvals') return notification.type === 'approval'
    return true
  })

  const markAllAsRead = () => {
    setNotifications(prev => prev.map(n => ({ ...n, read: true })))
  }

  const markAsRead = (id: string) => {
    setNotifications(prev => prev.map(n => n.id === id ? { ...n, read: true } : n))
  }

  const newNotifications = filteredNotifications.filter(n => n.section === 'new')
  const thisWeekNotifications = filteredNotifications.filter(n => n.section === 'thisWeek')
  const earlierNotifications = filteredNotifications.filter(n => n.section === 'earlier')

  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50" onClick={onClose}>
      <div 
        className="bg-white rounded-xl shadow-2xl w-[1000px] h-[80vh] flex flex-col mx-4"
        onClick={(e) => e.stopPropagation()}
      >
        {/* Modal Header - Sticky */}
        <div className="flex items-center justify-between p-6 border-b border-gray-200 flex-shrink-0">
          <h2 className="text-xl font-bold text-gray-900">Th√¥ng b√°o</h2>
          <button
            onClick={onClose}
            className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
          >
            <FaTimes className="w-5 h-5 text-gray-500" />
          </button>
        </div>

        {/* Filter Tabs - Sticky */}
        <div className="flex items-center gap-2 p-4 border-b border-gray-200 flex-shrink-0 overflow-x-auto">
          {FILTER_TABS.map((tab) => (
            <button
              key={tab.id}
              onClick={() => setActiveFilter(tab.id)}
              className={`
                px-4 py-2 rounded-full text-sm font-medium transition-colors whitespace-nowrap flex items-center gap-2
                ${activeFilter === tab.id
                  ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white'
                  : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50'
                }
              `}
            >
              <span>{tab.label}</span>
              {tab.id === 'unread' && unreadCount > 0 && (
                <span className={`
                  w-5 h-5 rounded-full flex items-center justify-center text-xs font-bold
                  ${activeFilter === tab.id 
                    ? 'bg-white text-[#6366F1]' 
                    : 'bg-[#6366F1] text-white'
                  }
                `}>
                  {unreadCount}
                </span>
              )}
            </button>
          ))}

          {/* Mark all as read button */}
          <button
            onClick={markAllAsRead}
            className="ml-auto flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:text-[#6366F1] transition-colors border-2 border-gray-300 rounded-lg hover:border-[#6366F1] hover:bg-gray-50 active:bg-gray-100 whitespace-nowrap"
          >
            <FaCheckCircle className="w-4 h-4" />
            <span>ƒê√°nh d·∫•u t·∫•t c·∫£ l√† ƒë√£ ƒë·ªçc</span>
          </button>
        </div>

        {/* Scrollable Notification List */}
        <div className="flex-1 overflow-y-auto p-4">
          <div className="space-y-6">
            {/* New Section */}
            {newNotifications.length > 0 && (
              <div>
                <h3 className="text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wide">M·ªõi</h3>
                <div className="space-y-3">
                  {newNotifications.map((notification) => (
                    <NotificationCard
                      key={notification.id}
                      notification={notification}
                      onMarkAsRead={() => markAsRead(notification.id)}
                    />
                  ))}
                </div>
              </div>
            )}

            {/* This Week Section */}
            {thisWeekNotifications.length > 0 && (
              <div>
                <h3 className="text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wide">Tu·∫ßn n√†y</h3>
                <div className="space-y-3">
                  {thisWeekNotifications.map((notification) => (
                    <NotificationCard
                      key={notification.id}
                      notification={notification}
                      onMarkAsRead={() => markAsRead(notification.id)}
                    />
                  ))}
                </div>
              </div>
            )}

            {/* Earlier Section */}
            {earlierNotifications.length > 0 && (
              <div>
                <h3 className="text-xs font-semibold text-gray-500 mb-3 uppercase tracking-wide">Tr∆∞·ªõc ƒë√≥</h3>
                <div className="space-y-3">
                  {earlierNotifications.map((notification) => (
                    <NotificationCard
                      key={notification.id}
                      notification={notification}
                      onMarkAsRead={() => markAsRead(notification.id)}
                    />
                  ))}
                </div>
              </div>
            )}

            {/* Empty State */}
            {filteredNotifications.length === 0 && (
              <div className="text-center py-12">
                <p className="text-gray-500">Kh√¥ng c√≥ th√¥ng b√°o n√†o</p>
              </div>
            )}
          </div>
        </div>
      </div>
    </div>
  )
}

interface NotificationCardProps {
  notification: Notification
  onMarkAsRead: () => void
}

function NotificationCard({ notification, onMarkAsRead }: NotificationCardProps) {
  return (
    <div
      className={`
        flex items-start gap-4 p-4 rounded-xl border transition-colors
        ${notification.read 
          ? 'bg-white border-gray-200' 
          : 'bg-blue-50 border-blue-200'
        }
        hover:shadow-md
      `}
    >
      {/* Avatar */}
      <img
        src={notification.avatar}
        alt=""
        className="w-12 h-12 rounded-full flex-shrink-0"
      />

      {/* Content */}
      <div className="flex-1 min-w-0">
        <p className={`text-sm ${notification.read ? 'text-gray-700' : 'text-gray-900 font-medium'}`}>
          {notification.content}
        </p>
        <p className="text-xs text-gray-500 mt-1">{notification.timeAgo}</p>
      </div>

      {/* Actions */}
      <div className="flex items-start gap-3 flex-shrink-0">
        {notification.ctaLabel && (
          <button
            onClick={onMarkAsRead}
            className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap"
          >
            {notification.ctaLabel}
          </button>
        )}
        <button
          onClick={onMarkAsRead}
          className={`
            p-2 rounded-lg transition-colors
            ${notification.read 
              ? 'text-gray-400 hover:bg-gray-100' 
              : 'text-[#6366F1] hover:bg-blue-100'
            }
          `}
          title={notification.read ? 'ƒê√£ ƒë·ªçc' : 'ƒê√°nh d·∫•u l√† ƒë√£ ƒë·ªçc'}
        >
          <FaCheck className="w-4 h-4" />
        </button>
      </div>
    </div>
  )
}
</file>

<file path="src/components/shared/ScrollToTop.tsx">
import { useEffect } from 'react'
import { useLocation } from 'react-router-dom'

/**
 * ScrollToTop component that scrolls to top on every route change.
 * This ensures that navigating between pages always starts at the top.
 */
export default function ScrollToTop() {
  const { pathname } = useLocation()

  useEffect(() => {
    window.scrollTo(0, 0)
  }, [pathname])

  return null
}
</file>

<file path="src/components/shared/UpgradePlanModal.tsx">
import { useState, useEffect } from 'react'
import { FaTimes, FaCheck } from 'react-icons/fa'

interface UpgradePlanModalProps {
  isOpen: boolean
  onClose: () => void
  currentPlan?: 'free' | 'pro' | 'business'
}

interface Plan {
  id: 'free' | 'pro' | 'business'
  name: string
  monthlyPrice: number
  yearlyPrice: number
  features: string[]
  ctaText: string
  isCurrent?: boolean
}

const PLANS: Plan[] = [
  {
    id: 'free',
    name: 'Mi·ªÖn ph√≠',
    monthlyPrice: 0,
    yearlyPrice: 0,
    features: [
      'T·∫°o chi·∫øn d·ªãch c∆° b·∫£n',
      'T·ªëi ƒëa 1 h·ª£p t√°c ƒëang di·ªÖn ra',
      'Hi·ªÉn th·ªã h·ªì s∆° c√¥ng khai',
      'Ph√¢n t√≠ch c∆° b·∫£n',
      'Nh·∫Øn tin tr·ª±c ti·∫øp v·ªõi th∆∞∆°ng hi·ªáu',
      'H·ªó tr·ª£ ti√™u chu·∫©n',
    ],
    ctaText: 'G√≥i hi·ªán t·∫°i',
  },
  {
    id: 'pro',
    name: 'Pro',
    monthlyPrice: 20,
    yearlyPrice: 192,
    features: [
      'T·∫°o chi·∫øn d·ªãch kh√¥ng gi·ªõi h·∫°n',
      'T·ªëi ƒëa 10 h·ª£p t√°c ƒëang di·ªÖn ra',
      'T√πy ch·ªânh h·ªì s∆° n√¢ng cao',
      'Ph√¢n t√≠ch & b√°o c√°o n√¢ng cao',
      'Nh·∫Øn tin tr·ª±c ti·∫øp v·ªõi th∆∞∆°ng hi·ªáu',
      '∆Øu ti√™n h·ªó tr·ª£ qua email',
    ],
    ctaText: 'N√¢ng c·∫•p l√™n Pro',
  },
  {
    id: 'business',
    name: 'Business',
    monthlyPrice: 79,
    yearlyPrice: 758,
    features: [
      'T·∫°o chi·∫øn d·ªãch kh√¥ng gi·ªõi h·∫°n',
      'H·ª£p t√°c ƒëang di·ªÖn ra kh√¥ng gi·ªõi h·∫°n',
      'Qu·∫£n l√Ω t√†i kho·∫£n chuy√™n d·ª•ng',
      'Truy c·∫≠p API & t√≠ch h·ª£p',
      'C√¥ng c·ª• c·ªông t√°c nh√≥m',
      'H·ªó tr·ª£ 24/7 qua ƒëi·ªán tho·∫°i & chat',
    ],
    ctaText: 'N√¢ng c·∫•p l√™n Business',
  },
]

export default function UpgradePlanModal({ isOpen, onClose, currentPlan = 'free' }: UpgradePlanModalProps) {
  const [billingCycle, setBillingCycle] = useState<'monthly' | 'yearly'>('monthly')

  useEffect(() => {
    if (!isOpen) return

    const handleEscKey = (event: KeyboardEvent) => {
      if (event.key === 'Escape') {
        onClose()
      }
    }

    document.addEventListener('keydown', handleEscKey)
    return () => {
      document.removeEventListener('keydown', handleEscKey)
    }
  }, [isOpen, onClose])

  const handleUpgrade = (planId: 'pro' | 'business') => {
    // TODO: Implement upgrade flow
    console.log(`Upgrade to ${planId} - ${billingCycle}`)
    onClose()
  }

  const formatPrice = (price: number) => {
    if (price === 0) return '0‚Ç´'
    return `${price.toLocaleString('vi-VN')}$`
  }

  const getYearlySavings = (monthlyPrice: number) => {
    if (monthlyPrice === 0) return 0
    const yearlyTotal = monthlyPrice * 12
    const yearlyPrice = yearlyTotal * 0.8
    return Math.round(yearlyTotal - yearlyPrice)
  }

  const getYearlySavingsText = (monthlyPrice: number) => {
    const savings = getYearlySavings(monthlyPrice)
    if (savings === 0) return ''
    return `Ti·∫øt ki·ªám ${savings.toLocaleString('vi-VN')}$`
  }

  if (!isOpen) return null

  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center bg-black/50" onClick={onClose}>
      <div
        className="bg-white rounded-xl shadow-2xl w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto"
        onClick={(e) => e.stopPropagation()}
      >
        {/* Modal Header */}
        <div className="sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between">
          <div>
            <h2 className="text-2xl font-bold text-gray-900">N√¢ng c·∫•p g√≥i ƒëƒÉng k√Ω</h2>
            <p className="text-sm text-gray-600 mt-1">
              M·ªü kh√≥a c√°c t√≠nh nƒÉng m·∫°nh m·∫Ω v√† m·ªü r·ªông c∆° h·ªôi h·ª£p t√°c v·ªõi ALINO.
            </p>
          </div>
          <button
            onClick={onClose}
            className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
          >
            <FaTimes className="w-5 h-5 text-gray-500" />
          </button>
        </div>

        {/* Billing Toggle */}
        <div className="px-6 py-4 border-b border-gray-200">
          <div className="flex items-center gap-4">
            <span className="text-sm font-medium text-gray-700">Thanh to√°n:</span>
            <div className="flex items-center gap-2 bg-gray-100 rounded-lg p-1">
              <button
                onClick={() => setBillingCycle('monthly')}
                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                  billingCycle === 'monthly'
                    ? 'bg-white text-gray-900 shadow-sm'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                Theo th√°ng
              </button>
              <button
                onClick={() => setBillingCycle('yearly')}
                className={`px-4 py-2 rounded-md text-sm font-medium transition-colors ${
                  billingCycle === 'yearly'
                    ? 'bg-white text-gray-900 shadow-sm'
                    : 'text-gray-600 hover:text-gray-900'
                }`}
              >
                Theo nƒÉm
                {billingCycle === 'yearly' && (
                  <span className="ml-1 text-xs text-green-600">(Ti·∫øt ki·ªám 20%)</span>
                )}
              </button>
            </div>
          </div>
        </div>

        {/* Plans Grid */}
        <div className="p-6">
          <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
            {PLANS.map((plan) => {
              const isCurrent = plan.id === currentPlan
              const price = billingCycle === 'monthly' ? plan.monthlyPrice : plan.yearlyPrice
              const savings = billingCycle === 'yearly' && plan.monthlyPrice > 0
                ? getYearlySavings(plan.monthlyPrice)
                : 0

              return (
                <div
                  key={plan.id}
                  className={`relative bg-white rounded-xl border-2 p-6 ${
                    isCurrent
                      ? 'border-[#6366F1] bg-purple-50/30'
                      : 'border-gray-200 hover:border-gray-300'
                  }`}
                >
                  {/* Current Plan Badge */}
                  {isCurrent && (
                    <div className="absolute -top-3 left-1/2 transform -translate-x-1/2">
                      <span className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-xs font-semibold px-3 py-1 rounded-full">
                        G√≥i hi·ªán t·∫°i
                      </span>
                    </div>
                  )}

                  {/* Plan Name & Price Header */}
                  <div className="flex items-start justify-between mb-4">
                    <h3 className="text-xl font-bold text-gray-900">{plan.name}</h3>
                    <div className="text-right">
                      <div className="flex items-baseline gap-1">
                        <span className="text-2xl font-bold text-gray-900">
                          {formatPrice(price)}
                        </span>
                        <span className="text-xs text-gray-600">
                          / {billingCycle === 'monthly' ? 'th√°ng' : 'nƒÉm'}
                        </span>
                      </div>
                      {billingCycle === 'yearly' && savings > 0 && (
                        <p className="text-xs text-green-600 mt-0.5">
                          {getYearlySavingsText(plan.monthlyPrice)}
                        </p>
                      )}
                    </div>
                  </div>

                  {/* Features List */}
                  <ul className="space-y-3 mb-6">
                    {plan.features.map((feature, index) => (
                      <li key={index} className="flex items-start gap-2">
                        <FaCheck className="w-4 h-4 text-green-600 flex-shrink-0 mt-0.5" />
                        <span className="text-sm text-gray-700">{feature}</span>
                      </li>
                    ))}
                  </ul>

                  {/* CTA Button */}
                  {isCurrent ? (
                    <button
                      disabled
                      className="w-full px-4 py-2.5 rounded-lg font-medium text-[#6366F1] border-2 border-[#6366F1] bg-white opacity-50 cursor-not-allowed"
                    >
                      {plan.ctaText}
                    </button>
                  ) : (
                    <button
                      onClick={() => handleUpgrade(plan.id as 'pro' | 'business')}
                      className="w-full px-4 py-2.5 rounded-lg font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 transition-opacity"
                    >
                      {plan.ctaText}
                    </button>
                  )}
                </div>
              )
            })}
          </div>
        </div>

        {/* Footer Note */}
        <div className="px-6 py-4 border-t border-gray-200 bg-gray-50">
          <p className="text-xs text-gray-600 text-center">
            T·∫•t c·∫£ g√≥i ƒë·ªÅu c√≥ th·ªÉ h·ªßy b·∫•t c·ª© l√∫c n√†o. Thanh to√°n ƒë∆∞·ª£c x·ª≠ l√Ω an to√†n.
          </p>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/hooks/useAuthOperations.ts">
import { getSupabase } from '../lib/supabase'

/**
 * useAuthOperations: Provides authentication operations (signOut, etc.)
 * 
 * Responsibilities:
 * - Encapsulates Supabase auth operations
 * - Does NOT manage state (that's handled by useAuthState)
 */
export function useAuthOperations() {
  const supabase = getSupabase()

  const signOut = async () => {
    await supabase.auth.signOut()
    // Session will be cleared by onAuthStateChange listener in useAuthState
  }

  return { signOut }
}
</file>

<file path="src/hooks/useAuthState.ts">
import { useState, useEffect } from 'react'
import type { Session } from '@supabase/supabase-js'
import { getSupabase } from '../lib/supabase'

/**
 * useAuthState: Manages authentication state and Supabase session
 * 
 * Responsibilities:
 * - Fetches initial session on mount
 * - Listens to auth state changes from Supabase
 * - Maintains session and loading state
 * - Does NOT expose signOut or other operations (handled by AuthContext)
 */
export function useAuthState() {
  const [session, setSession] = useState<Session | null>(null)
  const [loading, setLoading] = useState(true)
  const supabase = getSupabase()

  useEffect(() => {
    let mounted = true

    // Fetch initial session
    supabase.auth.getSession().then(({ data: { session } }) => {
      if (!mounted) return
      setSession(session)
      setLoading(false)
    })

    // Listen for auth state changes
    const {
      data: { subscription },
    } = supabase.auth.onAuthStateChange((event, session) => {
      if (!mounted) return
      setSession(session)
      setLoading(false)
    })

    return () => {
      mounted = false
      subscription.unsubscribe()
    }
  }, [supabase])

  return { session, loading }
}
</file>

<file path="src/lib/supabase.ts">
import { createClient } from '@supabase/supabase-js'
import type { SupabaseClient } from '@supabase/supabase-js'

const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
const supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY

if (!supabaseUrl || !supabaseAnonKey) {
  throw new Error('Missing Supabase environment variables')
}

let supabaseClient: SupabaseClient | null = null

export function getSupabase() {
  if (!supabaseClient) {
    supabaseClient = createClient(supabaseUrl, supabaseAnonKey, {
      auth: {
        persistSession: true,
        autoRefreshToken: true,
        detectSessionInUrl: true,
      },
    })
  }

  return supabaseClient
}
</file>

<file path="src/pages/brand/campaigns/CampaignDetailPage.tsx">
import { useParams, Link } from 'react-router-dom'
import { FaArrowLeft, FaEdit } from 'react-icons/fa'

/**
 * CampaignDetailPage: Campaign configuration/details view (Management Layer)
 * 
 * Route: /dashboard/brand/campaigns/:campaignId
 * Architecture: Campaigns = Management Layer (config-level only)
 * 
 * This page shows:
 * - Campaign configuration (name, goal, budget, deadline, visibility)
 * - Campaign settings and collaborators
 * - Campaign status and metadata
 * 
 * NO execution logic here (no timeline, creator progress, approvals)
 * Execution UI is in Workspace
 */

export default function CampaignDetailPage() {
  const { campaignId } = useParams<{ campaignId: string }>()

  // TODO: Fetch campaign data by campaignId
  // TODO: Show config-level details only (no execution data)

  // Mock data for structure
  const campaign = {
    id: campaignId || '1',
    name: 'Summer Influencer Outreach 2024',
    goal: 'Increase brand awareness by 20% over 3 months',
    status: 'active',
    visibility: 'open',
    budgetRange: '$1,000 - $5,000',
    deadline: '2024-08-31',
    collaborators: ['collaborator@example.com'],
    createdAt: '2024-07-15',
    updatedAt: '2024-07-20',
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-4xl mx-auto">
        {/* Back to campaigns list */}
        <Link
          to="/dashboard/brand/campaigns"
          className="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6"
        >
          <FaArrowLeft className="w-4 h-4" />
          <span>Quay l·∫°i danh s√°ch chi·∫øn d·ªãch</span>
        </Link>

        {/* Header */}
        <div className="flex items-center justify-between mb-8">
          <div>
            <h1 className="text-3xl font-bold text-gray-900 mb-2">{campaign.name}</h1>
            <p className="text-gray-600">Chi ti·∫øt c·∫•u h√¨nh chi·∫øn d·ªãch</p>
          </div>
          <div className="flex items-center gap-4">
            <span className="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
              {campaign.status === 'active' ? 'ƒêang ho·∫°t ƒë·ªông' : campaign.status}
            </span>
            <Link
              to={`/dashboard/brand/campaigns/${campaignId}/edit`}
              className="flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
            >
              <FaEdit className="w-4 h-4" />
              <span>Ch·ªânh s·ª≠a</span>
            </Link>
          </div>
        </div>

        {/* Campaign Configuration */}
        <div className="space-y-6">
          {/* Campaign Details */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">Th√¥ng tin chi·∫øn d·ªãch</h2>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  T√™n chi·∫øn d·ªãch
                </label>
                <p className="text-gray-900">{campaign.name}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  M·ª•c ti√™u chi·∫øn d·ªãch
                </label>
                <p className="text-gray-900">{campaign.goal}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Tr·∫°ng th√°i
                </label>
                <p className="text-gray-900 capitalize">{campaign.status}</p>
              </div>
            </div>
          </div>

          {/* Budget & Schedule */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">Ng√¢n s√°ch & L·ªãch tr√¨nh</h2>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Kho·∫£ng ng√¢n s√°ch
                </label>
                <p className="text-gray-900">{campaign.budgetRange}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Deadline
                </label>
                <p className="text-gray-900">{campaign.deadline}</p>
              </div>
            </div>
          </div>

          {/* Visibility & Collaborators */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">Hi·ªÉn th·ªã & C·ªông t√°c vi√™n</h2>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Hi·ªÉn th·ªã chi·∫øn d·ªãch
                </label>
                <p className="text-gray-900">
                  {campaign.visibility === 'open'
                    ? 'Open for Proposal (visible to all creators)'
                    : 'Private Campaign (invite-only)'}
                </p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  C·ªông t√°c vi√™n ƒë√£ m·ªùi
                </label>
                {campaign.collaborators.length > 0 ? (
                  <div className="flex flex-wrap gap-2">
                    {campaign.collaborators.map((email, index) => (
                      <span
                        key={index}
                        className="px-3 py-1.5 bg-gray-100 rounded-lg text-sm text-gray-700"
                      >
                        {email}
                      </span>
                    ))}
                  </div>
                ) : (
                  <p className="text-gray-500 text-sm">Ch∆∞a c√≥ c·ªông t√°c vi√™n n√†o</p>
                )}
              </div>
            </div>
          </div>

          {/* Metadata */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">Th√¥ng tin kh√°c</h2>
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Ng√†y t·∫°o
                </label>
                <p className="text-gray-900">{campaign.createdAt}</p>
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  C·∫≠p nh·∫≠t l·∫ßn cu·ªëi
                </label>
                <p className="text-gray-900">{campaign.updatedAt}</p>
              </div>
            </div>
          </div>

          {/* Action: Open in Workspace */}
          <div className="bg-blue-50 border border-blue-200 rounded-xl p-6">
            <div className="flex items-center justify-between">
              <div>
                <h3 className="font-semibold text-gray-900 mb-1">L√†m vi·ªác v·ªõi chi·∫øn d·ªãch n√†y</h3>
                <p className="text-sm text-gray-600">
                  M·ªü trong Kh√¥ng gian l√†m vi·ªác ƒë·ªÉ xem timeline, ti·∫øn ƒë·ªô creator v√† th·ª±c hi·ªán c√°c h√†nh ƒë·ªông
                </p>
              </div>
              <Link
                to={`/dashboard/brand/workspace/${campaignId}`}
                className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap"
              >
                M·ªü trong Workspace
              </Link>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/campaigns/CampaignListPage.tsx">
import { Link, useParams } from 'react-router-dom'
import { FaPlus, FaArrowRight } from 'react-icons/fa'

/**
 * CampaignListPage: Shows a subset of campaigns (active + ongoing) for a workspace
 * 
 * Architecture: This is the list/summary view.
 * - Only shows active and ongoing campaigns (subset)
 * - Acts as overview/summary
 * - Clicking a campaign navigates to detail view
 * - No heavy campaign detail logic runs here
 * 
 * Route: /workspace/:workspaceId/campaigns
 */

// TODO: Replace with actual data fetching from workspace campaigns
// TODO: Filter campaigns by status (active + ongoing only)
const MOCK_CAMPAIGNS = [
  {
    id: '1',
    name: 'Summer Collection Launch',
    status: 'active',
    progress: 75,
    thumbnail: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=300&fit=crop',
  },
  {
    id: '2',
    name: 'Tech Gadget Review',
    status: 'ongoing',
    progress: 40,
    thumbnail: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400&h=300&fit=crop',
  },
  {
    id: '3',
    name: 'Healthy Snack Promotion',
    status: 'active',
    progress: 90,
    thumbnail: 'https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=300&fit=crop',
  },
]

export default function CampaignListPage() {
  const { workspaceId } = useParams<{ workspaceId: string }>()

  // TODO: Fetch campaigns for this workspace
  // TODO: Filter to show only active + ongoing campaigns
  const activeCampaigns = MOCK_CAMPAIGNS.filter(
    (c) => c.status === 'active' || c.status === 'ongoing'
  )

  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'active':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">
            Active
          </span>
        )
      case 'ongoing':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
            Ongoing
          </span>
        )
      default:
        return null
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="flex items-center justify-between mb-8">
          <div>
            <h1 className="text-3xl font-bold text-gray-900 mb-2">Campaigns</h1>
            <p className="text-gray-600">
              Active and ongoing campaigns for this workspace
            </p>
          </div>
          <Link
            to={`/workspace/${workspaceId}/campaigns/new`}
            className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
          >
            <FaPlus className="w-4 h-4" />
            <span>Create New Campaign</span>
          </Link>
        </div>

        {activeCampaigns.length === 0 ? (
          <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
            <p className="text-gray-600 mb-4">No active campaigns yet</p>
            <Link
              to={`/workspace/${workspaceId}/campaigns/new`}
              className="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
            >
              <FaPlus className="w-4 h-4" />
              <span>Create Your First Campaign</span>
            </Link>
          </div>
        ) : (
          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {activeCampaigns.map((campaign) => (
              <Link
                key={campaign.id}
                to={`/workspace/${workspaceId}/campaigns/${campaign.id}`}
                className="border border-gray-200 rounded-lg overflow-hidden bg-white hover:shadow-lg transition-shadow"
              >
                <div className="relative h-40 bg-gray-100">
                  <img
                    src={campaign.thumbnail}
                    alt={campaign.name}
                    className="w-full h-full object-cover"
                  />
                  <div className="absolute top-2 right-2">
                    {getStatusBadge(campaign.status)}
                  </div>
                </div>
                <div className="p-4">
                  <h3 className="font-semibold text-gray-900 mb-3">{campaign.name}</h3>
                  <div className="mb-3">
                    <div className="flex items-center justify-between text-xs text-gray-600 mb-1">
                      <span>Progress</span>
                      <span>{campaign.progress}%</span>
                    </div>
                    <div className="w-full bg-gray-200 rounded-full h-2">
                      <div
                        className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] h-2 rounded-full"
                        style={{ width: `${campaign.progress}%` }}
                      />
                    </div>
                  </div>
                  <div className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                    <span>View Details</span>
                    <FaArrowRight className="w-3 h-3" />
                  </div>
                </div>
              </Link>
            ))}
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/campaigns/CampaignManagementListPage.tsx">
import { Link } from 'react-router-dom'
import { FaPlus, FaArrowRight } from 'react-icons/fa'

/**
 * CampaignManagementListPage: Campaign list for management layer
 * 
 * Route: /dashboard/brand/campaigns
 * Architecture: Campaigns = Management Layer (create, list, config-level details)
 * 
 * This page shows:
 * - All campaigns (for management/configuration)
 * - Entry point to create new campaign
 * - Links to campaign details (config-level)
 * 
 * NO execution logic here - that's in Workspace
 */

// TODO: Replace with actual data fetching
// TODO: Fetch all campaigns (not filtered by status - this is management view)
const MOCK_CAMPAIGNS = [
  {
    id: '1',
    name: 'Summer Collection Launch',
    status: 'active',
    visibility: 'open',
    budget: '$15,000',
    deadline: '2024-08-31',
    createdAt: '2024-07-15',
  },
  {
    id: '2',
    name: 'Tech Gadget Review',
    status: 'ongoing',
    visibility: 'private',
    budget: '$8,000',
    deadline: '2024-09-15',
    createdAt: '2024-07-20',
  },
  {
    id: '3',
    name: 'Healthy Snack Promotion',
    status: 'active',
    visibility: 'open',
    budget: '$12,000',
    deadline: '2024-08-28',
    createdAt: '2024-07-10',
  },
  {
    id: '4',
    name: 'Gaming Hardware Unboxing',
    status: 'completed',
    visibility: 'open',
    budget: '$10,000',
    deadline: '2024-08-10',
    createdAt: '2024-06-25',
  },
]

export default function CampaignManagementListPage() {
  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'active':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">
            Active
          </span>
        )
      case 'ongoing':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
            Ongoing
          </span>
        )
      case 'completed':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">
            Completed
          </span>
        )
      default:
        return null
    }
  }

  const getVisibilityBadge = (visibility: string) => {
    return visibility === 'open' ? (
      <span className="px-2 py-1 text-xs font-medium bg-purple-100 text-purple-800 rounded-full">
        Open
      </span>
    ) : (
      <span className="px-2 py-1 text-xs font-medium bg-orange-100 text-orange-800 rounded-full">
        Private
      </span>
    )
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="flex items-center justify-between mb-8">
          <div>
            <h1 className="text-3xl font-bold text-gray-900 mb-2">Chi·∫øn d·ªãch</h1>
            <p className="text-gray-600">
              Qu·∫£n l√Ω v√† c·∫•u h√¨nh c√°c chi·∫øn d·ªãch c·ªßa b·∫°n
            </p>
          </div>
          <Link
            to="/dashboard/brand/campaigns/new"
            className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
          >
            <FaPlus className="w-4 h-4" />
            <span>T·∫°o chi·∫øn d·ªãch m·ªõi</span>
          </Link>
        </div>

        {MOCK_CAMPAIGNS.length === 0 ? (
          <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
            <p className="text-gray-600 mb-4">Ch∆∞a c√≥ chi·∫øn d·ªãch n√†o</p>
            <Link
              to="/dashboard/brand/campaigns/new"
              className="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
            >
              <FaPlus className="w-4 h-4" />
              <span>T·∫°o chi·∫øn d·ªãch ƒë·∫ßu ti√™n</span>
            </Link>
          </div>
        ) : (
          <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
            <div className="overflow-x-auto">
              <table className="w-full">
                <thead className="bg-gray-50 border-b border-gray-200">
                  <tr>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      T√™n chi·∫øn d·ªãch
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Tr·∫°ng th√°i
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Hi·ªÉn th·ªã
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Ng√¢n s√°ch
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Deadline
                    </th>
                    <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                      Ng√†y t·∫°o
                    </th>
                    <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                      H√†nh ƒë·ªông
                    </th>
                  </tr>
                </thead>
                <tbody className="bg-white divide-y divide-gray-200">
                  {MOCK_CAMPAIGNS.map((campaign) => (
                    <tr key={campaign.id} className="hover:bg-gray-50">
                      <td className="px-6 py-4 whitespace-nowrap">
                        <div className="text-sm font-medium text-gray-900">{campaign.name}</div>
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        {getStatusBadge(campaign.status)}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap">
                        {getVisibilityBadge(campaign.visibility)}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                        {campaign.budget}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                        {campaign.deadline}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-600">
                        {campaign.createdAt}
                      </td>
                      <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                        <Link
                          to={`/dashboard/brand/campaigns/${campaign.id}`}
                          className="text-[#6366F1] hover:text-[#EC4899] transition-colors inline-flex items-center gap-1"
                        >
                          <span>Xem chi ti·∫øt</span>
                          <FaArrowRight className="w-3 h-3" />
                        </Link>
                      </td>
                    </tr>
                  ))}
                </tbody>
              </table>
            </div>
          </div>
        )}
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/profile/SettingsPage.tsx">
import { useState } from 'react'
import { Link } from 'react-router-dom'
import { useAuth } from '../../../hooks/useAuth'
import { useProfile } from '../../../hooks/useProfile'
import { getSupabase } from '../../../lib/supabase'
import Toast from '../../../components/shared/Toast'
import { FaGoogle, FaFacebook, FaInstagram, FaTiktok, FaCheckCircle, FaTimesCircle } from 'react-icons/fa'

/**
 * BrandSettingsPage: Brand settings following same structure as Creator Settings
 * 
 * Architecture: Matches Creator Settings layout pattern
 * - Shared layout structure
 * - Similar navigation pattern
 * - Brand-specific fields only
 * - Reuses common components where possible
 */

export default function SettingsPage() {
  const { session } = useAuth()
  const { profile } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const supabase = getSupabase()
  const [currentPassword, setCurrentPassword] = useState('')
  const [newPassword, setNewPassword] = useState('')
  const [confirmPassword, setConfirmPassword] = useState('')
  const [passwordError, setPasswordError] = useState('')
  const [passwordLoading, setPasswordLoading] = useState(false)
  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null)

  // Check if user is OAuth-only (no email/password)
  const userProviders = session?.user?.app_metadata?.providers || []
  const hasEmailProvider = userProviders.includes('email') || session?.user?.email
  const isOAuthOnly = !hasEmailProvider && userProviders.length > 0

  // Get account created date
  const accountCreatedDate = session?.user?.created_at 
    ? new Date(session.user.created_at).toLocaleDateString('vi-VN', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      })
    : 'N/A'

  // Mock connected accounts - replace with real data later
  const connectedAccounts = [
    { name: 'Google', provider: 'google', connected: true, icon: FaGoogle },
    { name: 'Facebook', provider: 'facebook', connected: false, icon: FaFacebook },
    { name: 'Instagram', provider: 'instagram', connected: false, icon: FaInstagram },
    { name: 'TikTok', provider: 'tiktok', connected: false, icon: FaTiktok },
  ]

  // Clear error when user starts typing
  const handleCurrentPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setCurrentPassword(e.target.value)
    if (passwordError) setPasswordError('')
  }

  const handleNewPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setNewPassword(e.target.value)
    if (passwordError) setPasswordError('')
  }

  const handleConfirmPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setConfirmPassword(e.target.value)
    if (passwordError) setPasswordError('')
  }

  const handleChangePassword = async () => {
    // Clear previous errors
    setPasswordError('')

    // Validation: All fields required
    if (!currentPassword || !newPassword || !confirmPassword) {
      setPasswordError('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin')
      return
    }

    // Validation: New password must be different from current password
    if (currentPassword === newPassword) {
      setPasswordError('M·∫≠t kh·∫©u m·ªõi ph·∫£i kh√°c v·ªõi m·∫≠t kh·∫©u hi·ªán t·∫°i')
      return
    }

    // Validation: Confirm password must match new password
    if (newPassword !== confirmPassword) {
      setPasswordError('M·∫≠t kh·∫©u m·ªõi kh√¥ng kh·ªõp')
      return
    }

    // Validation: Minimum length
    if (newPassword.length < 6) {
      setPasswordError('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±')
      return
    }

    if (!session?.user?.email) {
      setPasswordError('Kh√¥ng t√¨m th·∫•y th√¥ng tin ng∆∞·ªùi d√πng')
      return
    }

    setPasswordLoading(true)

    try {
      // Step 1: Re-authenticate with current password to verify it's correct
      const { error: signInError } = await supabase.auth.signInWithPassword({
        email: session.user.email,
        password: currentPassword,
      })

      if (signInError) {
        setPasswordError('M·∫≠t kh·∫©u hi·ªán t·∫°i kh√¥ng ƒë√∫ng')
        setPasswordLoading(false)
        return
      }

      // Step 2: Update password
      const { error: updateError } = await supabase.auth.updateUser({
        password: newPassword,
      })

      if (updateError) {
        setPasswordError(updateError.message || 'C√≥ l·ªói x·∫£y ra khi ƒë·ªïi m·∫≠t kh·∫©u')
        setPasswordLoading(false)
        return
      }

      // Success: Clear form and show toast
      setCurrentPassword('')
      setNewPassword('')
      setConfirmPassword('')
      setPasswordError('')
      setToast({ message: 'ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng', type: 'success' })
    } catch (error: any) {
      setPasswordError(error.message || 'C√≥ l·ªói x·∫£y ra khi ƒë·ªïi m·∫≠t kh·∫©u')
    } finally {
      setPasswordLoading(false)
    }
  }

  return (
    <div className="bg-gray-50 py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          
          {/* CARD 1: Account Information */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">Th√¥ng tin t√†i kho·∫£n</h2>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Email
                </label>
                <input
                  type="email"
                  value={session?.user?.email || ''}
                  disabled
                  className="w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-50 text-gray-600 cursor-not-allowed"
                />
                <p className="text-xs text-gray-500 mt-1">Email kh√¥ng th·ªÉ thay ƒë·ªïi</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Ng√†y t·∫°o t√†i kho·∫£n
                </label>
                <p className="text-gray-700">{accountCreatedDate}</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  T√†i kho·∫£n ƒë√£ k·∫øt n·ªëi
                </label>
                <div className="space-y-2">
                  {connectedAccounts.map((account) => {
                    const Icon = account.icon
                    return (
                      <div
                        key={account.provider}
                        className="flex items-center justify-between p-3 rounded-lg border border-gray-200"
                      >
                        <div className="flex items-center gap-3">
                          <Icon className="w-5 h-5 text-gray-600" />
                          <span className="text-sm font-medium text-gray-700">{account.name}</span>
                        </div>
                        <div className="flex items-center gap-2">
                          {account.connected ? (
                            <>
                              <FaCheckCircle className="w-4 h-4 text-green-600" />
                              <span className="text-sm text-green-600">ƒê√£ k·∫øt n·ªëi</span>
                            </>
                          ) : (
                            <>
                              <FaTimesCircle className="w-4 h-4 text-gray-400" />
                              <span className="text-sm text-gray-500">Ch∆∞a k·∫øt n·ªëi</span>
                            </>
                          )}
                        </div>
                      </div>
                    )
                  })}
                </div>
              </div>
            </div>
          </div>

          {/* CARD 2: Change Password */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">ƒê·ªïi m·∫≠t kh·∫©u</h2>
            
            {isOAuthOnly ? (
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <p className="text-sm text-blue-800">
                  T√†i kho·∫£n c·ªßa b·∫°n ƒë∆∞·ª£c ƒëƒÉng nh·∫≠p qua OAuth. T√≠nh nƒÉng ƒë·ªïi m·∫≠t kh·∫©u kh√¥ng kh·∫£ d·ª•ng cho t√†i kho·∫£n n√†y.
                </p>
              </div>
            ) : (
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    M·∫≠t kh·∫©u hi·ªán t·∫°i
                  </label>
                  <input
                    type="password"
                    value={currentPassword}
                    onChange={handleCurrentPasswordChange}
                    className="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    M·∫≠t kh·∫©u m·ªõi
                  </label>
                  <input
                    type="password"
                    value={newPassword}
                    onChange={handleNewPasswordChange}
                    className="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi
                  </label>
                  <input
                    type="password"
                    value={confirmPassword}
                    onChange={handleConfirmPasswordChange}
                    className="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
                  />
                </div>

                <button
                  onClick={handleChangePassword}
                  disabled={passwordLoading}
                  className="px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 disabled:opacity-50 transition-opacity"
                >
                  {passwordLoading ? 'ƒêang x·ª≠ l√Ω...' : 'ƒê·ªïi m·∫≠t kh·∫©u'}
                </button>

                {passwordError && (
                  <p className="text-sm text-red-600 mt-2">
                    {passwordError}
                  </p>
                )}
              </div>
            )}
          </div>

          {/* CARD 3: Subscription */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">G√≥i ƒëƒÉng k√Ω</h2>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  G√≥i hi·ªán t·∫°i
                </label>
                <p className="text-gray-700">Mi·ªÖn ph√≠</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Ng√†y h·∫øt h·∫°n
                </label>
                <p className="text-gray-700">Kh√¥ng gi·ªõi h·∫°n</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Tr·∫°ng th√°i
                </label>
                <span className="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                  ƒêang ho·∫°t ƒë·ªông
                </span>
              </div>

              <button
                disabled
                className="px-6 py-2.5 rounded-xl font-medium text-[#6366F1] border border-[#6366F1] opacity-50 cursor-not-allowed"
              >
                N√¢ng c·∫•p g√≥i (Coming soon)
              </button>
            </div>
          </div>

          {/* CARD 4: Security & Data Usage (READ-ONLY) */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">B·∫£o m·∫≠t & S·ª≠ d·ª•ng d·ªØ li·ªáu</h2>
            
            <div className="space-y-4 text-gray-700">
              <div>
                <p className="text-sm mb-4">
                  ALINO s·ª≠ d·ª•ng th√¥ng tin c·ªßa b·∫°n ƒë·ªÉ v·∫≠n h√†nh, duy tr√¨, c·∫£i thi·ªán v√† t·ªëi ∆∞u h√≥a n·ªÅn t·∫£ng. 
                  Ch√∫ng t√¥i thu th·∫≠p v√† x·ª≠ l√Ω d·ªØ li·ªáu c·∫ßn thi·∫øt ƒë·ªÉ cung c·∫•p d·ªãch v·ª• k·∫øt n·ªëi gi·ªØa Creator v√† Brand m·ªôt c√°ch hi·ªáu qu·∫£.
                </p>
                <p className="text-sm mb-4">
                  Th√¥ng tin c·ªßa b·∫°n ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ n√¢ng cao tr·∫£i nghi·ªám ng∆∞·ªùi d√πng, c·∫£i thi·ªán ch·∫•t l∆∞·ª£ng d·ªãch v·ª•, 
                  v√† ƒë·∫£m b·∫£o n·ªÅn t·∫£ng ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v√† an to√†n.
                </p>
              </div>

              <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p className="text-sm text-gray-700">
                  ƒê·ªÉ bi·∫øt th√™m chi ti·∫øt v·ªÅ c√°ch ch√∫ng t√¥i x·ª≠ l√Ω d·ªØ li·ªáu c·ªßa b·∫°n, vui l√≤ng xem{' '}
                  <Link to="/privacy" className="text-[#6366F1] hover:underline">
                    Ch√≠nh s√°ch b·∫£o m·∫≠t
                  </Link>
                  {' '}c·ªßa ch√∫ng t√¥i.
                </p>
              </div>
            </div>
          </div>

        </div>
      </div>

      {/* Toast Notification */}
      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  )
}
</file>

<file path="src/pages/brand/workspace/WorkspaceCampaignPage.tsx">
import { useState } from 'react'
import { useParams, Link } from 'react-router-dom'
import { FaEdit, FaCheck, FaRedo, FaFileAlt, FaDownload, FaPaperPlane, FaEllipsisV, FaArrowLeft } from 'react-icons/fa'

/**
 * WorkspaceCampaignPage: Campaign execution UI (Execution Layer)
 * 
 * Route: /dashboard/brand/workspace/:campaignId
 * Architecture: Workspace = Execution Layer (STATE B: Campaign Selected)
 * 
 * This page shows campaign EXECUTION UI:
 * - Campaign timeline
 * - Creator progress
 * - Approve / request revision actions
 * - Read-only campaign details panel
 * - Feedback thread
 * 
 * This is where daily work happens on a specific campaign
 */

interface Creator {
  id: string
  name: string
  avatar: string
  status: string
  progress: number
}

interface FeedbackMessage {
  id: string
  sender: string
  senderAvatar: string
  message: string
  timestamp: string
}

const MOCK_CREATORS: Creator[] = [
  {
    id: '1',
    name: 'Ella Creative',
    avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face',
    status: 'Final Review',
    progress: 100,
  },
  {
    id: '2',
    name: 'Mark Media',
    avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face',
    status: 'Drafting Content',
    progress: 75,
  },
  {
    id: '3',
    name: 'Sophia Social',
    avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face',
    status: 'Awaiting Feedback',
    progress: 50,
  },
  {
    id: '4',
    name: 'Liam Lens',
    avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face',
    status: 'Planning Phase',
    progress: 25,
  },
]

const MOCK_FEEDBACK: FeedbackMessage[] = [
  {
    id: '1',
    sender: 'Jane Smith',
    senderAvatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face',
    message: 'Great work on the visuals! Just a small tweak needed: could we adjust the color palette slightly to better align with our brand guidelines? Also, the call-to-action buttons could be more prominent.',
    timestamp: '2 hours ago',
  },
  {
    id: '2',
    sender: 'Ella Creative',
    senderAvatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face',
    message: 'Thanks for the feedback! I can definitely adjust the colors. For the CTA buttons, would you prefer a lighter blue variant for the primary actions?',
    timestamp: '1 hour ago',
  },
  {
    id: '3',
    sender: 'Jane Smith',
    senderAvatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face',
    message: 'Yes, the lighter blue variant would be perfect! Also, let\'s make sure the text contrast is strong enough for accessibility.',
    timestamp: '30 minutes ago',
  },
]

export default function WorkspaceCampaignPage() {
  const { campaignId } = useParams<{ campaignId: string }>()
  const [feedbackMessage, setFeedbackMessage] = useState('')
  const [feedback, setFeedback] = useState<FeedbackMessage[]>(MOCK_FEEDBACK)

  // TODO: Fetch campaign execution data by campaignId
  // TODO: Load timeline, creator progress, pending actions

  const handleSendFeedback = () => {
    if (feedbackMessage.trim()) {
      const newMessage: FeedbackMessage = {
        id: Date.now().toString(),
        sender: 'Jane Smith',
        senderAvatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face',
        message: feedbackMessage,
        timestamp: 'Just now',
      }
      setFeedback([...feedback, newMessage])
      setFeedbackMessage('')
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        {/* Back to workspace overview */}
        <Link
          to="/dashboard/brand/workspace"
          className="inline-flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-6"
        >
          <FaArrowLeft className="w-4 h-4" />
          <span>Quay l·∫°i Workspace</span>
        </Link>

        <div className="flex items-center justify-between mb-8">
          <h1 className="text-3xl font-bold text-gray-900">Summer Influencer Outreach 2024</h1>
          <div className="flex items-center gap-4">
            <span className="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium">
              Active
            </span>
            <Link
              to={`/dashboard/brand/campaigns/${campaignId}`}
              className="flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
            >
              <FaEdit className="w-4 h-4" />
              <span>Ch·ªânh s·ª≠a c·∫•u h√¨nh</span>
            </Link>
            <button className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity">
              <span>M·ªùi Creator</span>
            </button>
            <button className="p-2 text-gray-600 hover:text-gray-900">
              <FaEllipsisV className="w-5 h-5" />
            </button>
          </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6">
          <div className="lg:col-span-2 space-y-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">Campaign Timeline</h2>
              <div className="flex items-center gap-4">
                {MOCK_CREATORS.slice(0, 2).map((creator) => (
                  <div key={creator.id} className="flex flex-col items-center">
                    <div className="relative">
                      <img
                        src={creator.avatar}
                        alt={creator.name}
                        className="w-16 h-16 rounded-full object-cover"
                      />
                      {creator.progress === 100 && (
                        <div className="absolute -bottom-1 -right-1 w-6 h-6 bg-green-500 rounded-full flex items-center justify-center">
                          <FaCheck className="w-3 h-3 text-white" />
                        </div>
                      )}
                    </div>
                    <p className="text-sm font-medium text-gray-900 mt-2">{creator.name}</p>
                    <p className="text-xs text-gray-500">{creator.progress}%</p>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">Creator Progress</h2>
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                {MOCK_CREATORS.map((creator) => (
                  <div key={creator.id} className="border border-gray-200 rounded-lg p-4">
                    <div className="flex flex-col items-center text-center">
                      <img
                        src={creator.avatar}
                        alt={creator.name}
                        className="w-12 h-12 rounded-full object-cover mb-2"
                      />
                      <h3 className="font-medium text-gray-900 text-sm mb-1">{creator.name}</h3>
                      <p className="text-xs text-gray-600 mb-2">{creator.status}</p>
                      <div className="w-full bg-gray-200 rounded-full h-2 mb-2">
                        <div
                          className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] h-2 rounded-full"
                          style={{ width: `${creator.progress}%` }}
                        />
                      </div>
                      <button className="text-xs text-[#6366F1] hover:text-[#EC4899] transition-colors">
                        View Deal Details
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">Current Draft from Ella Creative</h2>
              <div className="border border-gray-200 rounded-lg overflow-hidden mb-3">
                <img
                  src="https://images.unsplash.com/photo-1505142468610-359e7d316be0?w=800&h=600&fit=crop"
                  alt="Draft preview"
                  className="w-full h-64 object-cover"
                />
              </div>
              <div className="flex items-center justify-between">
                <span className="text-sm text-gray-700">Summer_Campaign_Visuals_v3.png</span>
                <button className="flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                  <FaDownload className="w-4 h-4" />
                  <span>Download</span>
                </button>
              </div>
            </div>
          </div>

          <div className="lg:col-span-1">
            <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
              <h2 className="text-lg font-semibold text-gray-900 mb-4">Campaign Details</h2>
              <div className="space-y-3 mb-6">
                <div>
                  <span className="text-sm text-gray-600">Status:</span>
                  <p className="text-sm font-medium text-gray-900">Active</p>
                </div>
                <div>
                  <span className="text-sm text-gray-600">Brand:</span>
                  <p className="text-sm font-medium text-gray-900">ForgeCo Brands</p>
                </div>
                <div>
                  <span className="text-sm text-gray-600">Campaign ID:</span>
                  <p className="text-sm font-medium text-gray-900">CAMP-7890</p>
                </div>
                <div>
                  <span className="text-sm text-gray-600">Budget:</span>
                  <p className="text-sm font-medium text-gray-900">$15,000</p>
                </div>
                <div>
                  <span className="text-sm text-gray-600">Deadline:</span>
                  <p className="text-sm font-medium text-gray-900">2024-08-31</p>
                </div>
              </div>
              <div className="space-y-2">
                <button className="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity">
                  <FaCheck className="w-4 h-4" />
                  <span>Approve Final Deliverables</span>
                </button>
                <button className="w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors">
                  <FaRedo className="w-4 h-4" />
                  <span>Request Revisions</span>
                </button>
                <button className="w-full flex items-center justify-center gap-2 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                  <FaFileAlt className="w-4 h-4" />
                  <span>View Campaign Brief</span>
                </button>
              </div>
            </div>
          </div>
        </div>

        <div className="bg-white rounded-xl border border-gray-200 p-6">
          <h2 className="text-lg font-semibold text-gray-900 mb-4">Feedback Thread</h2>
          <div className="space-y-4 mb-6 max-h-96 overflow-y-auto">
            {feedback.map((message) => (
              <div key={message.id} className="flex gap-3">
                <img
                  src={message.senderAvatar}
                  alt={message.sender}
                  className="w-10 h-10 rounded-full object-cover flex-shrink-0"
                />
                <div className="flex-1">
                  <div className="flex items-center gap-2 mb-1">
                    <span className="font-medium text-gray-900 text-sm">{message.sender}</span>
                    <span className="text-xs text-gray-500">{message.timestamp}</span>
                  </div>
                  <p className="text-sm text-gray-700">{message.message}</p>
                </div>
              </div>
            ))}
          </div>
          <div className="flex gap-2">
            <input
              type="text"
              value={feedbackMessage}
              onChange={(e) => setFeedbackMessage(e.target.value)}
              onKeyPress={(e) => {
                if (e.key === 'Enter') {
                  handleSendFeedback()
                }
              }}
              placeholder="Write your feedback..."
              className="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
            />
            <button
              onClick={handleSendFeedback}
              className="px-4 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
            >
              <FaPaperPlane className="w-5 h-5" />
            </button>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/workspace/WorkspacePage.tsx">
import { Link } from 'react-router-dom'
import { FaArrowRight, FaUser, FaClock, FaBullhorn } from 'react-icons/fa'

/**
 * WorkspacePage: Workspace overview (STATE A - DEFAULT)
 * 
 * Route: /dashboard/brand/workspace
 * Architecture: Workspace = Execution Layer (daily working area)
 * 
 * This page MUST NOT auto-open any campaign.
 * It shows:
 * - Active campaigns summary (multiple campaigns)
 * - Pending work items (approvals, feedback)
 * - Creators currently working
 * 
 * This is a dashboard / overview page.
 * To work on a specific campaign, user clicks a campaign ‚Üí /workspace/:campaignId
 */

// TODO: Replace with actual data fetching
// TODO: Fetch active campaigns summary
// TODO: Fetch pending work items
// TODO: Fetch active creators
const MOCK_ACTIVE_CAMPAIGNS = [
  {
    id: '1',
    name: 'Summer Collection Launch',
    status: 'active',
    progress: 75,
    creators: 4,
    pendingActions: 2,
    thumbnail: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=300&fit=crop',
  },
  {
    id: '2',
    name: 'Tech Gadget Review',
    status: 'ongoing',
    progress: 40,
    creators: 3,
    pendingActions: 1,
    thumbnail: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400&h=300&fit=crop',
  },
  {
    id: '3',
    name: 'Healthy Snack Promotion',
    status: 'active',
    progress: 90,
    creators: 5,
    pendingActions: 3,
    thumbnail: 'https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=300&fit=crop',
  },
]

const MOCK_TOP_CREATORS = [
  {
    id: '1',
    name: 'Emily Studios',
    avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face',
    role: 'Lifestyle Vlogger',
    activeCampaigns: 3,
  },
  {
    id: '2',
    name: 'Mark Digital',
    avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face',
    role: 'Tech Reviewer',
    activeCampaigns: 2,
  },
  {
    id: '3',
    name: 'Chef Chloe',
    avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face',
    role: 'Food Blogger',
    activeCampaigns: 2,
  },
]

const MOCK_PENDING_ACTIONS = [
  {
    id: '1',
    type: 'approval',
    description: 'Proposal from Emily Studios for Summer Collection',
    campaign: 'Summer Collection Launch',
    campaignId: '1',
    timestamp: '2 hours ago',
  },
  {
    id: '2',
    type: 'review',
    description: 'Draft submission for Tech Gadget Review',
    campaign: 'Tech Gadget Review',
    campaignId: '2',
    timestamp: 'Yesterday',
  },
  {
    id: '3',
    type: 'deliverable',
    description: 'Final deliverable pending for Healthy Snack Promotion',
    campaign: 'Healthy Snack Promotion',
    campaignId: '3',
    timestamp: '3 days ago',
  },
]

export default function WorkspacePage() {

  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'active':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">
            Active
          </span>
        )
      case 'ongoing':
        return (
          <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">
            Ongoing
          </span>
        )
      default:
        return null
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        
        {/* Stats Cards */}
        <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <div className="flex items-center justify-between mb-2">
              <div className="w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center">
                <FaBullhorn className="w-5 h-5 text-purple-600" />
              </div>
            </div>
            <div className="text-3xl font-bold text-gray-900 mb-1">{MOCK_ACTIVE_CAMPAIGNS.length}</div>
            <div className="text-sm text-gray-600">Chi·∫øn d·ªãch ƒëang ho·∫°t ƒë·ªông</div>
          </div>

          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <div className="flex items-center justify-between mb-2">
              <div className="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center">
                <FaUser className="w-5 h-5 text-blue-600" />
              </div>
            </div>
            <div className="text-3xl font-bold text-gray-900 mb-1">{MOCK_TOP_CREATORS.length}</div>
            <div className="text-sm text-gray-600">Creator ƒëang c·ªông t√°c</div>
          </div>

          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <div className="flex items-center justify-between mb-2">
              <div className="w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center">
                <FaClock className="w-5 h-5 text-yellow-600" />
              </div>
            </div>
            <div className="text-3xl font-bold text-gray-900 mb-1">{MOCK_PENDING_ACTIONS.length}</div>
            <div className="text-sm text-gray-600">H√†nh ƒë·ªông c·∫ßn x·ª≠ l√Ω</div>
          </div>
        </div>

        {/* Main Content Grid */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
          {/* Active Campaigns Overview */}
          <div className="lg:col-span-2">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-semibold text-gray-900">Chi·∫øn d·ªãch ƒëang ho·∫°t ƒë·ªông</h2>
              </div>

              {MOCK_ACTIVE_CAMPAIGNS.length === 0 ? (
                <div className="text-center py-12">
                  <p className="text-gray-600 mb-4">Ch∆∞a c√≥ chi·∫øn d·ªãch n√†o ƒëang ho·∫°t ƒë·ªông</p>
                  <Link
                    to="/dashboard/brand/campaigns/new"
                    className="inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
                  >
                    <span>T·∫°o chi·∫øn d·ªãch m·ªõi</span>
                  </Link>
                </div>
              ) : (
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {MOCK_ACTIVE_CAMPAIGNS.map((campaign) => (
                    <Link
                      key={campaign.id}
                      to={`/dashboard/brand/workspace/${campaign.id}`}
                      className="border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow"
                    >
                      <div className="relative h-40 bg-gray-100">
                        <img
                          src={campaign.thumbnail}
                          alt={campaign.name}
                          className="w-full h-full object-cover"
                        />
                        <div className="absolute top-2 right-2">
                          {getStatusBadge(campaign.status)}
                        </div>
                      </div>
                      <div className="p-4">
                        <h3 className="font-semibold text-gray-900 mb-2">{campaign.name}</h3>
                        <div className="mb-3">
                          <div className="flex items-center justify-between text-xs text-gray-600 mb-1">
                            <span>Ti·∫øn ƒë·ªô</span>
                            <span>{campaign.progress}%</span>
                          </div>
                          <div className="w-full bg-gray-200 rounded-full h-2">
                            <div
                              className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] h-2 rounded-full"
                              style={{ width: `${campaign.progress}%` }}
                            />
                          </div>
                        </div>
                        <div className="flex items-center justify-between text-xs text-gray-600 mb-3">
                          <span>{campaign.creators} creators</span>
                          <span className="text-yellow-600">{campaign.pendingActions} c·∫ßn x·ª≠ l√Ω</span>
                        </div>
                        <div className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                          <span>M·ªü ƒë·ªÉ l√†m vi·ªác</span>
                          <FaArrowRight className="w-3 h-3" />
                        </div>
                      </div>
                    </Link>
                  ))}
                </div>
              )}
            </div>
          </div>

          {/* Sidebar: Creators & Pending Actions */}
          <div className="lg:col-span-1 space-y-6">
            {/* Top Creators */}
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-semibold text-gray-900">Creator ƒëang c·ªông t√°c</h2>
              </div>
              <div className="space-y-4">
                {MOCK_TOP_CREATORS.map((creator) => (
                  <div key={creator.id} className="flex items-center gap-3">
                    <img
                      src={creator.avatar}
                      alt={creator.name}
                      className="w-10 h-10 rounded-full object-cover"
                    />
                    <div className="flex-1">
                      <h3 className="font-medium text-gray-900 text-sm">{creator.name}</h3>
                      <p className="text-xs text-gray-600">{creator.role}</p>
                      <p className="text-xs text-gray-500 mt-1">{creator.activeCampaigns} chi·∫øn d·ªãch</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            {/* Pending Actions */}
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-semibold text-gray-900">C·∫ßn x·ª≠ l√Ω</h2>
              </div>
              <div className="space-y-4">
                {MOCK_PENDING_ACTIONS.map((action) => (
                  <Link
                    key={action.id}
                    to={`/dashboard/brand/workspace/${action.campaignId}`}
                    className="block border-b border-gray-200 pb-4 last:border-b-0 last:pb-0 hover:bg-gray-50 -mx-2 px-2 py-2 rounded transition-colors"
                  >
                    <p className="text-sm text-gray-900 mb-1">{action.description}</p>
                    <p className="text-xs text-gray-500">{action.campaign}</p>
                    <p className="text-xs text-gray-400 mt-1">{action.timestamp}</p>
                  </Link>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/workspace/WorkspaceRoutes.tsx">
import { Routes, Route } from 'react-router-dom'
import CampaignListPage from '../campaigns/CampaignListPage'
import CreateCampaignPage from '../campaigns/CreateCampaignPage'

/**
 * WorkspaceRoutes: Handles nested workspace routes
 * 
 * Architecture: Legacy workspace/:workspaceId routes
 * Routes:
 * - /workspace/:workspaceId/campaigns - List view
 * - /workspace/:workspaceId/campaigns/new - Create new campaign
 * 
 * Note: Campaign execution UI is at /workspace/:campaignId (handled in routeConfig)
 * 
 * TODO: Add workspace verification/permission checks
 */

export default function WorkspaceRoutes() {
  return (
    <Routes>
      {/* Campaign list view for workspace */}
      <Route path="campaigns" element={<CampaignListPage />} />
      
      {/* Create new campaign */}
      <Route path="campaigns/new" element={<CreateCampaignPage />} />
    </Routes>
  )
}
</file>

<file path="src/pages/creator/dashboard/NotificationsPage.tsx">
import { useState } from 'react'
import { FaCheck, FaCheckCircle } from 'react-icons/fa'

// Mock notification data - replace with real API data later
interface Notification {
  id: string
  type: 'proposal' | 'booking' | 'approval' | 'comment' | 'campaign' | 'profile' | 'collaboration'
  avatar: string
  content: string
  time: string
  timeAgo: string
  read: boolean
  ctaLabel: string
  ctaAction?: () => void
  section: 'new' | 'thisWeek' | 'earlier'
}

const MOCK_NOTIFICATIONS: Notification[] = [
  {
    id: '1',
    type: 'proposal',
    avatar: 'https://ui-avatars.com/api/?name=Brand+X&background=6366F1&color=fff',
    content: 'Brand X ƒë√£ g·ª≠i cho b·∫°n m·ªôt ƒë·ªÅ xu·∫•t m·ªõi cho ƒë·ªÅ xu·∫•t Winter Car c·ªßa h·ªç',
    time: '2025-01-20T10:00:00Z',
    timeAgo: '5 ph√∫t tr∆∞·ªõc',
    read: false,
    ctaLabel: 'Xem ƒë·ªÅ xu·∫•t',
    section: 'new'
  },
  {
    id: '2',
    type: 'booking',
    avatar: 'https://ui-avatars.com/api/?name=Sarah+Chen&background=EC4899&color=fff',
    content: 'Sarah Chen ƒë√£ ch·∫•p nh·∫≠n y√™u c·∫ßu ƒë·∫∑t l·ªãch c·ªßa b·∫°n cho bu·ªïi ch·ª•p ·∫£nh',
    time: '2025-01-20T09:00:00Z',
    timeAgo: '1 gi·ªù tr∆∞·ªõc',
    read: false,
    ctaLabel: 'Qu·∫£n l√Ω l·ªãch',
    section: 'new'
  },
  {
    id: '3',
    type: 'profile',
    avatar: 'https://ui-avatars.com/api/?name=Profile&background=8B5CF6&color=fff',
    content: 'H·ªì s∆° c·ªßa b·∫°n ƒë√£ ƒë·∫°t 1000 l∆∞·ª£t xem trong tu·∫ßn n√†y! H√£y ti·∫øp t·ª•c ph√°t huy.',
    time: '2025-01-20T07:00:00Z',
    timeAgo: '3 gi·ªù tr∆∞·ªõc',
    read: false,
    ctaLabel: '',
    section: 'new'
  },
  {
    id: '4',
    type: 'approval',
    avatar: 'https://ui-avatars.com/api/?name=Alpha+Corp&background=6366F1&color=fff',
    content: 'Alpha Corp c·∫ßn b·∫°n ph√™ duy·ªát b·∫£n nh√°p m·ªõi nh·∫•t cho "Project Zenith"',
    time: '2025-01-19T15:00:00Z',
    timeAgo: 'H√¥m qua',
    read: true,
    ctaLabel: 'Ph√™ duy·ªát b·∫£n nh√°p',
    section: 'thisWeek'
  },
  {
    id: '5',
    type: 'comment',
    avatar: 'https://ui-avatars.com/api/?name=Emily+White&background=EC4899&color=fff',
    content: 'Emily White ƒë√£ b√¨nh lu·∫≠n v·ªÅ b·∫£n nh√°p b·∫°n v·ª´a t·∫£i l√™n',
    time: '2025-01-19T10:00:00Z',
    timeAgo: 'H√¥m qua',
    read: true,
    ctaLabel: 'Xem b√¨nh lu·∫≠n',
    section: 'thisWeek'
  },
  {
    id: '6',
    type: 'campaign',
    avatar: 'https://ui-avatars.com/api/?name=Global+Brands&background=6366F1&color=fff',
    content: 'Global Brands Inc. ƒë√£ ƒëƒÉng c∆° h·ªôi chi·∫øn d·ªãch m·ªõi: "Summer Collec Campaign"',
    time: '2025-01-18T14:00:00Z',
    timeAgo: '2 ng√†y tr∆∞·ªõc',
    read: true,
    ctaLabel: 'Xem chi·∫øn d·ªãch',
    section: 'thisWeek'
  },
  {
    id: '7',
    type: 'approval',
    avatar: 'https://ui-avatars.com/api/?name=Creative+Studio&background=8B5CF6&color=fff',
    content: 'Creative Studio ƒë√£ ph√™ duy·ªát s·∫£n ph·∫©m c·ªßa b·∫°n cho "Animated Explainer Project"',
    time: '2025-01-17T11:00:00Z',
    timeAgo: '3 ng√†y tr∆∞·ªõc',
    read: true,
    ctaLabel: 'Xem th·ªèa thu·∫≠n',
    section: 'thisWeek'
  },
  {
    id: '8',
    type: 'collaboration',
    avatar: 'https://ui-avatars.com/api/?name=Jessica+Lee&background=EC4899&color=fff',
    content: 'Jessica Lee ƒë√£ m·ªùi b·∫°n c·ªông t√°c trong "Brand Launch Event"',
    time: '2025-01-13T09:00:00Z',
    timeAgo: '1 tu·∫ßn tr∆∞·ªõc',
    read: true,
    ctaLabel: 'Ch·∫•p nh·∫≠n l·ªùi m·ªùi',
    section: 'earlier'
  },
]

const FILTER_TABS = [
  { id: 'all', label: 'T·∫•t c·∫£' },
  { id: 'unread', label: 'Ch∆∞a ƒë·ªçc' },
  { id: 'proposals', label: 'ƒê·ªÅ xu·∫•t' },
  { id: 'bookings', label: 'ƒê·∫∑t l·ªãch' },
  { id: 'drafts', label: 'B·∫£n nh√°p' },
  { id: 'approvals', label: 'Ph√™ duy·ªát' },
] as const

type FilterTab = typeof FILTER_TABS[number]['id']

export default function NotificationsPage() {
  const [activeFilter, setActiveFilter] = useState<FilterTab>('all')
  const [notifications, setNotifications] = useState<Notification[]>(MOCK_NOTIFICATIONS)

  const unreadCount = notifications.filter(n => !n.read).length

  const filteredNotifications = notifications.filter((notification) => {
    if (activeFilter === 'all') return true
    if (activeFilter === 'unread') return !notification.read
    if (activeFilter === 'proposals') return notification.type === 'proposal'
    if (activeFilter === 'bookings') return notification.type === 'booking'
    if (activeFilter === 'drafts') return notification.type === 'comment'
    if (activeFilter === 'approvals') return notification.type === 'approval'
    return true
  })

  const markAllAsRead = () => {
    setNotifications(prev => prev.map(n => ({ ...n, read: true })))
  }

  const markAsRead = (id: string) => {
    setNotifications(prev => prev.map(n => n.id === id ? { ...n, read: true } : n))
  }

  const newNotifications = filteredNotifications.filter(n => n.section === 'new')
  const thisWeekNotifications = filteredNotifications.filter(n => n.section === 'thisWeek')
  const earlierNotifications = filteredNotifications.filter(n => n.section === 'earlier')

  return (
    <div className="min-h-screen bg-white">
      <div className="max-w-6xl mx-auto p-8">
        {/* Header */}
        <div className="mb-6">
          <h1 className="text-3xl font-bold text-gray-900 mb-6">Th√¥ng b√°o</h1>

          {/* Filter Tabs */}
          <div className="flex items-center gap-2 mb-4 flex-wrap">
            {FILTER_TABS.map((tab) => (
              <button
                key={tab.id}
                onClick={() => setActiveFilter(tab.id)}
                className={`
                  px-4 py-2 rounded-full text-sm font-medium transition-colors relative
                  ${activeFilter === tab.id
                    ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white'
                    : 'bg-white text-gray-700 border border-gray-200 hover:bg-gray-50'
                  }
                `}
              >
                {tab.label}
                {tab.id === 'unread' && unreadCount > 0 && (
                  <span className="ml-2 w-5 h-5 bg-white text-[#6366F1] rounded-full flex items-center justify-center text-xs font-bold">
                    {unreadCount}
                  </span>
                )}
              </button>
            ))}

            {/* Mark all as read button */}
            <button
              onClick={markAllAsRead}
              className="ml-auto flex items-center gap-2 px-4 py-2 text-sm text-gray-700 hover:text-[#6366F1] transition-colors"
            >
              <FaCheckCircle className="w-4 h-4" />
              <span>ƒê√°nh d·∫•u t·∫•t c·∫£ l√† ƒë√£ ƒë·ªçc</span>
            </button>
          </div>
        </div>

        {/* Notifications List */}
        <div className="space-y-8">
          {/* New Section */}
          {newNotifications.length > 0 && (
            <div>
              <h2 className="text-sm font-semibold text-gray-500 mb-4 uppercase tracking-wide">M·ªõi</h2>
              <div className="space-y-3">
                {newNotifications.map((notification) => (
                  <NotificationCard
                    key={notification.id}
                    notification={notification}
                    onMarkAsRead={() => markAsRead(notification.id)}
                  />
                ))}
              </div>
            </div>
          )}

          {/* This Week Section */}
          {thisWeekNotifications.length > 0 && (
            <div>
              <h2 className="text-sm font-semibold text-gray-500 mb-4 uppercase tracking-wide">Tu·∫ßn n√†y</h2>
              <div className="space-y-3">
                {thisWeekNotifications.map((notification) => (
                  <NotificationCard
                    key={notification.id}
                    notification={notification}
                    onMarkAsRead={() => markAsRead(notification.id)}
                  />
                ))}
              </div>
            </div>
          )}

          {/* Earlier Section */}
          {earlierNotifications.length > 0 && (
            <div>
              <h2 className="text-sm font-semibold text-gray-500 mb-4 uppercase tracking-wide">Tr∆∞·ªõc ƒë√≥</h2>
              <div className="space-y-3">
                {earlierNotifications.map((notification) => (
                  <NotificationCard
                    key={notification.id}
                    notification={notification}
                    onMarkAsRead={() => markAsRead(notification.id)}
                  />
                ))}
              </div>
            </div>
          )}

          {/* Empty State */}
          {filteredNotifications.length === 0 && (
            <div className="text-center py-12">
              <p className="text-gray-500">Kh√¥ng c√≥ th√¥ng b√°o n√†o</p>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

interface NotificationCardProps {
  notification: Notification
  onMarkAsRead: () => void
}

function NotificationCard({ notification, onMarkAsRead }: NotificationCardProps) {
  return (
    <div
      className={`
        flex items-start gap-4 p-4 rounded-xl border transition-colors
        ${notification.read 
          ? 'bg-white border-gray-200' 
          : 'bg-blue-50 border-blue-200'
        }
        hover:shadow-md
      `}
    >
      {/* Avatar */}
      <img
        src={notification.avatar}
        alt=""
        className="w-12 h-12 rounded-full flex-shrink-0"
      />

      {/* Content */}
      <div className="flex-1 min-w-0">
        <p className={`text-sm ${notification.read ? 'text-gray-700' : 'text-gray-900 font-medium'}`}>
          {notification.content}
        </p>
        <p className="text-xs text-gray-500 mt-1">{notification.timeAgo}</p>
      </div>

      {/* Actions */}
      <div className="flex items-start gap-3 flex-shrink-0">
        {notification.ctaLabel && (
          <button
            onClick={onMarkAsRead}
            className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap"
          >
            {notification.ctaLabel}
          </button>
        )}
        <button
          onClick={onMarkAsRead}
          className={`
            p-2 rounded-lg transition-colors
            ${notification.read 
              ? 'text-gray-400 hover:bg-gray-100' 
              : 'text-[#6366F1] hover:bg-blue-100'
            }
          `}
          title={notification.read ? 'ƒê√£ ƒë·ªçc' : 'ƒê√°nh d·∫•u l√† ƒë√£ ƒë·ªçc'}
        >
          <FaCheck className="w-4 h-4" />
        </button>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/creator/profile/components/ProfileSummaryCard.tsx">
import { ReactNode } from 'react'
import { FaClock, FaUsers, FaStar, FaLink, FaInstagram, FaYoutube } from 'react-icons/fa'
import AvatarUpload from '../../../../components/AvatarUpload/AvatarUpload'
import type { CreatorProfileFormData } from '../hooks/useCreatorProfileForm'
import type { CreatorProfileDisplayData } from '../hooks/useCreatorProfileForm'

interface ProfileSummaryCardProps {
  formData: CreatorProfileFormData
  displayData: CreatorProfileDisplayData
  loading: boolean
  userId: string
  onFormFieldChange: <K extends keyof CreatorProfileFormData>(
    field: K,
    value: CreatorProfileFormData[K]
  ) => void
  onAvatarChange: (url: string) => void
  onSave: () => void
}

export function ProfileSummaryCard({
  formData,
  displayData,
  loading,
  userId,
  onFormFieldChange,
  onAvatarChange,
  onSave,
}: ProfileSummaryCardProps) {
  return (
    <div className="lg:col-span-1">
      <div className="bg-white rounded-xl border border-gray-200 p-5 sticky top-24">
        {/* Profile Header */}
        <div className="text-center mb-5">
          <div className="mb-4">
            <AvatarUpload
              currentAvatarUrl={formData.avatar_url}
              onAvatarChange={onAvatarChange}
              userId={userId}
            />
          </div>

          <input
            type="text"
            value={formData.display_name}
            onChange={(e) => onFormFieldChange('display_name', e.target.value)}
            placeholder="T√™n hi·ªÉn th·ªã"
            className="text-lg font-semibold text-gray-900 text-center border-0 border-b-2 border-transparent hover:border-gray-300 focus:border-[#6366F1] focus:outline-none bg-transparent mb-1 w-full"
          />

          <p className="text-xs text-gray-500 mb-3">Creator Profile</p>

          <div className="mb-4">
            <select
              value={formData.response_time}
              onChange={(e) => onFormFieldChange('response_time', e.target.value)}
              className="text-xs px-2 py-1 rounded-full bg-green-100 text-green-800 border-0 focus:ring-2 focus:ring-green-500"
            >
              <option value="24 hours">Available</option>
              <option value="48 hours">Busy</option>
              <option value="1 week">Away</option>
            </select>
          </div>
        </div>

        {/* Response Time */}
        <div className="flex items-center gap-2 text-xs text-gray-600 mb-5 pb-5 border-b border-gray-200">
          <FaClock className="w-3.5 h-3.5" />
          <span>Typically responds within</span>
          <input
            type="text"
            value={formData.response_time}
            onChange={(e) => onFormFieldChange('response_time', e.target.value)}
            className="flex-1 px-2 py-1 text-xs border border-gray-300 rounded focus:ring-1 focus:ring-[#6366F1] focus:border-transparent"
            placeholder="24 hours"
          />
        </div>

        {/* About Me */}
        <div className="mb-5 pb-5 border-b border-gray-200">
          <label className="block text-sm font-medium text-gray-900 mb-2">About Me</label>
          <textarea
            value={formData.bio}
            onChange={(e) => onFormFieldChange('bio', e.target.value)}
            placeholder="Tell brands about yourself, your experience, and what makes you unique..."
            className="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
            rows={4}
          />
        </div>

        {/* Linked Platforms */}
        <div className="mb-5 pb-5 border-b border-gray-200">
          <label className="block text-sm font-medium text-gray-900 mb-3">Linked Platforms</label>
          <div className="space-y-2">
            <PlatformInput
              icon={<FaLink className="w-4 h-4 text-gray-400 flex-shrink-0" />}
              value={formData.portfolio_website}
              onChange={(value) => onFormFieldChange('portfolio_website', value)}
              placeholder="Portfolio Website"
            />
            <PlatformInput
              icon={<FaInstagram className="w-4 h-4 text-gray-400 flex-shrink-0" />}
              value={formData.instagram_url}
              onChange={(value) => onFormFieldChange('instagram_url', value)}
              placeholder="Instagram"
            />
            <PlatformInput
              icon={<FaYoutube className="w-4 h-4 text-gray-400 flex-shrink-0" />}
              value={formData.youtube_url}
              onChange={(value) => onFormFieldChange('youtube_url', value)}
              placeholder="YouTube"
            />
          </div>
        </div>

        {/* Social Proof */}
        <div className="mb-5">
          <label className="block text-sm font-medium text-gray-900 mb-3">Social Proof</label>
          <div className="space-y-2 text-sm">
            <div className="flex items-center gap-2 text-gray-700">
              <FaUsers className="w-4 h-4 text-gray-400" />
              <span>Followers: {displayData.followers_count.toLocaleString()}</span>
            </div>
            <div className="flex items-center gap-2 text-gray-700">
              <FaStar className="w-4 h-4 text-gray-400" />
              <span>Recommendations: {displayData.recommendations}</span>
            </div>
            <p className="text-xs text-gray-500 mt-2">These metrics are updated automatically</p>
          </div>
        </div>

        {/* Save Button */}
        <button
          onClick={onSave}
          disabled={loading}
          className="w-full px-4 py-2.5 rounded-lg font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 disabled:opacity-50 transition-opacity text-sm"
        >
          {loading ? 'ƒêang l∆∞u...' : 'L∆∞u thay ƒë·ªïi'}
        </button>
      </div>
    </div>
  )
}

function PlatformInput({
  icon,
  value,
  onChange,
  placeholder,
}: {
  icon: ReactNode
  value: string
  onChange: (value: string) => void
  placeholder: string
}) {
  return (
    <div className="flex items-center gap-2">
      {icon}
      <input
        type="url"
        value={value}
        onChange={(e) => onChange(e.target.value)}
        placeholder={placeholder}
        className="flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
      />
    </div>
  )
}
</file>

<file path="src/pages/creator/profile/components/TabbedContent.tsx">
type TabType = 'overview' | 'services' | 'portfolio' | 'reviews'

interface TabbedContentProps {
  activeTab: TabType
  onTabChange: (tab: TabType) => void
  displayName: string
}

const TABS: { value: TabType; label: string }[] = [
  { value: 'overview', label: 'Overview' },
  { value: 'services', label: 'Services & Pricing' },
  { value: 'portfolio', label: 'Portfolio' },
  { value: 'reviews', label: 'Reviews' },
]

export function TabbedContent({ activeTab, onTabChange, displayName }: TabbedContentProps) {
  return (
    <div className="lg:col-span-2">
      <div className="bg-white rounded-xl border border-gray-200 p-6">
        {/* Navigation Tabs */}
        <div className="border-b border-gray-200 mb-6">
          <nav className="flex space-x-6">
            {TABS.map((tab) => (
              <button
                key={tab.value}
                onClick={() => onTabChange(tab.value)}
                className={`pb-4 px-1 border-b-2 font-medium text-sm transition-colors ${
                  activeTab === tab.value
                    ? 'border-[#6366F1] text-[#6366F1]'
                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                }`}
              >
                {tab.label}
              </button>
            ))}
          </nav>
        </div>

        {/* Tab Content */}
        <div className="min-h-[400px]">
          {activeTab === 'overview' && <OverviewTab displayName={displayName} />}
          {activeTab === 'services' && <ServicesTab />}
          {activeTab === 'portfolio' && <PortfolioTab />}
          {activeTab === 'reviews' && <ReviewsTab />}
        </div>
      </div>
    </div>
  )
}

function OverviewTab({ displayName }: { displayName: string }) {
  return (
    <div>
      <h3 className="text-lg font-semibold text-gray-900 mb-3">Profile Overview</h3>
      <p className="text-gray-600 text-sm leading-relaxed">
        This is your public profile that brands will see. Use the summary card on the left to edit your basic
        information, and explore the tabs above to manage your services, portfolio, and reviews.
      </p>
    </div>
  )
}

function ServicesTab() {
  return (
    <div>
      <div className="flex items-center justify-between mb-4">
        <div>
          <h3 className="text-lg font-semibold text-gray-900 mb-1">Services & Pricing</h3>
          <p className="text-sm text-gray-600">Set up service packages and pricing tiers</p>
        </div>
        <button className="px-3 py-1.5 text-sm font-medium text-[#6366F1] border border-[#6366F1] rounded-lg hover:bg-[#6366F1]/10 transition-colors">
          Manage Services
        </button>
      </div>
      <div className="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
        <div className="border border-gray-200 rounded-lg p-4 text-center">
          <p className="text-sm text-gray-500">Service packages will be displayed here</p>
          <p className="text-xs text-gray-400 mt-2">Coming soon</p>
        </div>
      </div>
    </div>
  )
}

function PortfolioTab() {
  return (
    <div>
      <h3 className="text-lg font-semibold text-gray-900 mb-3">Portfolio</h3>
      <p className="text-gray-600 text-sm">Showcase your best work here. Portfolio items will be displayed here.</p>
    </div>
  )
}

function ReviewsTab() {
  return (
    <div>
      <h3 className="text-lg font-semibold text-gray-900 mb-3">Reviews</h3>
      <p className="text-gray-600 text-sm">
        Reviews and testimonials from brands you've worked with will appear here.
      </p>
    </div>
  )
}
</file>

<file path="src/pages/creator/profile/hooks/useCreatorProfileForm.ts">
import { useState, useEffect } from 'react'
import type { Profile } from '../../../../types/profile'

/**
 * Form data type for creator profile
 */
export interface CreatorProfileFormData {
  display_name: string
  avatar_url: string
  bio: string
  portfolio_website: string
  instagram_url: string
  youtube_url: string
  response_time: string
}

/**
 * Display data type (read-only from profile)
 */
export interface CreatorProfileDisplayData {
  followers_count: number
  recommendations: number
}

/**
 * useCreatorProfileForm: Manages form state and initialization
 * 
 * Responsibilities:
 * - Initializes form data from profile
 * - Manages form state
 * - Separates editable form data from read-only display data
 */
export function useCreatorProfileForm(profile: Profile | null | undefined) {
  const [formData, setFormData] = useState<CreatorProfileFormData>({
    display_name: '',
    avatar_url: '',
    bio: '',
    portfolio_website: '',
    instagram_url: '',
    youtube_url: '',
    response_time: '24 hours',
  })

  const [displayData, setDisplayData] = useState<CreatorProfileDisplayData>({
    followers_count: 0,
    recommendations: 0,
  })

  useEffect(() => {
    if (profile && profile.role === 'creator') {
      const creatorProfile = profile as any
  
      const rawAvatarUrl = creatorProfile.avatar_url
      const safeAvatarUrl =
        typeof rawAvatarUrl === 'string' && !rawAvatarUrl.startsWith('/src/')
          ? rawAvatarUrl
          : ''
  
      setFormData({
        display_name: creatorProfile.full_name || '',
        avatar_url: safeAvatarUrl,
        bio: creatorProfile.bio || '',
        portfolio_website: creatorProfile.portfolio_website || '',
        instagram_url: creatorProfile.instagram_url || '',
        youtube_url: creatorProfile.youtube_url || '',
        response_time: creatorProfile.response_time || '24 hours',
      })
  
      setDisplayData({
        followers_count: creatorProfile.followers_count || 0,
        recommendations: creatorProfile.recommendations || 0,
      })
    }
  }, [profile])  

  const updateFormField = <K extends keyof CreatorProfileFormData>(
    field: K,
    value: CreatorProfileFormData[K]
  ) => {
    setFormData((prev) => ({ ...prev, [field]: value }))
  }

  return {
    formData,
    displayData,
    updateFormField,
    setFormData,
  }
}
</file>

<file path="src/pages/creator/profile/hooks/useCreatorProfileOperations.ts">
import { useState } from 'react'
import { getSupabase } from '../../../../lib/supabase'
import type { Session } from '@supabase/supabase-js'
import type { Profile } from '../../../../types/profile'
import type { CreatorProfileFormData } from './useCreatorProfileForm'
import type { ToastState } from '../../../../types/toast'

/**
 * useCreatorProfileOperations: Handles profile save operations
 * 
 * Responsibilities:
 * - Manages save operations (profile and avatar)
 * - Handles loading and error states
 * - Provides toast notifications
 */
export function useCreatorProfileOperations(
  session: Session | null,
  profile: Profile | null | undefined
) {
  const [loading, setLoading] = useState(false)
  const [toast, setToast] = useState<ToastState | null>(null)
  const supabase = getSupabase()

  const saveProfile = async (formData: CreatorProfileFormData) => {
    if (!session || !profile) return

    setLoading(true)
    try {
      const { error } = await supabase
        .from('creator_profiles')
        .update({
          full_name: formData.display_name,
          avatar_url: formData.avatar_url,
          bio: formData.bio,
          portfolio_website: formData.portfolio_website,
          instagram_url: formData.instagram_url,
          youtube_url: formData.youtube_url,
          response_time: formData.response_time,
          updated_at: new Date().toISOString(),
        })
        .eq('user_id', session.user.id)

      if (error) throw error

      setToast({ message: 'L∆∞u h·ªì s∆° th√†nh c√¥ng', type: 'success' })
    } catch (err: any) {
      setToast({ message: err.message || 'C√≥ l·ªói x·∫£y ra', type: 'error' })
    } finally {
      setLoading(false)
    }
  }

  const saveAvatar = async (avatarUrl: string) => {
    if (!session || !profile) return

    try {
      const { error } = await supabase
        .from('creator_profiles')
        .update({ avatar_url: avatarUrl, updated_at: new Date().toISOString() })
        .eq('user_id', session.user.id)

      if (error) throw error
      setToast({ message: 'ƒê√£ l∆∞u avatar th√†nh c√¥ng', type: 'success' })
    } catch (error: any) {
      setToast({ message: error.message || 'C√≥ l·ªói x·∫£y ra', type: 'error' })
    }
  }

  return {
    loading,
    toast,
    setToast,
    saveProfile,
    saveAvatar,
  }
}
</file>

<file path="src/pages/creator/proposals/ProposalsListPage.tsx">
import { useState, useMemo } from 'react'
import { useNavigate } from 'react-router-dom'
import { FaSearch, FaFilter, FaEye, FaCheck, FaTimes, FaPlus } from 'react-icons/fa'

interface Proposal {
  id: string
  brandName: string
  brandAvatar: string
  submittedDate: string
  proposalTitle: string
  campaignName: string
  budgetRange: string
  status: 'pending' | 'accepted' | 'rejected' | 'viewed'
}

const MOCK_PROPOSALS: Proposal[] = [
  {
    id: '1',
    brandName: 'Echo Marketing',
    brandAvatar: 'https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=100&h=100&fit=crop',
    submittedDate: '2024-07-28',
    proposalTitle: 'Digital Marketing Campaign Proposal',
    campaignName: 'Echo Marketing - Digital Marketing Campaign',
    budgetRange: '$1,500 - $2,000',
    status: 'pending',
  },
  {
    id: '2',
    brandName: 'Aqua Lifestyle',
    brandAvatar: 'https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=100&h=100&fit=crop',
    submittedDate: '2024-07-27',
    proposalTitle: 'Health & Wellness Promotion',
    campaignName: 'Aqua Lifestyle - Health & Wellness Promotion',
    budgetRange: '$1,000 - $1,500',
    status: 'viewed',
  },
  {
    id: '3',
    brandName: 'Pixel Studios',
    brandAvatar: 'https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=100&h=100&fit=crop',
    submittedDate: '2024-07-25',
    proposalTitle: 'Software Launch Campaign',
    campaignName: 'Pixel Studios - Software Launch Campaign',
    budgetRange: '$2,000 - $2,500',
    status: 'accepted',
  },
  {
    id: '4',
    brandName: 'Green Harvest Organics',
    brandAvatar: 'https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=100&h=100&fit=crop',
    submittedDate: '2024-07-24',
    proposalTitle: 'Product Launch Campaign',
    campaignName: 'Green Harvest Organics - Product Launch',
    budgetRange: '$800 - $1,200',
    status: 'rejected',
  },
  {
    id: '5',
    brandName: 'Urban Chic Boutique',
    brandAvatar: 'https://images.unsplash.com/photo-1560179707-f14e90ef3623?w=100&h=100&fit=crop',
    submittedDate: '2024-07-23',
    proposalTitle: 'Fashion Campaign Collaboration',
    campaignName: 'Urban Chic Boutique - Summer Collection',
    budgetRange: '$1,200 - $1,800',
    status: 'pending',
  },
]

export default function ProposalsListPage() {
  const navigate = useNavigate()
  const [proposals, setProposals] = useState<Proposal[]>(MOCK_PROPOSALS)
  const [searchQuery, setSearchQuery] = useState('')
  const [statusFilter, setStatusFilter] = useState<'all' | 'pending' | 'accepted' | 'rejected' | 'viewed'>('all')

  const filteredProposals = useMemo(() => {
    let filtered = proposals

    // Apply status filter
    if (statusFilter !== 'all') {
      filtered = filtered.filter(p => p.status === statusFilter)
    }

    // Apply search filter
    if (searchQuery) {
      const query = searchQuery.toLowerCase()
      filtered = filtered.filter(p =>
        p.brandName.toLowerCase().includes(query) ||
        p.proposalTitle.toLowerCase().includes(query) ||
        p.campaignName.toLowerCase().includes(query)
      )
    }

    return filtered
  }, [proposals, searchQuery, statusFilter])

  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'pending':
        return <span className="px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">Ch·ªù ph·∫£n h·ªìi</span>
      case 'viewed':
        return <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">ƒê√£ xem</span>
      case 'accepted':
        return <span className="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">ƒê√£ ch·∫•p nh·∫≠n</span>
      case 'rejected':
        return <span className="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">ƒê√£ t·ª´ ch·ªëi</span>
      default:
        return null
    }
  }

  const formatDate = (dateString: string) => {
    const date = new Date(dateString)
    return date.toLocaleDateString('vi-VN', { year: 'numeric', month: 'long', day: 'numeric' })
  }

  const stats = {
    total: proposals.length,
    pending: proposals.filter(p => p.status === 'pending').length,
    accepted: proposals.filter(p => p.status === 'accepted').length,
    rejected: proposals.filter(p => p.status === 'rejected').length,
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        {/* Stats Cards */}
        <div className="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="text-2xl font-bold text-gray-900">{stats.total}</div>
            <div className="text-sm text-gray-600">T·ªïng ƒë·ªÅ xu·∫•t</div>
          </div>
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="text-2xl font-bold text-yellow-600">{stats.pending}</div>
            <div className="text-sm text-gray-600">Ch·ªù ph·∫£n h·ªìi</div>
          </div>
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="text-2xl font-bold text-green-600">{stats.accepted}</div>
            <div className="text-sm text-gray-600">ƒê√£ ch·∫•p nh·∫≠n</div>
          </div>
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="text-2xl font-bold text-red-600">{stats.rejected}</div>
            <div className="text-sm text-gray-600">ƒê√£ t·ª´ ch·ªëi</div>
          </div>
        </div>

        {/* Filters */}
        <div className="bg-white rounded-xl border border-gray-200 p-4 mb-6">
          <div className="flex flex-col md:flex-row gap-4">
            <div className="flex-1 relative">
              <FaSearch className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
              <input
                type="text"
                value={searchQuery}
                onChange={(e) => setSearchQuery(e.target.value)}
                placeholder="T√¨m ki·∫øm ƒë·ªÅ xu·∫•t..."
                className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
              />
            </div>
            <div className="flex items-center gap-2">
              <FaFilter className="text-gray-400 w-4 h-4" />
              <select
                value={statusFilter}
                onChange={(e) => setStatusFilter(e.target.value as any)}
                className="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
              >
                <option value="all">T·∫•t c·∫£ tr·∫°ng th√°i</option>
                <option value="pending">Ch·ªù ph·∫£n h·ªìi</option>
                <option value="viewed">ƒê√£ xem</option>
                <option value="accepted">ƒê√£ ch·∫•p nh·∫≠n</option>
                <option value="rejected">ƒê√£ t·ª´ ch·ªëi</option>
              </select>
            </div>
            <button
              onClick={() => navigate('/dashboard/creator/proposals/new')}
              className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white font-medium rounded-lg hover:opacity-90 transition-opacity whitespace-nowrap"
            >
              <FaPlus className="w-4 h-4" />
              <span>T·∫°o ƒë·ªÅ xu·∫•t m·ªõi</span>
            </button>
          </div>
        </div>

        {/* Proposals List */}
        <div className="bg-white rounded-xl border border-gray-200 overflow-hidden">
          {filteredProposals.length === 0 ? (
            <div className="text-center py-12">
              <p className="text-gray-600 mb-2">
                {searchQuery || statusFilter !== 'all' 
                  ? 'Kh√¥ng t√¨m th·∫•y ƒë·ªÅ xu·∫•t n√†o ph√π h·ª£p' 
                  : 'B·∫°n ch∆∞a c√≥ ƒë·ªÅ xu·∫•t n√†o'}
              </p>
              {!searchQuery && statusFilter === 'all' && (
                <button
                  onClick={() => navigate('/dashboard/creator/proposals/new')}
                  className="mt-4 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white font-medium rounded-lg hover:opacity-90 transition-opacity"
                >
                  T·∫°o ƒë·ªÅ xu·∫•t ƒë·∫ßu ti√™n
                </button>
              )}
            </div>
          ) : (
            <div className="divide-y divide-gray-200">
              {filteredProposals.map((proposal) => (
                <div
                  key={proposal.id}
                  className="p-6 hover:bg-gray-50 transition-colors cursor-pointer"
                  onClick={() => {
                    if (proposal.status === 'accepted') {
                      navigate('/dashboard/creator/workspace')
                    }
                  }}
                >
                  <div className="flex items-start justify-between">
                    <div className="flex items-start gap-4 flex-1">
                      <img
                        src={proposal.brandAvatar}
                        alt={proposal.brandName}
                        className="w-12 h-12 rounded-full object-cover"
                      />
                      <div className="flex-1">
                        <div className="flex items-center gap-3 mb-2">
                          <h3 className="font-semibold text-gray-900">{proposal.proposalTitle}</h3>
                          {getStatusBadge(proposal.status)}
                        </div>
                        <p className="text-sm text-gray-600 mb-1">
                          <span className="font-medium">{proposal.brandName}</span> ‚Ä¢ {proposal.campaignName}
                        </p>
                        <div className="flex items-center gap-4 text-sm text-gray-500">
                          <span>Ng√†y g·ª≠i: {formatDate(proposal.submittedDate)}</span>
                          <span>‚Ä¢</span>
                          <span>Ng√¢n s√°ch: {proposal.budgetRange}</span>
                        </div>
                      </div>
                    </div>
                    <div className="flex items-center gap-2">
                      {proposal.status === 'accepted' && (
                        <button
                          onClick={(e) => {
                            e.stopPropagation()
                            navigate('/dashboard/creator/workspace')
                          }}
                          className="px-4 py-2 text-sm bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
                        >
                          Xem chi ti·∫øt
                        </button>
                      )}
                    </div>
                  </div>
                </div>
              ))}
            </div>
          )}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/public/LandingPage.tsx">
import { useEffect, useState } from 'react'
import { Link, useSearchParams } from 'react-router-dom'

export default function LandingPage() {
  const [searchParams, setSearchParams] = useSearchParams()
  const [showMessage, setShowMessage] = useState(false)

  useEffect(() => {
    if (searchParams.get('signup') === 'success') {
      setShowMessage(true)
      // Remove query param from URL
      setSearchParams({}, { replace: true })
    }
  }, [searchParams, setSearchParams])

  return (
    <div className="relative overflow-x-hidden bg-white pt-16">
      <div className="min-h-screen">
        <section className="max-w-7xl mx-auto px-6 py-20">
          <div className="text-center">
            {showMessage && (
              <div className="mb-8 max-w-2xl mx-auto">
                <div className="bg-green-50 border border-green-200 rounded-xl p-4 text-green-700">
                  <p className="font-medium">
                    Vui l√≤ng ki·ªÉm tra email ƒë·ªÉ x√°c th·ª±c t√†i kho·∫£n.
                  </p>
                </div>
              </div>
            )}
            <h1 className="text-5xl md:text-6xl font-bold mb-6 bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
              Qu·∫£n l√Ω h·ª£p t√°c Creator - Brand
            </h1>
            <p className="text-xl text-[#6B7280] mb-8 max-w-2xl mx-auto">
              N·ªÅn t·∫£ng qu·∫£n l√Ω h·ª£p t√°c chuy√™n nghi·ªáp gi·ªØa Creator v√† Brand
            </p>
            <div className="flex gap-4 justify-center">
              <Link
                to="/signup"
                className="px-8 py-3 rounded-full font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25"
              >
                B·∫Øt ƒë·∫ßu ngay
              </Link>
              <Link
                to="/login"
                className="px-8 py-3 rounded-full font-semibold text-[#6366F1] border-2 border-[#6366F1] hover:bg-[#6366F1] hover:text-white transition-colors"
              >
                ƒêƒÉng nh·∫≠p
              </Link>
            </div>
          </div>
        </section>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/public/PrivacyPage.tsx">
import { Link } from 'react-router-dom'
import Header from '../../components/layout/Header'
import Footer from '../../components/layout/Footer'

export default function PrivacyPage() {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      <main className="flex-1 pt-24 pb-16">
        <div className="max-w-4xl mx-auto px-6">
          <div className="bg-white rounded-3xl p-8 md:p-10 shadow-xl border border-gray-200">
            <h1 className="text-4xl font-bold mb-4">Ch√≠nh s√°ch b·∫£o m·∫≠t</h1>
            <p className="text-sm text-gray-500 mb-8">
              C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: {new Date().toLocaleDateString('vi-VN', { year: 'numeric', month: 'long', day: 'numeric' })}
            </p>

            <div className="prose prose-gray max-w-none">
              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">1. Gi·ªõi thi·ªáu</h2>
                <p className="text-gray-700 mb-4">
                  ALINO cam k·∫øt b·∫£o v·ªá quy·ªÅn ri√™ng t∆∞ c·ªßa ng∆∞·ªùi d√πng. Ch√≠nh s√°ch n√†y m√¥ t·∫£ c√°ch ch√∫ng t√¥i thu th·∫≠p, s·ª≠ d·ª•ng, 
                  v√† b·∫£o v·ªá th√¥ng tin c√° nh√¢n c·ªßa b·∫°n khi s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa ch√∫ng t√¥i.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">2. Th√¥ng tin ch√∫ng t√¥i thu th·∫≠p</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i thu th·∫≠p c√°c lo·∫°i th√¥ng tin sau:
                </p>
                <ul className="list-disc pl-6 text-gray-700 mb-4">
                  <li><strong>Th√¥ng tin c√° nh√¢n:</strong> T√™n, email, ng√†y sinh, ƒë·ªãa ch·ªâ</li>
                  <li><strong>Th√¥ng tin t√†i kho·∫£n:</strong> Th√¥ng tin ƒëƒÉng nh·∫≠p, l·ªãch s·ª≠ ho·∫°t ƒë·ªông</li>
                  <li><strong>Th√¥ng tin h·ªì s∆°:</strong> Th√¥ng tin c√¥ng khai tr√™n h·ªì s∆° c·ªßa b·∫°n</li>
                  <li><strong>Th√¥ng tin k·∫øt n·ªëi:</strong> D·ªØ li·ªáu t·ª´ c√°c t√†i kho·∫£n m·∫°ng x√£ h·ªôi ƒë∆∞·ª£c k·∫øt n·ªëi (Google, Facebook, Instagram, TikTok)</li>
                  <li><strong>D·ªØ li·ªáu s·ª≠ d·ª•ng:</strong> Th√¥ng tin v·ªÅ c√°ch b·∫°n s·ª≠ d·ª•ng n·ªÅn t·∫£ng</li>
                </ul>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">3. C√°ch ch√∫ng t√¥i s·ª≠ d·ª•ng th√¥ng tin</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i s·ª≠ d·ª•ng th√¥ng tin c·ªßa b·∫°n ƒë·ªÉ:
                </p>
                <ul className="list-disc pl-6 text-gray-700 mb-4">
                  <li>Cung c·∫•p v√† c·∫£i thi·ªán d·ªãch v·ª•</li>
                  <li>K·∫øt n·ªëi b·∫°n v·ªõi c√°c ƒë·ªëi t√°c ph√π h·ª£p (Creators v·ªõi Brands)</li>
                  <li>G·ª≠i th√¥ng b√°o v√† c·∫≠p nh·∫≠t v·ªÅ d·ªãch v·ª•</li>
                  <li>Ph√¢n t√≠ch v√† c·∫£i thi·ªán tr·∫£i nghi·ªám ng∆∞·ªùi d√πng</li>
                  <li>Tu√¢n th·ªß c√°c nghƒ©a v·ª• ph√°p l√Ω</li>
                </ul>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">4. K·∫øt n·ªëi t√†i kho·∫£n m·∫°ng x√£ h·ªôi</h2>
                <p className="text-gray-700 mb-4">
                  Khi b·∫°n k·∫øt n·ªëi t√†i kho·∫£n m·∫°ng x√£ h·ªôi (Google, Facebook, Instagram, TikTok) v·ªõi ALINO, ch√∫ng t√¥i c√≥ th·ªÉ 
                  truy c·∫≠p v√† l∆∞u tr·ªØ m·ªôt s·ªë th√¥ng tin t·ª´ c√°c t√†i kho·∫£n ƒë√≥ ƒë·ªÉ cung c·∫•p d·ªãch v·ª• t·ªët h∆°n, bao g·ªìm th√¥ng tin h·ªì s∆° 
                  c√¥ng khai v√† d·ªØ li·ªáu c·∫ßn thi·∫øt cho c√°c t√≠nh nƒÉng c·ªßa n·ªÅn t·∫£ng.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">5. Chia s·∫ª th√¥ng tin</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i kh√¥ng b√°n th√¥ng tin c√° nh√¢n c·ªßa b·∫°n. Ch√∫ng t√¥i c√≥ th·ªÉ chia s·∫ª th√¥ng tin trong c√°c tr∆∞·ªùng h·ª£p sau:
                </p>
                <ul className="list-disc pl-6 text-gray-700 mb-4">
                  <li>V·ªõi c√°c ƒë·ªëi t√°c ph√π h·ª£p tr√™n n·ªÅn t·∫£ng (th√¥ng tin c√¥ng khai t·ª´ h·ªì s∆° c·ªßa b·∫°n)</li>
                  <li>V·ªõi c√°c nh√† cung c·∫•p d·ªãch v·ª• h·ªó tr·ª£ ho·∫°t ƒë·ªông c·ªßa ch√∫ng t√¥i</li>
                  <li>Khi ƒë∆∞·ª£c y√™u c·∫ßu b·ªüi ph√°p lu·∫≠t</li>
                </ul>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">6. B·∫£o m·∫≠t d·ªØ li·ªáu</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i s·ª≠ d·ª•ng c√°c bi·ªán ph√°p b·∫£o m·∫≠t k·ªπ thu·∫≠t v√† t·ªï ch·ª©c ph√π h·ª£p ƒë·ªÉ b·∫£o v·ªá th√¥ng tin c√° nh√¢n c·ªßa b·∫°n kh·ªèi 
                  truy c·∫≠p tr√°i ph√©p, m·∫•t m√°t, ho·∫∑c ph√° h·ªßy.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">7. Quy·ªÅn c·ªßa b·∫°n</h2>
                <p className="text-gray-700 mb-4">
                  B·∫°n c√≥ quy·ªÅn:
                </p>
                <ul className="list-disc pl-6 text-gray-700 mb-4">
                  <li>Truy c·∫≠p v√† ch·ªânh s·ª≠a th√¥ng tin c√° nh√¢n c·ªßa b·∫°n</li>
                  <li>Y√™u c·∫ßu x√≥a t√†i kho·∫£n v√† d·ªØ li·ªáu</li>
                  <li>Ng·ª´ng k·∫øt n·ªëi t√†i kho·∫£n m·∫°ng x√£ h·ªôi</li>
                  <li>Y√™u c·∫ßu xu·∫•t d·ªØ li·ªáu c·ªßa b·∫°n</li>
                </ul>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">8. Cookie v√† c√¥ng ngh·ªá theo d√µi</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i s·ª≠ d·ª•ng cookie v√† c√°c c√¥ng ngh·ªá t∆∞∆°ng t·ª± ƒë·ªÉ c·∫£i thi·ªán tr·∫£i nghi·ªám ng∆∞·ªùi d√πng v√† ph√¢n t√≠ch c√°ch s·ª≠ d·ª•ng d·ªãch v·ª•.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">9. Thay ƒë·ªïi ch√≠nh s√°ch</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i c√≥ th·ªÉ c·∫≠p nh·∫≠t ch√≠nh s√°ch n√†y theo th·ªùi gian. Ch√∫ng t√¥i s·∫Ω th√¥ng b√°o cho b·∫°n v·ªÅ c√°c thay ƒë·ªïi quan tr·ªçng 
                  qua email ho·∫∑c th√¥ng b√°o tr√™n n·ªÅn t·∫£ng.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">10. Li√™n h·ªá</h2>
                <p className="text-gray-700 mb-4">
                  N·∫øu b·∫°n c√≥ c√¢u h·ªèi v·ªÅ ch√≠nh s√°ch b·∫£o m·∫≠t n√†y, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i qua email ho·∫∑c c√°c k√™nh h·ªó tr·ª£ ƒë∆∞·ª£c cung c·∫•p.
                </p>
              </section>
            </div>
          </div>
        </div>
      </main>
      <Footer />
    </div>
  )
}
</file>

<file path="src/pages/public/TermsPage.tsx">
import { Link } from 'react-router-dom'
import Header from '../../components/layout/Header'
import Footer from '../../components/layout/Footer'

export default function TermsPage() {
  return (
    <div className="min-h-screen flex flex-col">
      <Header />
      <main className="flex-1 pt-24 pb-16">
        <div className="max-w-4xl mx-auto px-6">
          <div className="bg-white rounded-3xl p-8 md:p-10 shadow-xl border border-gray-200">
            <h1 className="text-4xl font-bold mb-4">ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng</h1>
            <p className="text-sm text-gray-500 mb-8">
              C·∫≠p nh·∫≠t l·∫ßn cu·ªëi: {new Date().toLocaleDateString('vi-VN', { year: 'numeric', month: 'long', day: 'numeric' })}
            </p>

            <div className="prose prose-gray max-w-none">
              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">1. Ch·∫•p nh·∫≠n ƒëi·ªÅu kho·∫£n</h2>
                <p className="text-gray-700 mb-4">
                  B·∫±ng vi·ªác truy c·∫≠p v√† s·ª≠ d·ª•ng d·ªãch v·ª• ALINO, b·∫°n ƒë·ªìng √Ω tu√¢n th·ªß v√† b·ªã r√†ng bu·ªôc b·ªüi c√°c ƒëi·ªÅu kho·∫£n s·ª≠ d·ª•ng n√†y. 
                  N·∫øu b·∫°n kh√¥ng ƒë·ªìng √Ω v·ªõi b·∫•t k·ª≥ ph·∫ßn n√†o c·ªßa c√°c ƒëi·ªÅu kho·∫£n n√†y, b·∫°n kh√¥ng ƒë∆∞·ª£c ph√©p s·ª≠ d·ª•ng d·ªãch v·ª•.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">2. M√¥ t·∫£ d·ªãch v·ª•</h2>
                <p className="text-gray-700 mb-4">
                  ALINO l√† m·ªôt n·ªÅn t·∫£ng k·∫øt n·ªëi gi·ªØa c√°c nh√† s√°ng t·∫°o n·ªôi dung (Creators) v√† c√°c th∆∞∆°ng hi·ªáu (Brands) 
                  ƒë·ªÉ t·∫°o ƒëi·ªÅu ki·ªán cho c√°c chi·∫øn d·ªãch h·ª£p t√°c v√† ti·∫øp th·ªã. D·ªãch v·ª• bao g·ªìm nh∆∞ng kh√¥ng gi·ªõi h·∫°n ·ªü vi·ªác 
                  qu·∫£n l√Ω h·ªì s∆°, t√¨m ki·∫øm ƒë·ªëi t√°c, v√† qu·∫£n l√Ω c√°c d·ª± √°n h·ª£p t√°c.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">3. T√†i kho·∫£n ng∆∞·ªùi d√πng</h2>
                <p className="text-gray-700 mb-4">
                  ƒê·ªÉ s·ª≠ d·ª•ng m·ªôt s·ªë t√≠nh nƒÉng c·ªßa d·ªãch v·ª•, b·∫°n c·∫ßn t·∫°o t√†i kho·∫£n. B·∫°n c√≥ tr√°ch nhi·ªám:
                </p>
                <ul className="list-disc pl-6 text-gray-700 mb-4">
                  <li>B·∫£o m·∫≠t th√¥ng tin ƒëƒÉng nh·∫≠p c·ªßa b·∫°n</li>
                  <li>Cung c·∫•p th√¥ng tin ch√≠nh x√°c v√† c·∫≠p nh·∫≠t</li>
                  <li>Th√¥ng b√°o ngay cho ch√∫ng t√¥i v·ªÅ b·∫•t k·ª≥ ho·∫°t ƒë·ªông ƒë√°ng ng·ªù n√†o</li>
                </ul>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">4. Quy·ªÅn v√† tr√°ch nhi·ªám</h2>
                <p className="text-gray-700 mb-4">
                  Ng∆∞·ªùi d√πng c√≥ quy·ªÅn s·ª≠ d·ª•ng d·ªãch v·ª• theo ƒë√∫ng m·ª•c ƒë√≠ch v√† kh√¥ng ƒë∆∞·ª£c s·ª≠ d·ª•ng d·ªãch v·ª• cho c√°c ho·∫°t ƒë·ªông 
                  b·∫•t h·ª£p ph√°p ho·∫∑c vi ph·∫°m quy·ªÅn c·ªßa ng∆∞·ªùi kh√°c.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">5. S·ªü h·ªØu tr√≠ tu·ªá</h2>
                <p className="text-gray-700 mb-4">
                  T·∫•t c·∫£ n·ªôi dung tr√™n n·ªÅn t·∫£ng ALINO, bao g·ªìm logo, thi·∫øt k·∫ø, vƒÉn b·∫£n, v√† ph·∫ßn m·ªÅm, ƒë·ªÅu thu·ªôc quy·ªÅn s·ªü h·ªØu 
                  c·ªßa ALINO ho·∫∑c c√°c b√™n c·∫•p ph√©p. B·∫°n kh√¥ng ƒë∆∞·ª£c ph√©p sao ch√©p, ph√¢n ph·ªëi, ho·∫∑c s·ª≠ d·ª•ng n·ªôi dung n√†y m√† kh√¥ng 
                  c√≥ s·ª± cho ph√©p b·∫±ng vƒÉn b·∫£n.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">6. Gi·ªõi h·∫°n tr√°ch nhi·ªám</h2>
                <p className="text-gray-700 mb-4">
                  ALINO kh√¥ng ch·ªãu tr√°ch nhi·ªám v·ªÅ b·∫•t k·ª≥ thi·ªát h·∫°i tr·ª±c ti·∫øp, gi√°n ti·∫øp, ng·∫´u nhi√™n, ho·∫∑c h·∫≠u qu·∫£ n√†o ph√°t sinh 
                  t·ª´ vi·ªác s·ª≠ d·ª•ng ho·∫∑c kh√¥ng th·ªÉ s·ª≠ d·ª•ng d·ªãch v·ª• c·ªßa ch√∫ng t√¥i.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">7. Thay ƒë·ªïi ƒëi·ªÅu kho·∫£n</h2>
                <p className="text-gray-700 mb-4">
                  Ch√∫ng t√¥i c√≥ quy·ªÅn c·∫≠p nh·∫≠t c√°c ƒëi·ªÅu kho·∫£n n√†y b·∫•t c·ª© l√∫c n√†o. Vi·ªác ti·∫øp t·ª•c s·ª≠ d·ª•ng d·ªãch v·ª• sau khi c√≥ thay ƒë·ªïi 
                  ƒë∆∞·ª£c coi l√† b·∫°n ƒë√£ ch·∫•p nh·∫≠n c√°c ƒëi·ªÅu kho·∫£n m·ªõi.
                </p>
              </section>

              <section className="mb-8">
                <h2 className="text-2xl font-semibold mb-4">8. Li√™n h·ªá</h2>
                <p className="text-gray-700 mb-4">
                  N·∫øu b·∫°n c√≥ b·∫•t k·ª≥ c√¢u h·ªèi n√†o v·ªÅ c√°c ƒëi·ªÅu kho·∫£n n√†y, vui l√≤ng li√™n h·ªá v·ªõi ch√∫ng t√¥i qua email ho·∫∑c c√°c k√™nh h·ªó tr·ª£ 
                  ƒë∆∞·ª£c cung c·∫•p tr√™n n·ªÅn t·∫£ng.
                </p>
              </section>
            </div>
          </div>
        </div>
      </main>
      <Footer />
    </div>
  )
}
</file>

<file path="src/pages/public/VerifyEmailPage.tsx">
import { useEffect } from 'react'
import { Link } from 'react-router-dom'
import { getSupabase } from '../../lib/supabase'

export default function VerifyEmailPage() {
  const supabase = getSupabase()

  useEffect(() => {
    // Sign out any existing session to prevent auto-login
    supabase.auth.signOut()
  }, [])

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6 pt-24">
      <div className="w-full max-w-md">
        <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-black/5 text-center">
          <div className="w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center">
            <svg className="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
          </div>

          <h1 className="text-3xl font-semibold tracking-tight mb-4">
            X√°c th·ª±c th√†nh c√¥ng
          </h1>

          <p className="text-[#6B7280] mb-8 leading-relaxed">
            T√†i kho·∫£n ƒë√£ ƒë∆∞·ª£c x√°c th·ª±c. Vui l√≤ng ƒëƒÉng nh·∫≠p ƒë·ªÉ ti·∫øp t·ª•c.
          </p>

          <Link
            to="/login"
            className="inline-block px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25"
          >
            ƒêƒÉng nh·∫≠p
          </Link>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/shared/ComingSoonPage.tsx">
/**
 * Placeholder page for unfinished dashboard features
 * Title and subtitle are shown in Header, this page shows feature content only
 */
export default function ComingSoonPage() {
  return (
    <div className="min-h-screen bg-white">
      <div className="max-w-6xl mx-auto p-8">
        <div className="text-center py-20">
          <p className="text-lg text-gray-600">
            T√≠nh nƒÉng ƒëang x√¢y d·ª±ng
          </p>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/types/toast.ts">
/**
 * toast: Shared types for toast notifications
 * 
 * Centralized type definitions for toast state across the application.
 */

export type ToastType = 'success' | 'error'

export interface ToastState {
  message: string
  type: ToastType
}
</file>

<file path="src/types/workspace.ts">
/**
 * Workspace types
 * 
 * Architecture: Campaigns belong to Workspaces.
 * Workspace represents a container/organizational unit for campaigns.
 * 
 * TODO: Define full workspace schema and permissions model
 * - Should workspaces be multi-tenant (multiple brands per workspace)?
 * - Should workspaces have their own settings/permissions?
 * - What's the relationship between workspace and brand profile?
 */

export interface Workspace {
  id: string
  name: string
  // TODO: Add more workspace fields based on product requirements
  // brand_id?: string
  // created_at?: string
  // updated_at?: string
}

/**
 * Campaign types - campaigns belong to a workspace
 */
export interface Campaign {
  id: string
  workspace_id: string
  name: string
  status: 'active' | 'ongoing' | 'completed' | 'draft' | 'paused'
  // TODO: Add more campaign fields based on product requirements
  // goal?: string
  // budget?: number
  // deadline?: string
  // created_at?: string
  // updated_at?: string
}
</file>

<file path="src/utils/authHelpers.ts">
import type { Session } from '@supabase/supabase-js'

/**
 * authHelpers: Utility functions for authentication-related computations
 * 
 * All functions are pure (no side effects) and can be safely reused across components.
 */

/**
 * Extracts user object from session
 * 
 * @param session - Supabase session object or null
 * @returns User object if session exists, null otherwise
 */
export function getUserFromSession(session: Session | null): Session['user'] | null {
  return session?.user ?? null
}

/**
 * Checks if a user is authenticated based on session
 * 
 * @param session - Supabase session object or null
 * @returns true if session exists (user is authenticated), false otherwise
 */
export function isUserAuthenticated(session: Session | null): boolean {
  return !!session
}
</file>

<file path="postcss.config.cjs">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="src/app/routeConfig.tsx">
import { ReactElement } from 'react'
import DashboardHome from '../pages/creator/dashboard/DashboardHome'
import BrandDashboard from '../pages/brand/dashboard/BrandDashboard'
import AnalyticsPage from '../pages/creator/dashboard/AnalyticsPage'
import BrandCampaignAnalyticsPage from '../pages/brand/dashboard/BrandCampaignAnalyticsPage'
import MyDealsPage from '../pages/creator/dashboard/MyDealsPage'
import MyProposalsPage from '../pages/creator/dashboard/MyProposalsPage'
import ProfilePage from '../pages/creator/profile/ProfilePage'
import BrandProfilePage from '../pages/brand/profile/ProfilePage'
import SettingsPage from '../pages/creator/profile/SettingsPage'
import BrandSettingsPage from '../pages/brand/profile/SettingsPage'
import ServicesPage from '../pages/creator/services/ServicesPage'
import OpportunitiesPage from '../pages/creator/discovery/OpportunitiesPage'
import SubmitProposalPage from '../pages/creator/proposals/SubmitProposalPage'
import ProposalsListPage from '../pages/creator/proposals/ProposalsListPage'
import DealWorkspacePage from '../pages/creator/proposals/DealWorkspacePage'
import CreatorDiscoveryPage from '../pages/brand/discovery/CreatorDiscoveryPage'
import BrandDiscoveryPage from '../pages/brand/discovery/BrandDiscoveryPage'
import CreateCampaignPage from '../pages/brand/campaigns/CreateCampaignPage'
import PrivateCampaignBookingPage from '../pages/brand/campaigns/PrivateCampaignBookingPage'
import CampaignManagementListPage from '../pages/brand/campaigns/CampaignManagementListPage'
import CampaignDetailPage from '../pages/brand/campaigns/CampaignDetailPage'
import ProposalInboxPage from '../pages/brand/deals/ProposalInboxPage'
import WorkspacePage from '../pages/brand/workspace/WorkspacePage'
import WorkspaceCampaignPage from '../pages/brand/workspace/WorkspaceCampaignPage'
import WorkspaceRoutes from '../pages/brand/workspace/WorkspaceRoutes'
import ComingSoonPage from '../pages/shared/ComingSoonPage'

/**
 * RouteConfig: Centralized route definitions
 * 
 * This file contains all route configurations in a declarative format.
 * Routes are organized by role and path, making it easy to:
 * - See all available routes at a glance
 * - Add new routes
 * - Understand route structure
 */

export type RouteRole = 'creator' | 'brand'

export interface RouteDefinition {
  path: string
  element: ReactElement
  exact?: boolean
}

export interface RoleRouteConfig {
  role: RouteRole
  routes: RouteDefinition[]
}

/**
 * Creator dashboard routes configuration
 */
export const creatorRoutes: RouteDefinition[] = [
  { path: '', element: <DashboardHome />, exact: true },
  { path: 'profile', element: <ProfilePage /> },
  { path: 'settings', element: <SettingsPage /> },
  { path: 'services', element: <ServicesPage /> },
  { path: 'discovery', element: <OpportunitiesPage /> },
  { path: 'deals', element: <MyDealsPage /> },
  { path: 'proposals', element: <MyProposalsPage /> },
  { path: 'proposals/new', element: <SubmitProposalPage /> },
  { path: 'proposals/list', element: <ProposalsListPage /> },
  { path: 'workspace', element: <DealWorkspacePage /> },
  { path: 'analytics', element: <AnalyticsPage /> },
]

/**
 * Brand dashboard routes configuration
 */
export const brandRoutes: RouteDefinition[] = [
  { path: '', element: <BrandDashboard />, exact: true },
  { path: 'profile', element: <BrandProfilePage /> },
  { path: 'analytics', element: <BrandCampaignAnalyticsPage /> },
  { path: 'discovery', element: <BrandDiscoveryPage /> },
  
  // Workspace: Execution Layer (daily working area)
  // STATE A: Workspace Overview (DEFAULT) - shows multiple campaigns, pending work
  // Route: /dashboard/brand/workspace
  // MUST NOT auto-open any campaign - this is the overview dashboard
  { path: 'workspace', element: <WorkspacePage /> },
  // STATE B: Workspace with Campaign Selected - shows execution UI (timeline, creator progress, actions)
  // Route: /dashboard/brand/workspace/:campaignId
  // Only shows execution UI when a specific campaign is selected
  { path: 'workspace/:campaignId', element: <WorkspaceCampaignPage /> },
  // Legacy workspace/:workspaceId routes (for backward compatibility)
  // TODO: Potential route conflict - workspace/:workspaceId might match before workspace/:campaignId
  // Consider deprecating or using a different pattern if workspaceId concept is no longer needed
  { path: 'workspace/:workspaceId/*', element: <WorkspaceRoutes /> },
  
  // Campaigns: Management Layer (create, list, config-level details)
  // Create private campaign & book creator (must come before campaigns/new)
  { path: 'campaigns/new/private', element: <PrivateCampaignBookingPage /> },
  // Create new campaign (must come before :campaignId to avoid route conflict)
  { path: 'campaigns/new', element: <CreateCampaignPage /> },
  // Campaign details (configuration-level only, no execution logic)
  { path: 'campaigns/:campaignId', element: <CampaignDetailPage /> },
  // Campaign list + entry point to create
  { path: 'campaigns', element: <CampaignManagementListPage /> },
  
  { path: 'proposals/*', element: <ProposalInboxPage /> },
  { path: 'settings', element: <BrandSettingsPage /> },
]

/**
 * Fallback route for unmatched paths
 */
export const fallbackRoute: RouteDefinition = {
  path: '*',
  element: <ComingSoonPage />,
}

/**
 * Get all routes for a specific role
 */
export function getRoutesForRole(role: RouteRole): RouteDefinition[] {
  return role === 'creator' ? creatorRoutes : brandRoutes
}

/**
 * Get route configuration for both roles
 */
export function getAllRoleRoutes(): RoleRouteConfig[] {
  return [
    { role: 'creator', routes: creatorRoutes },
    { role: 'brand', routes: brandRoutes },
  ]
}
</file>

<file path="src/components/brand/BrandDashboardLayout.tsx">
import { Link, useLocation, useNavigate, Outlet } from 'react-router-dom'
import { 
  FaTh, 
  FaUser, 
  FaSearch,
  FaBullhorn,
  FaEnvelope,
  FaBriefcase,
  FaChartBar,
  FaCog,
  FaSignOutAlt,
} from 'react-icons/fa'
import { useAuth } from '../../hooks/useAuth'
import DashboardHeader from '../dashboard/DashboardHeader'

export default function BrandDashboardLayout() {
  const location = useLocation()
  const navigate = useNavigate()
  const { signOut } = useAuth()

  const mainNavItems = [
    { path: '', label: 'B·∫£ng ƒëi·ªÅu khi·ªÉn', icon: FaTh },
    { path: 'discovery', label: 'T√¨m ki·∫øm Creator', icon: FaSearch },
    { path: 'campaigns', label: 'Chi·∫øn d·ªãch', icon: FaBullhorn },
    { path: 'proposals', label: 'H·ªôp th∆∞ ƒë·ªÅ xu·∫•t', icon: FaEnvelope },
    { path: 'workspace', label: 'Kh√¥ng gian l√†m vi·ªác', icon: FaBriefcase },
    { path: 'analytics', label: 'Ph√¢n t√≠ch', icon: FaChartBar },
  ]

  const accountItems = [
    { path: 'settings', label: 'C√†i ƒë·∫∑t', icon: FaCog },
  ]

  const isActive = (path: string) => {
    if (path === '') {
      // Index route - only active when exactly at /dashboard/brand
      return location.pathname === '/dashboard/brand'
    }
    // For other paths, check if current pathname starts with the route
    return location.pathname === `/dashboard/brand/${path}` || location.pathname.startsWith(`/dashboard/brand/${path}/`)
  }

  return (
    <>
      <DashboardHeader />
      <div className="min-h-screen bg-gray-50 pt-16">
        <div className="flex">
          <aside className="fixed left-0 top-16 bottom-0 w-64 bg-white border-r border-gray-200 overflow-y-auto">
            <div className="p-4 h-full flex flex-col">
              <nav className="space-y-1">
                {mainNavItems.map((item) => {
                  const Icon = item.icon
                  const active = isActive(item.path)

                  return (
                    <Link
                      key={item.path}
                      to={item.path}
                      className={`
                        flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors
                        ${active 
                          ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white' 
                          : 'text-gray-700 hover:bg-gray-100'
                        }
                      `}
                    >
                      <Icon className="w-5 h-5" />
                      <span>{item.label}</span>
                    </Link>
                  )
                })}
              </nav>

              <div className="mt-auto pt-4 border-t border-gray-200">
                <nav className="space-y-1">
                  {accountItems.map((item) => {
                    const Icon = item.icon
                    const active = isActive(item.path)

                    return (
                      <Link
                        key={item.path}
                        to={item.path}
                        className={`
                          flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors
                          ${active
                            ? 'bg-gray-100 text-[#6366F1]'
                            : 'text-gray-700 hover:bg-gray-100'
                          }
                        `}
                      >
                        <Icon className="w-5 h-5" />
                        <span>{item.label}</span>
                      </Link>
                    )})}
                  <button
                    onClick={async () => {
                      await signOut()
                      // Redirect to landing page after sign out
                      navigate('/')
                    }}
                    className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors w-full text-left"
                  >
                    <FaSignOutAlt className="w-5 h-5 text-red-600" />
                    <span>ƒêƒÉng xu·∫•t</span>
                  </button>
                </nav>
              </div>
            </div>
          </aside>

          <main className="flex-1 ml-64">
            <Outlet />
          </main>
        </div>
      </div>
    </>
  )
}
</file>

<file path="src/components/creator/CreatorDashboardLayout.tsx">
import { Link, useLocation, useNavigate, Outlet } from 'react-router-dom'
import { 
  FaTh, 
  FaUser, 
  FaDollarSign, 
  FaLightbulb, 
  FaFileAlt, 
  FaCheckCircle, 
  FaChartBar,
  FaCog,
  FaSignOutAlt,
  FaHandshake,
} from 'react-icons/fa'
import { useAuth } from '../../hooks/useAuth'
import DashboardHeader from '../dashboard/DashboardHeader'

export default function CreatorDashboardLayout() {
  const location = useLocation()
  const navigate = useNavigate()
  const { signOut } = useAuth()

  const mainNavItems = [
    { path: '', label: 'B·∫£ng ƒëi·ªÅu khi·ªÉn', icon: FaTh },
    { path: 'profile', label: 'H·ªì s∆° c√° nh√¢n', icon: FaUser },
    { path: 'services', label: 'D·ªãch v·ª• & B·∫£ng gi√°', icon: FaDollarSign },
    { path: 'discovery', label: 'C∆° h·ªôi', icon: FaLightbulb },
    { path: 'deals', label: 'My Deals', icon: FaHandshake },
    { path: 'proposals', label: 'My Proposals', icon: FaFileAlt },
    { path: 'workspace', label: 'Trung t√¢m l√†m vi·ªác', icon: FaCheckCircle },
    { path: 'analytics', label: 'Ph√¢n t√≠ch', icon: FaChartBar },
  ]

  const accountItems = [
    { path: 'settings', label: 'C√†i ƒë·∫∑t', icon: FaCog },
  ]

  const isActive = (path: string) => {
    if (path === '') {
      // Index route - only active when exactly at /dashboard/creator
      return location.pathname === '/dashboard/creator'
    }
    // For other paths, check if current pathname starts with the route
    return location.pathname === `/dashboard/creator/${path}` || location.pathname.startsWith(`/dashboard/creator/${path}/`)
  }

  return (
    <>
      <DashboardHeader />
      <div className="min-h-screen bg-gray-50 pt-16">
        <div className="flex">
          <aside className="fixed left-0 top-16 bottom-0 w-64 bg-white border-r border-gray-200 overflow-y-auto">
            <div className="p-4 h-full flex flex-col">
              <nav className="space-y-1">
                {mainNavItems.map((item) => {
                  const Icon = item.icon
                  const active = isActive(item.path)

                  return (
                    <Link
                      key={item.path}
                      to={item.path}
                      className={`
                        flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors
                        ${active 
                          ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white' 
                          : 'text-gray-700 hover:bg-gray-100'
                        }
                      `}
                    >
                      <Icon className="w-5 h-5" />
                      <span>{item.label}</span>
                    </Link>
                  )
                })}
              </nav>

              <div className="mt-auto pt-4 border-t border-gray-200">
                <nav className="space-y-1">
                  {accountItems.map((item) => {
                    const Icon = item.icon
                    const active = isActive(item.path)

                    return (
                      <Link
                        key={item.path}
                        to={item.path}
                        className={`
                          flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium transition-colors
                          ${active
                            ? 'bg-gray-100 text-[#6366F1]'
                            : 'text-gray-700 hover:bg-gray-100'
                          }
                        `}
                      >
                        <Icon className="w-5 h-5" />
                        <span>{item.label}</span>
                      </Link>
                    )})}
                  <button
                    onClick={async () => {
                      await signOut()
                      // Redirect to landing page after sign out
                      navigate('/')
                    }}
                    className="flex items-center gap-3 px-3 py-2.5 rounded-lg text-sm font-medium text-red-600 hover:bg-red-50 hover:text-red-700 transition-colors w-full text-left"
                  >
                    <FaSignOutAlt className="w-5 h-5 text-red-600" />
                    <span>ƒêƒÉng xu·∫•t</span>
                  </button>
                </nav>
              </div>
            </div>
          </aside>

          <main className="flex-1 ml-64">
            <Outlet />
          </main>
        </div>
      </div>
    </>
  )
}
</file>

<file path="src/components/layout/Footer.tsx">
import { Link } from 'react-router-dom'
import { FaFacebook, FaInstagram, FaTiktok, FaYoutube, FaLinkedin, FaPhone, FaEnvelope, FaMapMarkerAlt } from 'react-icons/fa'

export default function Footer() {
  return (
    <footer className="relative pt-20 pb-8 bg-white border-t border-black/5">
      <div className="max-w-7xl mx-auto px-6">
        <div className="grid md:grid-cols-5 gap-12 mb-8">
          <div className="space-y-4">
            <div className="flex items-center gap-3">
              <img
                src="/logo/logo.png"
                alt="ALINO"
                className="w-7 h-7"
              />
              <span className="font-semibold text-lg tracking-tight bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
                ALINO
              </span>
            </div>
            <p className="text-sm text-[#6B7280] leading-relaxed">
              N·ªÅn t·∫£ng h·ª£p t√°c cho Creator v√† Brand chuy√™n nghi·ªáp.
            </p>
            <div className="flex items-center gap-4 pt-2">
              <a
                href="https://facebook.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#1877F2] transition-colors hover:scale-110 transform duration-200"
              >
                <FaFacebook size={20} />
              </a>
              <a
                href="https://instagram.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#DD2A7B] transition-colors hover:scale-110 transform duration-200"
              >
                <FaInstagram size={20} />
              </a>
              <a
                href="https://tiktok.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#000000] transition-colors hover:scale-110 transform duration-200"
              >
                <FaTiktok size={20} />
              </a>
              <a
                href="https://youtube.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#FF0000] transition-colors hover:scale-110 transform duration-200"
              >
                <FaYoutube size={20} />
              </a>
              <a
                href="https://linkedin.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#0A66C2] transition-colors hover:scale-110 transform duration-200"
              >
                <FaLinkedin size={20} />
              </a>
            </div>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">S·∫£n ph·∫©m</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li>
                <a href="#product" className="hover:text-[#6366F1] transition-colors">
                  T√≠nh nƒÉng
                </a>
              </li>
              <li>
                <a href="#pricing" className="hover:text-[#6366F1] transition-colors">
                  B·∫£ng gi√°
                </a>
              </li>
              <li>
                <a href="#how-it-works" className="hover:text-[#6366F1] transition-colors">
                  C√°ch ho·∫°t ƒë·ªông
                </a>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">C√¥ng ty</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li>
                <a href="#about" className="hover:text-[#6366F1] transition-colors">
                  V·ªÅ ch√∫ng t√¥i
                </a>
              </li>
              <li>
                <a href="#news" className="hover:text-[#6366F1] transition-colors">
                  Tin t·ª©c
                </a>
              </li>
              <li>
                <a href="#contact" className="hover:text-[#6366F1] transition-colors">
                  Li√™n h·ªá
                </a>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">Ph√°p l√Ω</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li>
                <Link to="/terms" className="hover:text-[#6366F1] transition-colors">
                  ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng
                </Link>
              </li>
              <li>
                <Link to="/privacy" className="hover:text-[#6366F1] transition-colors">
                  Ch√≠nh s√°ch b·∫£o m·∫≠t
                </Link>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">Li√™n h·ªá</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li className="flex items-start gap-3">
                <FaPhone className="mt-0.5 flex-shrink-0" size={16} />
                <a href="tel:+84707970216" className="hover:text-[#6366F1] transition-colors">
                  +84 707 970 216
                </a>
              </li>
              <li className="flex items-start gap-3">
                <FaEnvelope className="mt-0.5 flex-shrink-0" size={16} />
                <a href="mailto:contact@alino.net" className="hover:text-[#6366F1] transition-colors">
                  contact@alino.net
                </a>
              </li>
              <li className="flex items-start gap-3 leading-relaxed">
                <FaMapMarkerAlt className="mt-0.5 flex-shrink-0" size={16} />
                <span>
                  Landmark 81
                  <br />
                  720A ƒêi·ªán Bi√™n Ph·ªß, Ph∆∞·ªùng 22, Qu·∫≠n B√¨nh Th·∫°nh, TP. H·ªì Ch√≠ Minh, Vi·ªát Nam
                </span>
              </li>
            </ul>
          </div>
        </div>

        <div className="pt-8 border-t border-black/5 text-center text-sm text-[#9CA3AF]">
          ¬© 2025 ALINO. All rights reserved.
        </div>
      </div>
    </footer>
  )
}
</file>

<file path="src/components/shared/Toast.tsx">
import { useEffect } from 'react'
import type { ToastType } from '../../types/toast'

interface ToastProps {
  message: string
  type: ToastType
  onClose: () => void
  duration?: number
}

export default function Toast({ message, type, onClose, duration = 3000 }: ToastProps) {
  useEffect(() => {
    const timer = setTimeout(() => {
      onClose()
    }, duration)

    return () => clearTimeout(timer)
  }, [duration, onClose])

  return (
    <div className="fixed top-4 right-4 z-50" style={{ animation: 'slideIn 0.3s ease-out' }}>
      <div
        className={`px-4 py-3 rounded-lg shadow-lg flex items-center gap-3 min-w-[300px] ${
          type === 'success'
            ? 'bg-green-50 border border-green-200 text-green-800'
            : 'bg-red-50 border border-red-200 text-red-800'
        }`}
      >
        {type === 'success' ? (
          <svg className="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        ) : (
          <svg className="w-5 h-5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
        )}
        <span className="text-sm font-medium">{message}</span>
      </div>
    </div>
  )
}
</file>

<file path="src/contexts/AuthContext.tsx">
import { createContext, useContext, ReactNode } from 'react'
import type { Session } from '@supabase/supabase-js'
import { useAuthState } from '../hooks/useAuthState'
import { useAuthOperations } from '../hooks/useAuthOperations'
import { getUserFromSession, isUserAuthenticated } from '../utils/authHelpers'

/**
 * AuthContextType: Public API for authentication state and operations
 * 
 * This interface defines what components can access from the auth context.
 * All external code should depend only on this interface.
 */
export interface AuthContextType {
  session: Session | null
  user: Session['user'] | null
  loading: boolean
  isAuthenticated: boolean
  signOut: () => Promise<void>
}

const AuthContext = createContext<AuthContextType | undefined>(undefined)

/**
 * AuthProvider: Wires auth state and operations, exposes public API
 * 
 * Responsibilities:
 * - Composes useAuthState and useAuthOperations
 * - Derives computed values (user, isAuthenticated)
 * - Provides context value to children
 * - Does NOT handle routing/navigation (that's handled by components)
 */
export function AuthProvider({ children }: { children: ReactNode }) {
  const { session, loading } = useAuthState()
  const { signOut } = useAuthOperations()

  const value: AuthContextType = {
    session,
    user: getUserFromSession(session),
    loading,
    isAuthenticated: isUserAuthenticated(session),
    signOut,
  }

  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>
}

/**
 * useAuth: Hook to access auth context
 * 
 * Rules:
 * - ONLY reads from AuthContext
 * - NEVER manages its own state
 * - NEVER calls useNavigate() or handles routing
 * - Returns stable session state from context
 */
export function useAuth() {
  const context = useContext(AuthContext)
  if (context === undefined) {
    throw new Error('useAuth must be used within an AuthProvider')
  }
  return context
}
</file>

<file path="src/pages/brand/dashboard/BrandCampaignAnalyticsPage.tsx">
import { useState, useRef, useEffect } from 'react'
import { FaDownload, FaCalendarAlt, FaChevronDown, FaArrowDown, FaArrowUp } from 'react-icons/fa'
import { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'

const MOCK_CAMPAIGN_PROGRESS = [
  { month: 'Jan', progress: 65 },
  { month: 'Feb', progress: 70 },
  { month: 'Mar', progress: 75 },
  { month: 'Apr', progress: 82 },
  { month: 'May', progress: 88 },
  { month: 'Jun', progress: 92 },
]

const MOCK_RESPONSE_TIME = [
  { creator: 'Creator A', time: 22 },
  { creator: 'Creator B', time: 18 },
  { creator: 'Creator C', time: 15 },
  { creator: 'Creator D', time: 12 },
  { creator: 'Creator E', time: 20 },
]

const MOCK_APPROVAL_CYCLE = [
  { name: 'Draft Review', value: 50, color: '#1F2937' },
  { name: 'Feedback Rounds', value: 30, color: '#4B5563' },
  { name: 'Final Approval', value: 20, color: '#6B7280' },
]

const MOCK_COMPLETION_TREND = [
  { date: 'Jan 01', rate: 78 },
  { date: 'Feb 01', rate: 80 },
  { date: 'Mar 01', rate: 83 },
  { date: 'Apr 01', rate: 86 },
  { date: 'May 01', rate: 89 },
  { date: 'Jun 01', rate: 92 },
]

export default function BrandCampaignAnalyticsPage() {
  const [dateRange, setDateRange] = useState('Nov 29, 2025 - Dec 29, 2025')
  const [datePickerOpen, setDatePickerOpen] = useState(false)
  const datePickerRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (datePickerRef.current && !datePickerRef.current.contains(event.target as Node)) {
        setDatePickerOpen(false)
      }
    }
    document.addEventListener('mousedown', handleClickOutside)
    return () => document.removeEventListener('mousedown', handleClickOutside)
  }, [])

  const handleExport = () => {
    const csvContent = `Metric,Value
Active Campaigns,4
Avg Creator Response Time,18 hours
Approval Rate,85%
Campaign Completion Rate,92%`
    const blob = new Blob([csvContent], { type: 'text/csv' })
    const url = window.URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url
    a.download = 'campaign-analytics-report.csv'
    a.click()
    window.URL.revokeObjectURL(url)
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <div className="mb-8">
            <div className="flex items-center justify-between">
              <div>
                <h1 className="text-3xl font-bold text-gray-900 mb-2">Campaign Analytics</h1>
                <p className="text-gray-600">Overview of your campaign performance and creator engagement.</p>
              </div>
              <div className="flex items-center gap-4">
                <div className="relative" ref={datePickerRef}>
                  <button
                    onClick={() => setDatePickerOpen(!datePickerOpen)}
                    className="flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                  >
                    <FaCalendarAlt className="w-4 h-4" />
                    <span>{dateRange}</span>
                    <FaChevronDown className="w-3 h-3" />
                  </button>
                  {datePickerOpen && (
                    <div className="absolute right-0 mt-2 w-64 bg-white border border-gray-200 rounded-lg shadow-lg z-10 p-4">
                      <input
                        type="date"
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg mb-2"
                        onChange={(e) => {
                          const startDate = e.target.value
                          setDateRange(`${startDate} - ${dateRange.split(' - ')[1]}`)
                        }}
                      />
                      <input
                        type="date"
                        className="w-full px-3 py-2 border border-gray-300 rounded-lg"
                        onChange={(e) => {
                          const endDate = e.target.value
                          setDateRange(`${dateRange.split(' - ')[0]} - ${endDate}`)
                        }}
                      />
                    </div>
                  )}
                </div>
                <button
                  onClick={handleExport}
                  className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
                >
                  <FaDownload className="w-4 h-4" />
                  <span>Export Report</span>
                </button>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="text-sm text-gray-600 mb-2">Active Campaigns</div>
              <div className="text-3xl font-bold text-gray-900 mb-1">4</div>
              <div className="text-sm text-green-600 flex items-center gap-1">
                <FaArrowUp className="w-3 h-3" />
                <span>+2 since last month</span>
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="text-sm text-gray-600 mb-2">Avg. Creator Response Time</div>
              <div className="text-3xl font-bold text-gray-900 mb-1">18 hours</div>
              <div className="text-sm text-red-600 flex items-center gap-1">
                <FaArrowDown className="w-3 h-3" />
                <span>‚Üì10% from previous period</span>
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="text-sm text-gray-600 mb-2">Approval Rate</div>
              <div className="text-3xl font-bold text-gray-900 mb-1">85%</div>
              <div className="text-sm text-gray-600">Steady over last 30 days</div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="text-sm text-gray-600 mb-2">Campaign Completion Rate</div>
              <div className="text-3xl font-bold text-gray-900 mb-1">92%</div>
              <div className="text-sm text-green-600 flex items-center gap-1">
                <FaArrowUp className="w-3 h-3" />
                <span>‚Üë5% this quarter</span>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Campaign Progress Over Time</h2>
              <ResponsiveContainer width="100%" height={300}>
                <LineChart data={MOCK_CAMPAIGN_PROGRESS}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                  <XAxis dataKey="month" stroke="#6b7280" />
                  <YAxis domain={[64, 96]} stroke="#6b7280" />
                  <Tooltip />
                  <Legend />
                  <Line type="monotone" dataKey="progress" stroke="#3B82F6" strokeWidth={2} name="Progress" dot={{ fill: '#3B82F6' }} />
                </LineChart>
              </ResponsiveContainer>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Average Creator Response Time</h2>
              <ResponsiveContainer width="100%" height={300}>
                <BarChart data={MOCK_RESPONSE_TIME}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                  <XAxis dataKey="creator" stroke="#6b7280" />
                  <YAxis domain={[0, 24]} stroke="#6b7280" />
                  <Tooltip />
                  <Legend />
                  <Bar dataKey="time" fill="#EC4899" name="Avg. Time" />
                </BarChart>
              </ResponsiveContainer>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Approval Cycle Breakdown</h2>
              <ResponsiveContainer width="100%" height={300}>
                <PieChart>
                  <Pie
                    data={MOCK_APPROVAL_CYCLE}
                    cx="50%"
                    cy="50%"
                    innerRadius={60}
                    outerRadius={100}
                    paddingAngle={5}
                    dataKey="value"
                  >
                    {MOCK_APPROVAL_CYCLE.map((entry, index) => (
                      <Cell key={`cell-${index}`} fill={entry.color} />
                    ))}
                  </Pie>
                  <Tooltip />
                  <Legend />
                </PieChart>
              </ResponsiveContainer>
              <div className="mt-4 space-y-2">
                {MOCK_APPROVAL_CYCLE.map((item, index) => (
                  <div key={index} className="flex items-center justify-between text-sm">
                    <div className="flex items-center gap-2">
                      <div className="w-4 h-4 rounded" style={{ backgroundColor: item.color }} />
                      <span className="text-gray-700">{item.name}</span>
                    </div>
                    <span className="font-medium text-gray-900">{item.value}%</span>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-6">Campaign Completion Rate Trend</h2>
              <ResponsiveContainer width="100%" height={300}>
                <AreaChart data={MOCK_COMPLETION_TREND}>
                  <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                  <XAxis dataKey="date" stroke="#6b7280" />
                  <YAxis domain={[0, 100]} stroke="#6b7280" />
                  <Tooltip />
                  <Legend />
                  <Area type="monotone" dataKey="rate" stroke="#EF4444" fill="#EC4899" fillOpacity={0.6} name="Completion Rate" />
                </AreaChart>
              </ResponsiveContainer>
            </div>
          </div>
        </div>
      </div>
  )
}
</file>

<file path="src/pages/brand/profile/ProfilePage.tsx">
import { useState, useEffect } from 'react'
import { useAuth } from '../../../hooks/useAuth'
import { useProfile } from '../../../hooks/useProfile'
import { getSupabase } from '../../../lib/supabase'
import AvatarUpload from '../../../components/AvatarUpload/AvatarUpload'
import Toast from '../../../components/shared/Toast'
import { LoadingState, NotFoundState } from '../../../components/shared/LoadingState'
import type { ToastState } from '../../../types/toast'
import { FaPaperPlane, FaFileAlt, FaClock, FaBuilding, FaIndustry, FaUsers, FaDollarSign } from 'react-icons/fa'

type TabType = 'overview' | 'campaigns' | 'analytics' | 'settings'

export default function ProfilePage() {
  const { session } = useAuth()
  const { profile, loading: profileLoading } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const [activeTab, setActiveTab] = useState<TabType>('overview')
  const [loading, setLoading] = useState(false)
  const [toast, setToast] = useState<ToastState | null>(null)
  const supabase = getSupabase()

  // Form state
  const [formData, setFormData] = useState({
    brand_name: '',
    avatar_url: '',
    industry: '',
    company_size: '',
    bio: '',
    website: '',
    response_time: '24 hours',
    monthly_marketing_budget: 0,
  })

  useEffect(() => {
    if (profile && profile.role === 'brand') {
      const brandProfile = profile as any
      setFormData({
        brand_name: brandProfile.brand_name || '',
        avatar_url: brandProfile.avatar_url || '',
        industry: brandProfile.industry || '',
        company_size: brandProfile.company_size || '',
        bio: brandProfile.bio || '',
        website: brandProfile.website || '',
        response_time: brandProfile.response_time || '24 hours',
        monthly_marketing_budget: brandProfile.monthly_marketing_budget || 0,
      })
    }
  }, [profile])

  const handleSave = async () => {
    if (!session || !profile) return

    setLoading(true)
    try {
      const { error } = await supabase
        .from('brand_profiles')
        .update({
          brand_name: formData.brand_name,
          avatar_url: formData.avatar_url,
          industry: formData.industry,
          company_size: formData.company_size,
          bio: formData.bio,
          website: formData.website,
          response_time: formData.response_time,
          monthly_marketing_budget: formData.monthly_marketing_budget,
          updated_at: new Date().toISOString(),
        })
        .eq('user_id', session.user.id)

      if (error) throw error

      setToast({ message: 'L∆∞u h·ªì s∆° th√†nh c√¥ng', type: 'success' })
    } catch (err: any) {
      setToast({ message: err.message || 'C√≥ l·ªói x·∫£y ra', type: 'error' })
    } finally {
      setLoading(false)
    }
  }

  const handleAvatarChange = async (url: string) => {
    setFormData({ ...formData, avatar_url: url })
    if (!session || !profile) return

    try {
      const { error } = await supabase
        .from('brand_profiles')
        .update({ avatar_url: url, updated_at: new Date().toISOString() })
        .eq('user_id', session.user.id)

      if (error) throw error
      setToast({ message: 'ƒê√£ l∆∞u avatar th√†nh c√¥ng', type: 'success' })
    } catch (error: any) {
      setToast({ message: error.message || 'C√≥ l·ªói x·∫£y ra', type: 'error' })
    }
  }

  if (profileLoading) {
    return <LoadingState />
  }

  if (!profile || profile.role !== 'brand') {
    return <NotFoundState message="Kh√¥ng t√¨m th·∫•y h·ªì s∆°" />
  }

  const brandProfile = profile as any
  const displayName = formData.brand_name || brandProfile.brand_name || 'Brand'
  const companySizeLabels: Record<string, string> = {
    startup: 'Startup (1-10 nh√¢n vi√™n)',
    small: 'Nh·ªè (11-50 nh√¢n vi√™n)',
    medium: 'V·ª´a (51-200 nh√¢n vi√™n)',
    large: 'L·ªõn (201-1000 nh√¢n vi√™n)',
    enterprise: 'Doanh nghi·ªáp (1000+ nh√¢n vi√™n)',
  }

  return (
    <div className="bg-gray-50 py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-8">
          
          {/* Left Sidebar - Profile Card */}
          <div className="lg:col-span-1">
            <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
              {/* Profile Header */}
              <div className="text-center mb-6">
                <div className="relative inline-block mb-4">
                  {formData.avatar_url ? (
                    <img
                      src={formData.avatar_url}
                      alt={displayName}
                      className="w-24 h-24 rounded-full object-cover mx-auto"
                    />
                  ) : (
                    <div className="w-24 h-24 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] mx-auto flex items-center justify-center text-white text-3xl font-bold">
                      {displayName.charAt(0).toUpperCase()}
                    </div>
                  )}
                </div>
                <div className="mb-2">
                  <AvatarUpload
                    currentAvatarUrl={formData.avatar_url}
                    onAvatarChange={handleAvatarChange}
                    userId={session?.user?.id || ''}
                  />
                </div>
                <h2 className="text-2xl font-bold text-gray-900 mb-1">{displayName}</h2>
                <p className="text-sm text-gray-600 mb-2">Brand Profile</p>
                <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
                  Active
                </span>
              </div>

              {/* Action Buttons */}
              <div className="space-y-3 mb-6">
                <button className="w-full px-4 py-2.5 rounded-lg font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                  <FaPaperPlane className="w-4 h-4" />
                  Create Campaign
                </button>
                <button className="w-full px-4 py-2.5 rounded-lg font-medium text-gray-700 border border-gray-300 hover:bg-gray-50 transition-colors flex items-center justify-center gap-2">
                  <FaFileAlt className="w-4 h-4" />
                  Browse Creators
                </button>
              </div>

              {/* Response Time */}
              <div className="flex items-center gap-2 text-sm text-gray-600 mb-6">
                <FaClock className="w-4 h-4" />
                <span>Typically responds within {formData.response_time}</span>
              </div>

              {/* About Us */}
              <div className="mb-6">
                <h3 className="font-semibold text-gray-900 mb-2">About Us</h3>
                <textarea
                  value={formData.bio}
                  onChange={(e) => setFormData({ ...formData, bio: e.target.value })}
                  placeholder="Tell creators about your brand, mission, and what you're looking for..."
                  className="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg resize-none focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                  rows={4}
                />
              </div>

              {/* Company Info */}
              <div className="mb-6 space-y-3">
                <div>
                  <label className="block text-xs font-medium text-gray-700 mb-1">Industry</label>
                  <div className="flex items-center gap-2">
                    <FaIndustry className="w-4 h-4 text-gray-500" />
                    <input
                      type="text"
                      value={formData.industry}
                      onChange={(e) => setFormData({ ...formData, industry: e.target.value })}
                      placeholder="Industry"
                      className="flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    />
                  </div>
                </div>
                <div>
                  <label className="block text-xs font-medium text-gray-700 mb-1">Company Size</label>
                  <select
                    value={formData.company_size}
                    onChange={(e) => setFormData({ ...formData, company_size: e.target.value })}
                    className="w-full px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                  >
                    <option value="">Select size</option>
                    {Object.entries(companySizeLabels).map(([value, label]) => (
                      <option key={value} value={value}>{label}</option>
                    ))}
                  </select>
                </div>
                <div>
                  <label className="block text-xs font-medium text-gray-700 mb-1">Website</label>
                  <div className="flex items-center gap-2">
                    <FaBuilding className="w-4 h-4 text-gray-500" />
                    <input
                      type="url"
                      value={formData.website}
                      onChange={(e) => setFormData({ ...formData, website: e.target.value })}
                      placeholder="Company Website"
                      className="flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    />
                  </div>
                </div>
              </div>

              {/* Marketing Budget */}
              <div className="mb-6">
                <h3 className="font-semibold text-gray-900 mb-3">Marketing Budget</h3>
                <div className="flex items-center gap-2">
                  <FaDollarSign className="w-4 h-4 text-gray-500" />
                  <input
                    type="number"
                    value={formData.monthly_marketing_budget || ''}
                    onChange={(e) => setFormData({ ...formData, monthly_marketing_budget: parseFloat(e.target.value) || 0 })}
                    placeholder="Monthly Budget (USD)"
                    className="flex-1 px-3 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                  />
                </div>
              </div>

              {/* Save Button */}
              <button
                onClick={handleSave}
                disabled={loading}
                className="w-full mt-6 px-4 py-2.5 rounded-lg font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 disabled:opacity-50 transition-opacity"
              >
                {loading ? 'ƒêang l∆∞u...' : 'L∆∞u thay ƒë·ªïi'}
              </button>
            </div>
          </div>

          {/* Right Main Content */}
          <div className="lg:col-span-2">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              {/* Page Title */}
              <h1 className="text-3xl font-bold text-gray-900 mb-6">{displayName}'s Profile</h1>

              {/* Navigation Tabs */}
              <div className="border-b border-gray-200 mb-6">
                <nav className="flex space-x-8">
                  {(['overview', 'campaigns', 'analytics', 'settings'] as TabType[]).map((tab) => (
                    <button
                      key={tab}
                      onClick={() => setActiveTab(tab)}
                      className={`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${
                        activeTab === tab
                          ? 'border-[#6366F1] text-[#6366F1]'
                          : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'
                      }`}
                    >
                      {tab === 'overview' ? 'Overview' :
                       tab === 'campaigns' ? 'Campaigns' :
                       tab === 'analytics' ? 'Analytics' :
                       'Settings'}
                    </button>
                  ))}
                </nav>
              </div>

              {/* Tab Content */}
              <div>
                {activeTab === 'overview' && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-4">Overview</h2>
                    <p className="text-gray-600">Welcome to {displayName}'s profile. Manage campaigns, view analytics, and connect with creators.</p>
                  </div>
                )}

                {activeTab === 'campaigns' && (
                  <div>
                    <div className="flex items-center justify-between mb-6">
                      <div>
                        <h2 className="text-2xl font-semibold text-gray-900 mb-2">Active Campaigns</h2>
                        <p className="text-gray-600">Manage your marketing campaigns and collaborations.</p>
                      </div>
                      <button className="px-4 py-2 rounded-lg font-medium text-[#6366F1] border border-[#6366F1] hover:bg-[#6366F1]/10 transition-colors">
                        + New Campaign
                      </button>
                    </div>
                    <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                      <div className="border border-gray-200 rounded-lg p-4">
                        <p className="text-sm text-gray-500">Campaigns will be displayed here</p>
                      </div>
                    </div>
                  </div>
                )}

                {activeTab === 'analytics' && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-4">Analytics</h2>
                    <p className="text-gray-600">Campaign performance and engagement metrics will be displayed here.</p>
                  </div>
                )}

                {activeTab === 'settings' && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-4">Settings</h2>
                    <p className="text-gray-600">Account and profile settings will be displayed here.</p>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>
      </div>

      {/* Toast Notification */}
      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  )
}
</file>

<file path="src/pages/creator/dashboard/AnalyticsPage.tsx">
import { useState, useEffect, useRef } from 'react'
import { FaEye, FaLock, FaSyncAlt, FaCheckCircle, FaDownload, FaChevronDown, FaTimes } from 'react-icons/fa'
import { LineChart, Line, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts'

interface MetricCard {
  id: string
  label: string
  value: string | number
  change: number
  icon: React.ReactNode
}

type DateRange = '7days' | '30days' | '90days' | 'custom'

const MOCK_DATA_7DAYS = {
  profileViews: { value: 12450, change: 15.2 },
  pricingUnlocks: { value: 2300, change: 8.1 },
  proposalConversion: { value: 65, change: 2.5 },
  dealCompletion: { value: 92, change: -0.5 },
  profileViewsOverTime: [
    { month: 'Jan', views: 10000 },
    { month: 'Feb', views: 10500 },
    { month: 'Mar', views: 9800 },
    { month: 'Apr', views: 10200 },
    { month: 'May', views: 11500 },
    { month: 'Jun', views: 12460 },
  ],
  proposalData: [
    { month: 'Jan', proposals: 60, deals: 40 },
    { month: 'Feb', proposals: 65, deals: 42 },
    { month: 'Mar', proposals: 70, deals: 45 },
    { month: 'Apr', proposals: 68, deals: 44 },
    { month: 'May', proposals: 75, deals: 48 },
    { month: 'Jun', proposals: 72, deals: 50 },
  ],
}

const MOCK_DATA_30DAYS = {
  profileViews: { value: 12450, change: 15.2 },
  pricingUnlocks: { value: 2300, change: 8.1 },
  proposalConversion: { value: 65, change: 2.5 },
  dealCompletion: { value: 92, change: -0.5 },
  profileViewsOverTime: [
    { month: 'Jan', views: 10000 },
    { month: 'Feb', views: 10500 },
    { month: 'Mar', views: 9800 },
    { month: 'Apr', views: 10200 },
    { month: 'May', views: 11500 },
    { month: 'Jun', views: 12460 },
  ],
  proposalData: [
    { month: 'Jan', proposals: 60, deals: 40 },
    { month: 'Feb', proposals: 65, deals: 42 },
    { month: 'Mar', proposals: 70, deals: 45 },
    { month: 'Apr', proposals: 68, deals: 44 },
    { month: 'May', proposals: 75, deals: 48 },
    { month: 'Jun', proposals: 72, deals: 50 },
  ],
}

const MOCK_DATA_90DAYS = {
  profileViews: { value: 12450, change: 15.2 },
  pricingUnlocks: { value: 2300, change: 8.1 },
  proposalConversion: { value: 65, change: 2.5 },
  dealCompletion: { value: 92, change: -0.5 },
  profileViewsOverTime: [
    { month: 'Jan', views: 10000 },
    { month: 'Feb', views: 10500 },
    { month: 'Mar', views: 9800 },
    { month: 'Apr', views: 10200 },
    { month: 'May', views: 11500 },
    { month: 'Jun', views: 12460 },
  ],
  proposalData: [
    { month: 'Jan', proposals: 60, deals: 40 },
    { month: 'Feb', proposals: 65, deals: 42 },
    { month: 'Mar', proposals: 70, deals: 45 },
    { month: 'Apr', proposals: 68, deals: 44 },
    { month: 'May', proposals: 75, deals: 48 },
    { month: 'Jun', proposals: 72, deals: 50 },
  ],
}

export default function AnalyticsPage() {
  const [dateRange, setDateRange] = useState<DateRange>('30days')
  const [dateRangeDropdownOpen, setDateRangeDropdownOpen] = useState(false)
  const [customDateModalOpen, setCustomDateModalOpen] = useState(false)
  const [customDateFrom, setCustomDateFrom] = useState('')
  const [customDateTo, setCustomDateTo] = useState('')
  const dropdownRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
        setDateRangeDropdownOpen(false)
        setCustomDateModalOpen(false)
      }
    }

    document.addEventListener('mousedown', handleClickOutside)
    return () => document.removeEventListener('mousedown', handleClickOutside)
  }, [])

  const getData = () => {
    switch (dateRange) {
      case '7days':
        return MOCK_DATA_7DAYS
      case '30days':
        return MOCK_DATA_30DAYS
      case '90days':
        return MOCK_DATA_90DAYS
      default:
        return MOCK_DATA_30DAYS
    }
  }

  const data = getData()

  const metrics: MetricCard[] = [
    {
      id: '1',
      label: 'L∆∞·ª£t xem h·ªì s∆°',
      value: data.profileViews.value.toLocaleString('vi-VN'),
      change: data.profileViews.change,
      icon: <FaEye className="w-5 h-5 text-gray-400" />,
    },
    {
      id: '2',
      label: 'L·∫ßn m·ªü kh√≥a b·∫£ng gi√°',
      value: data.pricingUnlocks.value.toLocaleString('vi-VN'),
      change: data.pricingUnlocks.change,
      icon: <FaLock className="w-5 h-5 text-gray-400" />,
    },
    {
      id: '3',
      label: 'T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi ƒë·ªÅ xu·∫•t',
      value: `${data.proposalConversion.value}%`,
      change: data.proposalConversion.change,
      icon: <FaSyncAlt className="w-5 h-5 text-gray-400" />,
    },
    {
      id: '4',
      label: 'T·ª∑ l·ªá ho√†n th√†nh th·ªèa thu·∫≠n',
      value: `${data.dealCompletion.value}%`,
      change: data.dealCompletion.change,
      icon: <FaCheckCircle className="w-5 h-5 text-gray-400" />,
    },
  ]

  const handleExport = () => {
    const csvContent = `Metric,Value,Change
Profile Views,${data.profileViews.value},${data.profileViews.change}%
Pricing Unlocks,${data.pricingUnlocks.value},${data.pricingUnlocks.change}%
Proposal Conversion,${data.proposalConversion.value}%,${data.proposalConversion.change}%
Deal Completion,${data.dealCompletion.value}%,${data.dealCompletion.change}%`
    const blob = new Blob([csvContent], { type: 'text/csv' })
    const url = window.URL.createObjectURL(blob)
    const a = document.createElement('a')
    a.href = url
    a.download = `analytics-report-${dateRange}.csv`
    a.click()
    window.URL.revokeObjectURL(url)
  }

  const getDateRangeLabel = () => {
    switch (dateRange) {
      case '7days':
        return '7 ng√†y qua'
      case '30days':
        return '30 ng√†y qua'
      case '90days':
        return '90 ng√†y qua'
      case 'custom':
        if (customDateFrom && customDateTo) {
          // Format dates for display (DD/MM/YYYY)
          const formatDate = (dateString: string) => {
            const date = new Date(dateString)
            const day = date.getDate().toString().padStart(2, '0')
            const month = (date.getMonth() + 1).toString().padStart(2, '0')
            const year = date.getFullYear()
            return `${day}/${month}/${year}`
          }
          return `${formatDate(customDateFrom)} - ${formatDate(customDateTo)}`
        }
        return 'T√πy ch·ªçn'
      default:
        return '30 ng√†y qua'
    }
  }

  const handleCustomDateApply = () => {
    if (customDateFrom && customDateTo) {
      setDateRange('custom')
      setCustomDateModalOpen(false)
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="mb-8">
          <div className="flex items-center justify-between">
            <h1 className="text-3xl font-bold text-gray-900">Ph√¢n t√≠ch Creator</h1>
            <div className="flex items-center gap-3">
              <button
                onClick={handleExport}
                className="flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
              >
                <FaDownload className="w-3.5 h-3.5" />
                <span>Xu·∫•t b√°o c√°o</span>
              </button>
              <div className="relative" ref={dropdownRef}>
                <button
                  onClick={() => setDateRangeDropdownOpen(!dateRangeDropdownOpen)}
                  className="flex items-center gap-1.5 px-3 py-1.5 text-sm border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                >
                  <span>{getDateRangeLabel()}</span>
                  <FaChevronDown className="w-3 h-3" />
                </button>
                {dateRangeDropdownOpen && (
                  <div className="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-10">
                    <button
                      onClick={() => {
                        setDateRange('7days')
                        setDateRangeDropdownOpen(false)
                      }}
                      className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors"
                    >
                      7 ng√†y qua
                    </button>
                    <button
                      onClick={() => {
                        setDateRange('30days')
                        setDateRangeDropdownOpen(false)
                      }}
                      className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors"
                    >
                      30 ng√†y qua
                    </button>
                    <button
                      onClick={() => {
                        setDateRange('90days')
                        setDateRangeDropdownOpen(false)
                      }}
                      className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors"
                    >
                      90 ng√†y qua
                    </button>
                    <div className="border-t border-gray-200 my-1" />
                    <button
                      onClick={() => {
                        setCustomDateModalOpen(true)
                        setDateRangeDropdownOpen(false)
                      }}
                      className="w-full px-4 py-2 text-left text-sm hover:bg-gray-50 transition-colors"
                    >
                      T√πy ch·ªçn
                    </button>
                  </div>
                )}
                
                {/* Custom Date Range Popover */}
                {customDateModalOpen && (
                  <div className="absolute right-0 mt-2 w-72 bg-white border border-gray-200 rounded-lg shadow-lg z-10">
                    <div className="p-4">
                      <div className="flex items-center justify-between mb-4">
                        <h3 className="text-sm font-semibold text-gray-900">Ch·ªçn kho·∫£ng th·ªùi gian</h3>
                        <button
                          onClick={() => {
                            setCustomDateModalOpen(false)
                            setCustomDateFrom('')
                            setCustomDateTo('')
                          }}
                          className="p-1 hover:bg-gray-100 rounded-lg transition-colors"
                        >
                          <FaTimes className="w-3.5 h-3.5 text-gray-500" />
                        </button>
                      </div>
                      <div className="space-y-3">
                        <div>
                          <label className="block text-xs font-medium text-gray-700 mb-1.5">T·ª´</label>
                          <input
                            type="date"
                            value={customDateFrom}
                            onChange={(e) => setCustomDateFrom(e.target.value)}
                            className="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                          />
                        </div>
                        <div>
                          <label className="block text-xs font-medium text-gray-700 mb-1.5">ƒê·∫øn</label>
                          <input
                            type="date"
                            value={customDateTo}
                            onChange={(e) => setCustomDateTo(e.target.value)}
                            min={customDateFrom}
                            className="w-full px-3 py-2 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                          />
                        </div>
                      </div>
                      <div className="flex items-center justify-end gap-2 mt-4">
                        <button
                          onClick={() => {
                            setCustomDateModalOpen(false)
                            setCustomDateFrom('')
                            setCustomDateTo('')
                          }}
                          className="px-3 py-1.5 text-xs border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                        >
                          H·ªßy
                        </button>
                        <button
                          onClick={handleCustomDateApply}
                          disabled={!customDateFrom || !customDateTo}
                          className="px-3 py-1.5 text-xs bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"
                        >
                          √Åp d·ª•ng
                        </button>
                      </div>
                    </div>
                  </div>
                )}
              </div>
            </div>
          </div>
        </div>

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          {metrics.map((metric) => (
            <div key={metric.id} className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-4">
                <div className="text-sm text-gray-600">{metric.label}</div>
                {metric.icon}
              </div>
              <div className="text-3xl font-bold text-gray-900 mb-2">{metric.value}</div>
              <div className={`text-sm font-medium ${metric.change >= 0 ? 'text-green-600' : 'text-red-600'}`}>
                {metric.change >= 0 ? '+' : ''}{metric.change}% so v·ªõi k·ª≥ tr∆∞·ªõc
              </div>
            </div>
          ))}
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-2 gap-6">
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">L∆∞·ª£t xem h·ªì s∆° theo th·ªùi gian</h2>
            <ResponsiveContainer width="100%" height={300}>
              <LineChart data={data.profileViewsOverTime}>
                <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                <XAxis dataKey="month" stroke="#6b7280" />
                <YAxis stroke="#6b7280" />
                <Tooltip />
                <Legend />
                <Line type="monotone" dataKey="views" stroke="#6366F1" strokeWidth={2} name="L∆∞·ª£t xem h·ªì s∆°" />
              </LineChart>
            </ResponsiveContainer>
          </div>

          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-xl font-semibold text-gray-900 mb-6">T·ª∑ l·ªá chuy·ªÉn ƒë·ªïi ƒë·ªÅ xu·∫•t & Ho√†n th√†nh th·ªèa thu·∫≠n</h2>
            <ResponsiveContainer width="100%" height={300}>
              <BarChart data={data.proposalData}>
                <CartesianGrid strokeDasharray="3 3" stroke="#f0f0f0" />
                <XAxis dataKey="month" stroke="#6b7280" />
                <YAxis stroke="#6b7280" />
                <Tooltip />
                <Legend />
                <Bar dataKey="proposals" fill="#EC4899" name="ƒê·ªÅ xu·∫•t ƒë√£ g·ª≠i" />
                <Bar dataKey="deals" fill="#14B8A6" name="Th·ªèa thu·∫≠n ƒë√£ ho√†n th√†nh" />
              </BarChart>
            </ResponsiveContainer>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/creator/dashboard/DashboardHome.tsx">
import { useState } from 'react'
import { Link } from 'react-router-dom'
import { useAuth } from '../../../hooks/useAuth'
import { useProfile } from '../../../hooks/useProfile'
import UpgradePlanModal from '../../../components/shared/UpgradePlanModal'
import { 
  FaEye, 
  FaLock, 
  FaPaperPlane, 
  FaTrophy,
  FaDollarSign,
  FaTimes,
  FaArrowUp,
  FaArrowDown,
  FaCheckCircle,
  FaExclamationCircle
} from 'react-icons/fa'

// Mock data - replace with real API data later
const MOCK_METRICS = {
  profileViews: 8450,
  pricingUnlocks: 24,
  proposalsSent: 15,
  dealsWon: 5,
  totalRevenue: 120000000,
}

const MOCK_ACTIVE_COLLABORATIONS = [
  {
    id: '1',
    campaignName: "Summer Campaign '24",
    brandName: "Aether Apparel",
    status: 'in_progress',
    statusLabel: 'ƒêang th·ª±c hi·ªán',
  },
  {
    id: '2',
    campaignName: "Product Launch Video",
    brandName: "Zenith Innovations",
    status: 'pending',
    statusLabel: 'Ch·ªù ph√™ duy·ªát',
  },
  {
    id: '3',
    campaignName: "Holiday Influencer Series",
    brandName: "Glimmer Cosmetics",
    status: 'in_progress',
    statusLabel: 'ƒêang th·ª±c hi·ªán',
  },
  {
    id: '4',
    campaignName: "Brand Story Reels",
    brandName: "Urban Brew Co.",
    status: 'negotiation',
    statusLabel: 'ƒêang ƒë√†m ph√°n',
  },
]

const MOCK_RECENT_ACTIVITIES = [
  {
    id: '1',
    message: "ƒê·ªÅ xu·∫•t c·ªßa b·∫°n cho 'Summer Campaign '24' ƒë√£ ƒë∆∞·ª£c Aether Apparel ch·∫•p nh·∫≠n.",
    timestamp: "2 ph√∫t tr∆∞·ªõc",
  },
  {
    id: '2',
    message: "Tin nh·∫Øn m·ªõi t·ª´ Zenith Innovations v·ªÅ 'Product Launch Video'.",
    timestamp: "1 gi·ªù tr∆∞·ªõc",
  },
  {
    id: '3',
    message: "Glimmer Cosmetics ƒë√£ xem h·ªì s∆° c·ªßa b·∫°n.",
    timestamp: "H√¥m qua",
  },
  {
    id: '4',
    message: "Th·ªèa thu·∫≠n 'Holiday Influencer Series' ƒë√£ chuy·ªÉn sang tr·∫°ng th√°i ƒêang th·ª±c hi·ªán.",
    timestamp: "2 ng√†y tr∆∞·ªõc",
  },
  {
    id: '5',
    message: "Aether Apparel ƒë√£ m·ªü kh√≥a b·∫£ng gi√° c·ªßa b·∫°n.",
    timestamp: "3 ng√†y tr∆∞·ªõc",
  },
]

const MOCK_OPPORTUNITIES = [
  {
    id: '1',
    campaignTitle: "Fashion Week Collaboration",
    brandName: "Style Co.",
    budgetRange: "5,000,000 - 10,000,000 VNƒê",
    deadline: "C√≤n 5 ng√†y",
    matchScore: 95,
  },
  {
    id: '2',
    campaignTitle: "Beauty Product Launch",
    brandName: "Cosmetics Brand",
    budgetRange: "3,000,000 - 5,000,000 VNƒê",
    deadline: "C√≤n 3 ng√†y",
    matchScore: 88,
  },
]

const MOCK_INSIGHTS = [
  {
    id: '1',
    metric: "TƒÉng tr∆∞·ªüng l∆∞·ª£t xem",
    value: "+25%",
    trend: 'up',
    description: "H·ªì s∆° c·ªßa b·∫°n ƒëang ƒë∆∞·ª£c xem nhi·ªÅu h∆°n so v·ªõi th√°ng tr∆∞·ªõc",
  },
]

export default function DashboardHome() {
  const { session } = useAuth()
  const { profile } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const [showUpgradeBanner, setShowUpgradeBanner] = useState(true)
  const [isUpgradeModalOpen, setIsUpgradeModalOpen] = useState(false)

  // Check if profile is complete (mock logic)
  const profileComplete = profile?.onboarding_completed || false
  const profileProgress = profileComplete ? 100 : 80

  // Mock current plan - replace with real data later
  const currentPlan: 'free' | 'pro' | 'business' = 'free'

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto space-y-8">
        
        {/* Upgrade Banner */}
        {showUpgradeBanner && (
          <div className="bg-pink-50 border border-red-200 rounded-lg p-4 flex items-center justify-between">
            <div className="flex items-center gap-3">
              <FaExclamationCircle className="w-5 h-5 text-red-600 flex-shrink-0" />
              <p className="text-sm text-gray-800">
                M·ªü kh√≥a ph√¢n t√≠ch n√¢ng cao v√† ƒë·ªÅ xu·∫•t kh√¥ng gi·ªõi h·∫°n. N√¢ng c·∫•p g√≥i ngay!
              </p>
            </div>
            <div className="flex items-center gap-3">
              <button
                onClick={() => setIsUpgradeModalOpen(true)}
                className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity"
              >
                N√¢ng c·∫•p ngay
              </button>
              <button
                onClick={() => setShowUpgradeBanner(false)}
                className="text-gray-400 hover:text-gray-600 transition-colors"
              >
                <FaTimes className="w-4 h-4" />
              </button>
            </div>
          </div>
        )}

        {/* Key Metrics */}
        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
          {/* Profile Views */}
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="text-2xl font-bold text-gray-900 mb-1">
                  {MOCK_METRICS.profileViews.toLocaleString('vi-VN')}
                </div>
                <div className="text-xs text-gray-600">L∆∞·ª£t xem h·ªì s∆°</div>
              </div>
              <FaEye className="w-4 h-4 text-gray-400 flex-shrink-0 mt-1" />
            </div>
          </div>

          {/* Pricing Unlocks */}
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="text-2xl font-bold text-gray-900 mb-1">
                  {MOCK_METRICS.pricingUnlocks}
                </div>
                <div className="text-xs text-gray-600">L·∫ßn m·ªü kh√≥a b·∫£ng gi√°</div>
              </div>
              <FaLock className="w-4 h-4 text-gray-400 flex-shrink-0 mt-1" />
            </div>
          </div>

          {/* Proposals Sent */}
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="text-2xl font-bold text-gray-900 mb-1">
                  {MOCK_METRICS.proposalsSent}
                </div>
                <div className="text-xs text-gray-600">ƒê·ªÅ xu·∫•t ƒë√£ g·ª≠i</div>
              </div>
              <FaPaperPlane className="w-4 h-4 text-gray-400 flex-shrink-0 mt-1" />
            </div>
          </div>

          {/* Deals Won */}
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="text-2xl font-bold text-gray-900 mb-1">
                  {MOCK_METRICS.dealsWon}
                </div>
                <div className="text-xs text-gray-600">Th·ªèa thu·∫≠n ƒë√£ k√Ω</div>
              </div>
              <FaTrophy className="w-4 h-4 text-gray-400 flex-shrink-0 mt-1" />
            </div>
          </div>

          {/* Total Revenue */}
          <div className="bg-white rounded-xl border border-gray-200 p-4">
            <div className="flex items-start justify-between">
              <div className="flex-1">
                <div className="text-2xl font-bold text-gray-900 mb-1">
                  {MOCK_METRICS.totalRevenue.toLocaleString('vi-VN')}
                </div>
                <div className="text-xs text-gray-600">T·ªïng doanh thu ƒë√£ k√Ω</div>
              </div>
              <FaDollarSign className="w-4 h-4 text-gray-400 flex-shrink-0 mt-1" />
            </div>
          </div>
        </div>

        {/* Main Content Grid */}
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          
          {/* Left Column - Active Collaborations */}
          <div className="lg:col-span-2 space-y-6">
            
            {/* Active Collaborations */}
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-2">H·ª£p t√°c ƒëang di·ªÖn ra</h2>
              <p className="text-sm text-gray-600 mb-4">
                C√°c chi·∫øn d·ªãch h·ª£p t√°c v·ªõi th∆∞∆°ng hi·ªáu c·ªßa b·∫°n.
              </p>
              
              {MOCK_ACTIVE_COLLABORATIONS.length > 0 ? (
                <div className="space-y-4">
                  {MOCK_ACTIVE_COLLABORATIONS.map((collab) => (
                    <div
                      key={collab.id}
                      className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"
                    >
                      <div className="flex items-start justify-between mb-2">
                        <div>
                          <h3 className="font-medium text-gray-900">{collab.campaignName}</h3>
                          <p className="text-sm text-gray-600">{collab.brandName}</p>
                        </div>
                        <span
                          className={`px-3 py-1 rounded-full text-xs font-medium ${
                            collab.status === 'pending'
                              ? 'bg-purple-100 text-purple-700'
                              : 'bg-gray-100 text-gray-700'
                          }`}
                        >
                          {collab.statusLabel}
                        </span>
                      </div>
                      <Link
                        to="/dashboard/workspace"
                        className="text-sm text-[#6366F1] hover:underline"
                      >
                        Xem chi ti·∫øt
                      </Link>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="text-center py-8">
                  <p className="text-gray-600 mb-2">B·∫°n ch∆∞a c√≥ h·ª£p t√°c n√†o ƒëang di·ªÖn ra</p>
                  <p className="text-sm text-gray-500 mb-4">
                    B·∫Øt ƒë·∫ßu b·∫±ng c√°ch g·ª≠i ƒë·ªÅ xu·∫•t cho c√°c c∆° h·ªôi ph√π h·ª£p
                  </p>
                  <Link
                    to="/dashboard/opportunities"
                    className="inline-block px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity"
                  >
                    Kh√°m ph√° c∆° h·ªôi
                  </Link>
                </div>
              )}
            </div>

            {/* Opportunities Overview */}
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-4">
                <div>
                  <h2 className="text-xl font-semibold text-gray-900 mb-2">C∆° h·ªôi m·ªõi</h2>
                  <p className="text-sm text-gray-600">
                    C√°c chi·∫øn d·ªãch ph√π h·ª£p v·ªõi h·ªì s∆° c·ªßa b·∫°n.
                  </p>
                </div>
                <Link
                  to="/dashboard/opportunities"
                  className="text-sm text-[#6366F1] hover:underline"
                >
                  Xem t·∫•t c·∫£
                </Link>
              </div>
              
              {MOCK_OPPORTUNITIES.length > 0 ? (
                <div className="space-y-4">
                  {MOCK_OPPORTUNITIES.map((opp) => (
                    <div
                      key={opp.id}
                      className="border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors"
                    >
                      <div className="flex items-start justify-between mb-2">
                        <div>
                          <h3 className="font-medium text-gray-900">{opp.campaignTitle}</h3>
                          <p className="text-sm text-gray-600">{opp.brandName}</p>
                        </div>
                        <span className="px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded">
                          {opp.matchScore}% ph√π h·ª£p
                        </span>
                      </div>
                      <div className="flex items-center justify-between text-sm text-gray-600 mb-3">
                        <span>{opp.budgetRange}</span>
                        <span>{opp.deadline}</span>
                      </div>
                      <Link
                        to="/dashboard/opportunities"
                        className="inline-block px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity"
                      >
                        Xem chi ti·∫øt
                      </Link>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="text-center py-8">
                  <p className="text-gray-600 mb-2">Hi·ªán kh√¥ng c√≥ c∆° h·ªôi m·ªõi</p>
                  <p className="text-sm text-gray-500 mb-4">
                    C∆° h·ªôi m·ªõi s·∫Ω xu·∫•t hi·ªán khi c√≥ chi·∫øn d·ªãch ph√π h·ª£p
                  </p>
                  <Link
                    to="/dashboard/profile"
                    className="inline-block px-4 py-2 bg-gray-100 text-gray-700 text-sm font-medium rounded-lg hover:bg-gray-200 transition-colors"
                  >
                    C·∫≠p nh·∫≠t h·ªì s∆°
                  </Link>
                </div>
              )}
            </div>
          </div>

          {/* Right Column */}
          <div className="space-y-6">
            
            {/* Recent Activity */}
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="mb-4">
                <h2 className="text-xl font-semibold text-gray-900 mb-2">Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h2>
                <p className="text-sm text-gray-600">
                  Nh·∫≠t k√Ω ho·∫°t ƒë·ªông m·ªõi nh·∫•t tr√™n t√†i kho·∫£n c·ªßa b·∫°n.
                </p>
              </div>
              
              {MOCK_RECENT_ACTIVITIES.length > 0 ? (
                <div className="max-h-64 overflow-y-auto space-y-3 pr-2">
                  {MOCK_RECENT_ACTIVITIES.map((activity) => (
                    <div
                      key={activity.id}
                      className="border-l-2 border-[#6366F1] pl-3 py-2"
                    >
                      <p className="text-sm text-gray-700 mb-1">{activity.message}</p>
                      <p className="text-xs text-gray-500">{activity.timestamp}</p>
                    </div>
                  ))}
                </div>
              ) : (
                <div className="text-center py-8">
                  <p className="text-gray-600 text-sm">Ch∆∞a c√≥ ho·∫°t ƒë·ªông n√†o</p>
                  <p className="text-xs text-gray-500 mt-1">
                    Ho·∫°t ƒë·ªông m·ªõi s·∫Ω xu·∫•t hi·ªán ·ªü ƒë√¢y
                  </p>
                </div>
              )}
            </div>

            {/* Quick Actions */}
            {!profileComplete && (
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <h2 className="text-xl font-semibold text-gray-900 mb-2">B·∫Øt ƒë·∫ßu v·ªõi ALINO</h2>
                <p className="text-sm text-gray-600 mb-4">
                  Ho√†n thi·ªán h·ªì s∆° ƒë·ªÉ nh·∫≠n nhi·ªÅu c∆° h·ªôi h∆°n.
                </p>
                
                <div className="space-y-3">
                  <div className="border border-gray-200 rounded-lg p-3">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-sm font-medium text-gray-700">Ho√†n thi·ªán h·ªì s∆°</span>
                      <span className="text-xs text-gray-500">{profileProgress}%</span>
                    </div>
                    <Link
                      to="/dashboard/profile"
                      className="text-sm text-[#6366F1] hover:underline"
                    >
                      Ho√†n thi·ªán h·ªì s∆° ‚Üí
                    </Link>
                  </div>

                  <div className="border border-gray-200 rounded-lg p-3">
                    <div className="flex items-center justify-between mb-2">
                      <span className="text-sm font-medium text-gray-700">Thi·∫øt l·∫≠p d·ªãch v·ª•</span>
                      <span className="text-xs text-gray-500">Ch∆∞a thi·∫øt l·∫≠p</span>
                    </div>
                    <Link
                      to="/dashboard/services"
                      className="text-sm text-[#6366F1] hover:underline"
                    >
                      Thi·∫øt l·∫≠p d·ªãch v·ª• ‚Üí
                    </Link>
                  </div>
                </div>
              </div>
            )}

            {/* Performance Insights */}
            {MOCK_INSIGHTS.length > 0 && (
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <div className="flex items-center justify-between mb-4">
                  <h2 className="text-xl font-semibold text-gray-900">Hi·ªÉu bi·∫øt hi·ªáu su·∫•t</h2>
                  <Link
                    to="/dashboard/analytics"
                    className="text-sm text-[#6366F1] hover:underline"
                  >
                    Xem chi ti·∫øt
                  </Link>
                </div>
                <p className="text-sm text-gray-600 mb-4">
                  Ph√¢n t√≠ch hi·ªáu su·∫•t h·ªì s∆° c·ªßa b·∫°n.
                </p>
                
                <div className="space-y-3">
                  {MOCK_INSIGHTS.map((insight) => (
                    <div
                      key={insight.id}
                      className="border border-gray-200 rounded-lg p-3"
                    >
                      <div className="flex items-center justify-between mb-1">
                        <span className="text-sm font-medium text-gray-700">{insight.metric}</span>
                        <div className="flex items-center gap-1">
                          {insight.trend === 'up' ? (
                            <FaArrowUp className="w-3 h-3 text-green-600" />
                          ) : (
                            <FaArrowDown className="w-3 h-3 text-red-600" />
                          )}
                          <span
                            className={`text-sm font-medium ${
                              insight.trend === 'up' ? 'text-green-600' : 'text-red-600'
                            }`}
                          >
                            {insight.value}
                          </span>
                        </div>
                      </div>
                      <p className="text-xs text-gray-500">{insight.description}</p>
                    </div>
                  ))}
                </div>
              </div>
            )}
          </div>
        </div>
      </div>

      {/* Upgrade Plan Modal */}
      <UpgradePlanModal
        isOpen={isUpgradeModalOpen}
        onClose={() => setIsUpgradeModalOpen(false)}
        currentPlan={currentPlan}
      />
    </div>
  )
}
</file>

<file path="src/pages/creator/discovery/OpportunitiesPage.tsx">
import { useNavigate } from 'react-router-dom'
import { FaDollarSign, FaCalendarAlt } from 'react-icons/fa'

interface Opportunity {
  id: string
  brandName: string
  industry: string
  budgetMin: number
  budgetMax: number
  deadline: string
}

const MOCK_OPPORTUNITIES: Opportunity[] = [
  {
    id: '1',
    brandName: 'Echo Marketing',
    industry: 'Digital Marketing',
    budgetMin: 1500,
    budgetMax: 3000,
    deadline: '2024-08-15',
  },
  {
    id: '2',
    brandName: 'Aqua Lifestyle',
    industry: 'Health & Wellness',
    budgetMin: 1000,
    budgetMax: 2500,
    deadline: '2024-08-20',
  },
  {
    id: '3',
    brandName: 'Pixel Studios',
    industry: 'Software & Tech',
    budgetMin: 2000,
    budgetMax: 4000,
    deadline: '2024-08-22',
  },
  {
    id: '4',
    brandName: 'Green Harvest Organics',
    industry: 'Food & Beverage',
    budgetMin: 800,
    budgetMax: 1800,
    deadline: '2024-08-25',
  },
  {
    id: '5',
    brandName: 'Urban Chic Boutique',
    industry: 'Fashion',
    budgetMin: 1200,
    budgetMax: 2800,
    deadline: '2024-08-28',
  },
  {
    id: '6',
    brandName: 'Global Connect Telecom',
    industry: 'Telecommunications',
    budgetMin: 2500,
    budgetMax: 5000,
    deadline: '2024-09-01',
  },
]

export default function OpportunitiesPage() {
  const navigate = useNavigate()

  const handlePropose = (opportunityId: string) => {
    navigate(`/dashboard/creator/proposals/new?opportunityId=${opportunityId}`)
  }

  const formatBudget = (min: number, max: number) => {
    return `$${min.toLocaleString('en-US')} - $${max.toLocaleString('en-US')}`
  }

  const formatDate = (dateString: string) => {
    return new Date(dateString).toLocaleDateString('en-US', {
      year: 'numeric',
      month: '2-digit',
      day: '2-digit',
    })
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">

        <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
          {MOCK_OPPORTUNITIES.map((opportunity) => (
            <div
              key={opportunity.id}
              className="bg-white rounded-xl border border-gray-200 p-6 hover:shadow-lg transition-shadow"
            >
              <div className="mb-4">
                <h3 className="text-xl font-bold text-gray-900 mb-1">{opportunity.brandName}</h3>
                <p className="text-sm text-gray-600">{opportunity.industry}</p>
              </div>

              <div className="space-y-3 mb-6">
                <div className="flex items-center gap-2">
                  <FaDollarSign className="w-4 h-4 text-gray-500" />
                  <span className="text-sm text-gray-700">{formatBudget(opportunity.budgetMin, opportunity.budgetMax)}</span>
                </div>
                <div className="flex items-center gap-2">
                  <FaCalendarAlt className="w-4 h-4 text-gray-500" />
                  <span className="text-sm text-gray-700">{formatDate(opportunity.deadline)}</span>
                </div>
              </div>

              <button
                onClick={() => handlePropose(opportunity.id)}
                className="w-full px-4 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white font-medium rounded-lg hover:opacity-90 transition-opacity"
              >
                G·ª≠i ƒë·ªÅ xu·∫•t
              </button>
            </div>
          ))}
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/onboarding/RolePage.tsx">
import { useState } from 'react'
import { useNavigate } from 'react-router-dom'
import { useAuth } from '../../hooks/useAuth'
import { getSupabase } from '../../lib/supabase'
import { FaUserCircle, FaBuilding, FaArrowRight, FaCheck } from 'react-icons/fa'

export default function RolePage() {
  const { session } = useAuth()
  const [loading, setLoading] = useState(false)
  const [selectedRole, setSelectedRole] = useState<'creator' | 'brand' | null>(null)
  const navigate = useNavigate()
  const supabase = getSupabase()

  const handleSelectRole = async (role: 'creator' | 'brand') => {
    if (!session || !session.access_token) return

    setSelectedRole(role)
    setLoading(true)

    try {
      const { error } = await supabase
        .from('profiles')
        .update({
          role,
          updated_at: new Date().toISOString(),
        })
        .eq('id', session.user.id)

      if (error) {
        if (error.code === '42501' || error.code === 'PGRST301') {
          setLoading(false)
          setSelectedRole(null)
          return
        }
        throw error
      }

      // Navigate to /app - AppGate will handle routing to onboarding
      navigate('/app', { replace: true })
    } catch (err: any) {
      setLoading(false)
      setSelectedRole(null)
      alert(err.message || 'C√≥ l·ªói x·∫£y ra khi ch·ªçn vai tr√≤')
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6 pt-24">
      <div className="w-full max-w-5xl">
        {/* Header Section */}
        <div className="text-center mb-16">
          <h1 className="text-5xl md:text-6xl font-bold tracking-tight mb-4 bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
            Ch·ªçn vai tr√≤ c·ªßa b·∫°n
          </h1>
          <p className="text-xl text-[#6B7280] max-w-2xl mx-auto leading-relaxed">
            Ch·ªçn vai tr√≤ ph√π h·ª£p v·ªõi c√°ch b·∫°n mong mu·ªën s·ª≠ d·ª•ng ALINO.
          </p>
        </div>

        {/* Role Cards */}
        <div className="grid md:grid-cols-2 gap-8 mb-8">
          {/* Creator Card */}
          <button
            onClick={() => handleSelectRole('creator')}
            disabled={loading}
            className={`group relative p-10 bg-white/90 backdrop-blur-xl rounded-3xl border-2 transition-all duration-300 text-left disabled:opacity-50 disabled:cursor-not-allowed ${
              selectedRole === 'creator'
                ? 'border-[#6366F1] shadow-2xl shadow-[#6366F1]/20 scale-105'
                : 'border-gray-200 hover:border-[#6366F1]/50 hover:shadow-xl hover:shadow-[#6366F1]/10 hover:scale-[1.02]'
            }`}
          >
            {/* Icon Container */}
            <div className={`mb-6 inline-flex items-center justify-center w-16 h-16 rounded-2xl transition-all duration-300 ${
              selectedRole === 'creator'
                ? 'bg-gradient-to-br from-[#6366F1] to-[#8B5CF6] shadow-lg'
                : 'bg-gradient-to-br from-[#6366F1]/10 to-[#8B5CF6]/10 group-hover:from-[#6366F1]/20 group-hover:to-[#8B5CF6]/20'
            }`}>
              <FaUserCircle className={`w-8 h-8 transition-colors ${
                selectedRole === 'creator' ? 'text-white' : 'text-[#6366F1]'
              }`} />
            </div>

            {/* Content */}
            <h3 className="text-3xl font-bold mb-3 text-gray-900 group-hover:text-[#6366F1] transition-colors">
              Creator
            </h3>
            <p className="text-lg text-[#6B7280] mb-6 leading-relaxed">
              T√¥i l√† Creator mu·ªën h·ª£p t√°c v·ªõi c√°c Brand
            </p>

            {/* Features List */}
            <ul className="space-y-3 mb-6">
              <li className="flex items-center text-sm text-[#6B7280]">
                <div className="w-5 h-5 rounded-full bg-[#6366F1]/10 flex items-center justify-center mr-3 flex-shrink-0">
                  <div className="w-2 h-2 rounded-full bg-[#6366F1]" />
                </div>
                Qu·∫£n l√Ω ƒë·ªÅ xu·∫•t v√† h·ª£p t√°c
              </li>
              <li className="flex items-center text-sm text-[#6B7280]">
                <div className="w-5 h-5 rounded-full bg-[#6366F1]/10 flex items-center justify-center mr-3 flex-shrink-0">
                  <div className="w-2 h-2 rounded-full bg-[#6366F1]" />
                </div>
                Theo d√µi hi·ªáu su·∫•t v√† ph√¢n t√≠ch
              </li>
              <li className="flex items-center text-sm text-[#6B7280]">
                <div className="w-5 h-5 rounded-full bg-[#6366F1]/10 flex items-center justify-center mr-3 flex-shrink-0">
                  <div className="w-2 h-2 rounded-full bg-[#6366F1]" />
                </div>
                K·∫øt n·ªëi v·ªõi c√°c Brand ph√π h·ª£p
              </li>
            </ul>

            {/* Arrow Icon */}
            <div className={`flex items-center text-[#6366F1] font-semibold transition-all ${
              selectedRole === 'creator' ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'
            }`}>
              <span className="text-sm mr-2">B·∫Øt ƒë·∫ßu</span>
              <FaArrowRight className="w-4 h-4" />
            </div>

            {/* Selected Indicator */}
            {selectedRole === 'creator' && loading && (
              <div className="absolute top-6 right-6 w-8 h-8 rounded-full bg-gradient-to-br from-[#6366F1] to-[#EC4899] flex items-center justify-center animate-pulse">
                <FaCheck className="w-4 h-4 text-white" />
              </div>
            )}
          </button>

          {/* Brand Card */}
          <button
            onClick={() => handleSelectRole('brand')}
            disabled={loading}
            className={`group relative p-10 bg-white/90 backdrop-blur-xl rounded-3xl border-2 transition-all duration-300 text-left disabled:opacity-50 disabled:cursor-not-allowed ${
              selectedRole === 'brand'
                ? 'border-[#EC4899] shadow-2xl shadow-[#EC4899]/20 scale-105'
                : 'border-gray-200 hover:border-[#EC4899]/50 hover:shadow-xl hover:shadow-[#EC4899]/10 hover:scale-[1.02]'
            }`}
          >
            {/* Icon Container */}
            <div className={`mb-6 inline-flex items-center justify-center w-16 h-16 rounded-2xl transition-all duration-300 ${
              selectedRole === 'brand'
                ? 'bg-gradient-to-br from-[#EC4899] to-[#F472B6] shadow-lg'
                : 'bg-gradient-to-br from-[#EC4899]/10 to-[#F472B6]/10 group-hover:from-[#EC4899]/20 group-hover:to-[#F472B6]/20'
            }`}>
              <FaBuilding className={`w-8 h-8 transition-colors ${
                selectedRole === 'brand' ? 'text-white' : 'text-[#EC4899]'
              }`} />
            </div>

            {/* Content */}
            <h3 className="text-3xl font-bold mb-3 text-gray-900 group-hover:text-[#EC4899] transition-colors">
              Brand
            </h3>
            <p className="text-lg text-[#6B7280] mb-6 leading-relaxed">
              T√¥i l√† Brand mu·ªën h·ª£p t√°c v·ªõi c√°c Creator
            </p>

            {/* Features List */}
            <ul className="space-y-3 mb-6">
              <li className="flex items-center text-sm text-[#6B7280]">
                <div className="w-5 h-5 rounded-full bg-[#EC4899]/10 flex items-center justify-center mr-3 flex-shrink-0">
                  <div className="w-2 h-2 rounded-full bg-[#EC4899]" />
                </div>
                T·∫°o v√† qu·∫£n l√Ω chi·∫øn d·ªãch
              </li>
              <li className="flex items-center text-sm text-[#6B7280]">
                <div className="w-5 h-5 rounded-full bg-[#EC4899]/10 flex items-center justify-center mr-3 flex-shrink-0">
                  <div className="w-2 h-2 rounded-full bg-[#EC4899]" />
                </div>
                Kh√°m ph√° v√† k·∫øt n·ªëi Creator
              </li>
              <li className="flex items-center text-sm text-[#6B7280]">
                <div className="w-5 h-5 rounded-full bg-[#EC4899]/10 flex items-center justify-center mr-3 flex-shrink-0">
                  <div className="w-2 h-2 rounded-full bg-[#EC4899]" />
                </div>
                Theo d√µi ROI v√† hi·ªáu su·∫•t
              </li>
            </ul>

            {/* Arrow Icon */}
            <div className={`flex items-center text-[#EC4899] font-semibold transition-all ${
              selectedRole === 'brand' ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'
            }`}>
              <span className="text-sm mr-2">B·∫Øt ƒë·∫ßu</span>
              <FaArrowRight className="w-4 h-4" />
            </div>

            {/* Selected Indicator */}
            {selectedRole === 'brand' && loading && (
              <div className="absolute top-6 right-6 w-8 h-8 rounded-full bg-gradient-to-br from-[#6366F1] to-[#EC4899] flex items-center justify-center animate-pulse">
                <FaCheck className="w-4 h-4 text-white" />
              </div>
            )}
          </button>
        </div>

        {/* Loading State */}
        {loading && (
          <div className="text-center">
            <div className="inline-flex items-center gap-3 px-6 py-3 bg-white/80 backdrop-blur-xl rounded-full shadow-lg">
              <div className="w-5 h-5 border-2 border-[#6366F1] border-t-transparent rounded-full animate-spin" />
              <span className="text-sm font-medium text-[#6B7280]">
                ƒêang x·ª≠ l√Ω...
              </span>
            </div>
          </div>
        )}

        {/* Footer Note */}
        <p className="text-center text-sm text-[#6B7280] mt-8">
          B·∫°n c√≥ th·ªÉ thay ƒë·ªïi vai tr√≤ b·∫•t c·ª© l√∫c n√†o trong c√†i ƒë·∫∑t
        </p>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/public/LoginPage.tsx">
import { useState } from 'react'
import { Link, useNavigate } from 'react-router-dom'
import { getSupabase } from '../../lib/supabase'

export default function LoginPage() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const navigate = useNavigate()
  const supabase = getSupabase()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')
    setLoading(true)

    try {
      const { data, error } = await supabase.auth.signInWithPassword({
        email,
        password,
      })
      
      if (error) {
        if (error.message === 'Email not confirmed') {
          setError('T√†i kho·∫£n ch∆∞a ƒë∆∞·ª£c x√°c th·ª±c. Vui l√≤ng ki·ªÉm tra email.')
        } else {
          setError('Email ho·∫∑c m·∫≠t kh·∫©u kh√¥ng ƒë√∫ng')
        }
        setLoading(false)
        return
      }
      
      if (!data.user?.email_confirmed_at) {
        setError('T√†i kho·∫£n ch∆∞a ƒë∆∞·ª£c x√°c th·ª±c. Vui l√≤ng ki·ªÉm tra email.')
        await supabase.auth.signOut()
        setLoading(false)
        return
      }
      
      // After login, redirect to landing page
      // User must explicitly click "Qu·∫£n l√Ω d·ª± √°n" to go to /app
      navigate('/')      
    } catch (err) {
      setError('C√≥ l·ªói x·∫£y ra')
      setLoading(false)
    }
  }

  const handleGoogleLogin = async () => {
    const { data, error } = await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        // Redirect to landing page after OAuth - user must click "Qu·∫£n l√Ω d·ª± √°n" to go to /app
        redirectTo: `${window.location.origin}/`,
      },
    })

    if (error) {
      setError(error.message)
      return
    }

    if (data.url) {
      window.location.href = data.url
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-[#F9FAFB] px-6 lg:px-6 pt-16">
      <div className="w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden flex">
        <div className="hidden lg:flex w-[45%] bg-gradient-to-br from-[#6366F1]/20 via-[#7C3AED]/15 to-[#EC4899]/20">
          <div className="flex flex-col px-12 pt-12 items-center">
            <img
              src="/logo/logo.png"
              alt="ALINO"
              className="w-40 h-40 mb-6"
            />
            <h1 className="text-3xl font-semibold text-[#1F2937] mb-3">
              Ch√†o m·ª´ng t·ªõi v·ªõi Alino
            </h1>
            <p className="text-[#6B7280] leading-relaxed">
              N·ªÅn t·∫£ng qu·∫£n l√Ω c√°c d·ª± √°n h·ª£p t√°c chuy√™n nghi·ªáp
            </p>
          </div>
        </div>

        <div className="w-full lg:w-[55%] px-10 py-8 flex items-center justify-center">
          <div className="w-full max-w-sm">
            <h2 className="text-2xl font-semibold mb-2">ƒêƒÉng nh·∫≠p</h2>
            <p className="text-sm text-[#6B7280] mb-6">
              Nh·∫≠p th√¥ng tin ƒë·ªÉ ti·∫øp t·ª•c
            </p>

            {error && (
              <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
                {error}
              </div>
            )}

            <form onSubmit={handleSubmit} className="space-y-4">
              <input
                type="email"
                placeholder="Email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <input
                type="password"
                placeholder="M·∫≠t kh·∫©u"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <button
                type="submit"
                disabled={loading}
                className="w-full py-2.5 rounded-lg text-white font-medium bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
              >
                {loading ? 'ƒêang ƒëƒÉng nh·∫≠p...' : 'ƒêƒÉng nh·∫≠p'}
              </button>
            </form>

            <div className="my-5 text-center text-xs text-[#9CA3AF]">HO·∫∂C</div>

            <button
              onClick={handleGoogleLogin}
              className="w-full py-2.5 border rounded-lg text-sm hover:bg-gray-50 flex items-center justify-center gap-3"
            >
              <svg className="w-5 h-5" viewBox="0 0 24 24">
                <path
                  fill="#4285F4"
                  d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                />
                <path
                  fill="#34A853"
                  d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                />
                <path
                  fill="#FBBC05"
                  d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                />
                <path
                  fill="#EA4335"
                  d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                />
              </svg>
              ƒêƒÉng nh·∫≠p v·ªõi Google
            </button>

            <p className="mt-6 text-center text-sm text-[#6B7280]">
              Ch∆∞a c√≥ t√†i kho·∫£n?{' '}
              <Link to="/signup" className="text-[#6366F1] font-medium">
                ƒêƒÉng k√Ω
              </Link>
            </p>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/utils/cropImage.ts">
import { Area } from 'react-easy-crop'

/**
 * cropImage: Utility functions for image cropping operations
 * 
 * Handles canvas-based image cropping with circular output.
 */

// Constants
const OUTPUT_SIZE = 400
const JPEG_QUALITY = 0.9
const JPEG_MIME_TYPE = 'image/jpeg'

/**
 * Creates an HTMLImageElement from a data URL or image source
 * 
 * @param url - Image source URL or data URL
 * @returns Promise that resolves to loaded HTMLImageElement
 */
function createImage(url: string): Promise<HTMLImageElement> {
  return new Promise((resolve, reject) => {
    const image = new Image()
    image.addEventListener('load', () => resolve(image))
    image.addEventListener('error', (error) => reject(error))
    image.src = url
  })
}

/**
 * Crops an image to a circular output using canvas
 * 
 * @param imageSrc - Source image URL or data URL
 * @param pixelCrop - Crop area in pixels from react-easy-crop
 * @returns Promise that resolves to cropped image as Blob
 * @throws Error if canvas context is unavailable or canvas is empty
 */
export async function getCroppedImg(
  imageSrc: string,
  pixelCrop: Area
): Promise<Blob> {
  const image = await createImage(imageSrc)
  const canvas = document.createElement('canvas')
  const ctx = canvas.getContext('2d')

  if (!ctx) {
    throw new Error('No 2d context')
  }

  // Set canvas size to output size (circular crop)
  canvas.width = OUTPUT_SIZE
  canvas.height = OUTPUT_SIZE

  // Draw circular crop
  ctx.save()
  ctx.beginPath()
  ctx.arc(OUTPUT_SIZE / 2, OUTPUT_SIZE / 2, OUTPUT_SIZE / 2, 0, Math.PI * 2)
  ctx.clip()

  // Draw cropped image
  ctx.drawImage(
    image,
    pixelCrop.x,
    pixelCrop.y,
    pixelCrop.width,
    pixelCrop.height,
    0,
    0,
    OUTPUT_SIZE,
    OUTPUT_SIZE
  )

  ctx.restore()

  // Convert canvas to blob
  return new Promise((resolve, reject) => {
    canvas.toBlob(
      (blob) => {
        if (!blob) {
          reject(new Error('Canvas is empty'))
          return
        }
        resolve(blob)
      },
      JPEG_MIME_TYPE,
      JPEG_QUALITY
    )
  })
}
</file>

<file path="src/hooks/useAuth.ts">
/**
 * useAuth: Re-export from AuthContext
 * 
 * This hook now reads from AuthContext (single source of truth).
 * All components should use this hook to access auth state.
 * 
 * IMPORTANT: signOut() does NOT handle navigation.
 * Components must handle redirects after signOut themselves.
 */
export { useAuth } from '../contexts/AuthContext'
</file>

<file path="src/pages/brand/campaigns/CampaignWorkspacePage.tsx">
/**
 * CampaignWorkspacePage: Placeholder page for /dashboard/brand/campaigns route
 * 
 * Content has been moved to WorkspacePage (/dashboard/brand/workspace)
 * This route is kept for backward compatibility but shows minimal stub
 * 
 * TODO: Will be redesigned/implemented separately per product requirements
 */

export default function CampaignWorkspacePage() {
  return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
        <div className="bg-white rounded-xl border border-gray-200 p-12 text-center">
          <h2 className="text-2xl font-semibold text-gray-900 mb-4">Chi·∫øn d·ªãch</h2>
          <p className="text-gray-600">
            N·ªôi dung ƒë√£ ƒë∆∞·ª£c chuy·ªÉn sang Kh√¥ng gian l√†m vi·ªác
          </p>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/brand/campaigns/CreateCampaignPage.tsx">
import { useState } from 'react'
import { useNavigate, useParams } from 'react-router-dom'

/**
 * CreateCampaignPage: Create a new campaign form
 * 
 * Route: /dashboard/brand/campaigns/new or /workspace/:workspaceId/campaigns/new
 * 
 * Form structure matches the UI screenshot exactly:
 * - Section 1: Campaign Details (Name, Goal)
 * - Section 2: Budget & Schedule (Budget Range, Deadline)
 * - Section 3: Visibility & Collaborators (Visibility radio, Email invites)
 */

// TypeScript type for campaign creation payload
export type CampaignVisibility = 'open' | 'private'

export interface CampaignCreatePayload {
  campaignName: string
  campaignGoal: string
  budgetRange: string // Stored as string, not over-engineered
  deadline: string // ISO date string
  visibility: CampaignVisibility
  collaborators: string[] // Array of email addresses
}

export default function CreateCampaignPage() {
  const navigate = useNavigate()
  const { workspaceId } = useParams<{ workspaceId: string }>()
  
  const [formData, setFormData] = useState<CampaignCreatePayload>({
    campaignName: 'Influencer Marketing Initiative',
    campaignGoal: 'Increase brand awareness by 20% over 3 months',
    budgetRange: '',
    deadline: '',
    visibility: 'open',
    collaborators: [],
  })
  const [newCollaborator, setNewCollaborator] = useState('')
  const [errors, setErrors] = useState<Record<string, string>>({})

  // Basic required-field validation only
  const validate = (): boolean => {
    const newErrors: Record<string, string> = {}
    
    if (!formData.campaignName.trim()) {
      newErrors.campaignName = 'Campaign name is required'
    }
    
    if (!formData.campaignGoal.trim()) {
      newErrors.campaignGoal = 'Campaign goal is required'
    }
    
    if (!formData.deadline) {
      newErrors.deadline = 'Deadline is required'
    }
    
    setErrors(newErrors)
    return Object.keys(newErrors).length === 0
  }

  const handleAddCollaborator = () => {
    const email = newCollaborator.trim()
    if (email && !formData.collaborators.includes(email)) {
      setFormData({
        ...formData,
        collaborators: [...formData.collaborators, email],
      })
      setNewCollaborator('')
    }
  }

  const handleRemoveCollaborator = (email: string) => {
    setFormData({
      ...formData,
      collaborators: formData.collaborators.filter(c => c !== email),
    })
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    if (!validate()) {
      return
    }

    // TODO: Implement backend API call to create campaign
    // const payload: CampaignCreatePayload = { ...formData }
    // await createCampaign(payload)

    // TODO: Navigate to appropriate page after creation
    // For now, navigate back based on context
    if (workspaceId) {
      navigate(`/dashboard/brand/workspace/${workspaceId}/campaigns`)
    } else {
      navigate('/dashboard/brand/workspace')
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-4xl mx-auto">
          {/* Page Header */}
          <div className="mb-8">
            <h1 className="text-3xl font-bold text-gray-900 mb-2">Create New Campaign</h1>
            <p className="text-gray-600">
              Define your campaign details, budget, and target audience to launch a successful initiative.
            </p>
          </div>

          <form onSubmit={handleSubmit}>
            <div className="space-y-6">
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <h2 className="text-xl font-semibold text-gray-900 mb-6">Campaign Details</h2>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Campaign Name *
                    </label>
                    <input
                      type="text"
                      value={formData.campaignName}
                      onChange={(e) => setFormData({ ...formData, campaignName: e.target.value })}
                      className={`w-full px-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent ${
                        errors.campaignName ? 'border-red-300' : 'border-gray-300'
                      }`}
                    />
                    {errors.campaignName && (
                      <p className="mt-1 text-sm text-red-600">{errors.campaignName}</p>
                    )}
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Campaign Goal *
                    </label>
                    <textarea
                      value={formData.campaignGoal}
                      onChange={(e) => setFormData({ ...formData, campaignGoal: e.target.value })}
                      rows={4}
                      className={`w-full px-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent resize-y ${
                        errors.campaignGoal ? 'border-red-300' : 'border-gray-300'
                      }`}
                    />
                    {errors.campaignGoal && (
                      <p className="mt-1 text-sm text-red-600">{errors.campaignGoal}</p>
                    )}
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <h2 className="text-xl font-semibold text-gray-900 mb-6">Budget & Schedule</h2>
                <div className="space-y-4">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Budget Range
                    </label>
                    <input
                      type="text"
                      value={formData.budgetRange}
                      onChange={(e) => setFormData({ ...formData, budgetRange: e.target.value })}
                      placeholder="$1,000 - $5,000"
                      className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    />
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Deadline *
                    </label>
                    <input
                      type="date"
                      value={formData.deadline}
                      onChange={(e) => setFormData({ ...formData, deadline: e.target.value })}
                      className={`w-full px-4 py-2.5 border rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent ${
                        errors.deadline ? 'border-red-300' : 'border-gray-300'
                      }`}
                    />
                    {errors.deadline && (
                      <p className="mt-1 text-sm text-red-600">{errors.deadline}</p>
                    )}
                  </div>
                </div>
              </div>

              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <h2 className="text-xl font-semibold text-gray-900 mb-6">Visibility & Collaborators</h2>
                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-3">
                      Campaign Visibility
                    </label>
                    <div className="space-y-3">
                      <label className="flex items-center gap-3 cursor-pointer">
                        <input
                          type="radio"
                          name="visibility"
                          value="open"
                          checked={formData.visibility === 'open'}
                          onChange={(e) => setFormData({ ...formData, visibility: e.target.value as CampaignVisibility })}
                          className="w-4 h-4 text-[#6366F1] border-gray-300 focus:ring-[#6366F1]"
                        />
                        <span className="text-sm text-gray-700">Open for Proposal (visible to all creators)</span>
                      </label>
                      <label className="flex items-center gap-3 cursor-pointer">
                        <input
                          type="radio"
                          name="visibility"
                          value="private"
                          checked={formData.visibility === 'private'}
                          onChange={(e) => setFormData({ ...formData, visibility: e.target.value as CampaignVisibility })}
                          className="w-4 h-4 text-[#6366F1] border-gray-300 focus:ring-[#6366F1]"
                        />
                        <span className="text-sm text-gray-700">Private Campaign (invite-only)</span>
                      </label>
                    </div>
                  </div>
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Invite Collaborators
                    </label>
                    <div className="flex gap-2 mb-3">
                      <input
                        type="email"
                        value={newCollaborator}
                        onChange={(e) => setNewCollaborator(e.target.value)}
                        onKeyPress={(e) => {
                          if (e.key === 'Enter') {
                            e.preventDefault()
                            handleAddCollaborator()
                          }
                        }}
                        placeholder="collaborator@example.com"
                        className="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                      />
                      <button
                        type="button"
                        onClick={handleAddCollaborator}
                        className="px-4 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-1"
                      >
                        <span>+</span>
                        <span>Add</span>
                      </button>
                    </div>
                    {formData.collaborators.length > 0 && (
                      <div className="flex flex-wrap gap-2">
                        {formData.collaborators.map((email) => (
                          <div
                            key={email}
                            className="flex items-center gap-2 px-3 py-1.5 bg-gray-100 rounded-lg"
                          >
                            <span className="text-sm text-gray-700">{email}</span>
                            <button
                              type="button"
                              onClick={() => handleRemoveCollaborator(email)}
                              className="text-gray-500 hover:text-gray-700"
                            >
                              √ó
                            </button>
                          </div>
                        ))}
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </div>

            <div className="flex items-center justify-end gap-4 mt-8">
              <button
                type="button"
                onClick={() => {
                  if (workspaceId) {
                    navigate(`/dashboard/brand/workspace/${workspaceId}/campaigns`)
                  } else {
                    navigate('/dashboard/brand')
                  }
                }}
                className="px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
              >
                Cancel
              </button>
              <button
                type="submit"
                className="px-6 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
              >
                Create Campaign
              </button>
            </div>
          </form>
        </div>
      </div>
  )
}
</file>

<file path="src/pages/brand/dashboard/BrandDashboard.tsx">
import { FaPlus, FaEnvelope, FaBullhorn, FaUser, FaClock, FaDollarSign, FaArrowRight } from 'react-icons/fa'

const MOCK_ACTIVE_CAMPAIGNS = [
  {
    id: '1',
    name: 'Summer Collection Launch',
    brand: 'Fashion Nova',
    thumbnail: 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?w=400&h=300&fit=crop',
    progress: 75,
    status: 'active',
  },
  {
    id: '2',
    name: 'Tech Gadget Review',
    brand: 'Innovate Corp',
    thumbnail: 'https://images.unsplash.com/photo-1498049794561-7780e7231661?w=400&h=300&fit=crop',
    progress: 40,
    status: 'pending',
  },
  {
    id: '3',
    name: 'Healthy Snack Promotion',
    brand: 'NutriBoost',
    thumbnail: 'https://images.unsplash.com/photo-1490645935967-10de6ba17061?w=400&h=300&fit=crop',
    progress: 90,
    status: 'active',
  },
  {
    id: '4',
    name: 'Gaming Hardware Unboxing',
    brand: 'GamerTech',
    thumbnail: 'https://images.unsplash.com/photo-1527864550417-7fd91fc51a46?w=400&h=300&fit=crop',
    progress: 100,
    status: 'completed',
  },
]

const MOCK_TOP_CREATORS = [
  {
    id: '1',
    name: 'Emily Studios',
    avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face',
    role: 'Lifestyle Vlogger',
    activeDeals: 5,
  },
  {
    id: '2',
    name: 'Mark Digital',
    avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face',
    role: 'Tech Reviewer',
    activeDeals: 3,
  },
  {
    id: '3',
    name: 'Chef Chloe',
    avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face',
    role: 'Food Blogger',
    activeDeals: 2,
  },
]

const MOCK_PENDING_APPROVALS = [
  {
    id: '1',
    description: 'Proposal from Emily Studios for Summer Collection.',
    campaign: 'Summer Collection Launch',
    timestamp: '2 hours ago',
  },
  {
    id: '2',
    description: 'Draft submission for Tech Gadget Review campaign.',
    campaign: 'Tech Gadget Review',
    timestamp: 'Yesterday',
  },
  {
    id: '3',
    description: 'Final deliverable pending for Healthy Snack Promotion.',
    campaign: 'Healthy Snack Promotion',
    timestamp: '3 days ago',
  },
  {
    id: '4',
    description: 'Budget increase request for Gaming Hardware Unboxing.',
    campaign: 'Gaming Hardware Unboxing',
    timestamp: 'Last week',
  },
]

const MOCK_NOTIFICATIONS = [
  {
    id: '1',
    message: "Your campaign 'Winter Wonderland' is now live!",
    timestamp: '5 mins ago',
  },
  {
    id: '2',
    message: 'New message from Mark Digital regarding collaboration.',
    timestamp: '15 mins ago',
  },
  {
    id: '3',
    message: "Reminder: 'Influencer Spotlight' campaign deadline in 2 days.",
    timestamp: '1 hour ago',
  },
]

export default function BrandDashboard() {
  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'active':
        return <span className="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Active</span>
      case 'pending':
        return <span className="px-2 py-1 text-xs font-medium bg-yellow-100 text-yellow-800 rounded-full">Pending Review</span>
      case 'completed':
        return <span className="px-2 py-1 text-xs font-medium bg-blue-100 text-blue-800 rounded-full">Completed</span>
      default:
        return null
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center justify-between mb-8">
            <h1 className="text-3xl font-bold text-gray-900">Welcome Back</h1>
            <div className="flex items-center gap-4">
              <button className="flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity">
                <FaPlus className="w-4 h-4" />
                <span>Create New Campaign</span>
              </button>
              <button className="flex items-center gap-2 px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                <FaEnvelope className="w-4 h-4" />
                <span>Review Proposals</span>
              </button>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-2">
                <div className="w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center">
                  <FaBullhorn className="w-5 h-5 text-purple-600" />
                </div>
              </div>
              <div className="text-3xl font-bold text-gray-900 mb-1">7</div>
              <div className="text-sm text-gray-600">Active Campaigns</div>
              <div className="text-xs text-green-600 mt-1">+2 this week</div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-2">
                <div className="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center">
                  <FaUser className="w-5 h-5 text-blue-600" />
                </div>
              </div>
              <div className="text-3xl font-bold text-gray-900 mb-1">23</div>
              <div className="text-sm text-gray-600">Active Creators</div>
              <div className="text-xs text-green-600 mt-1">+5 new this month</div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-2">
                <div className="w-10 h-10 rounded-lg bg-yellow-100 flex items-center justify-center">
                  <FaClock className="w-5 h-5 text-yellow-600" />
                </div>
              </div>
              <div className="text-3xl font-bold text-gray-900 mb-1">4</div>
              <div className="text-sm text-gray-600">Pending Approvals</div>
              <div className="text-xs text-gray-500 mt-1">3 for proposals</div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-2">
                <div className="w-10 h-10 rounded-lg bg-green-100 flex items-center justify-center">
                  <FaDollarSign className="w-5 h-5 text-green-600" />
                </div>
              </div>
              <div className="text-3xl font-bold text-gray-900 mb-1">$12,345</div>
              <div className="text-sm text-gray-600">Total Spend</div>
              <div className="text-xs text-green-600 mt-1">+8% from last month</div>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
            <div className="lg:col-span-2">
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-xl font-semibold text-gray-900">Active Campaigns</h2>
                  <button className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                    <span>View All</span>
                    <FaArrowRight className="w-3 h-3" />
                  </button>
                </div>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  {MOCK_ACTIVE_CAMPAIGNS.map((campaign) => (
                    <div key={campaign.id} className="border border-gray-200 rounded-lg overflow-hidden">
                      <div className="relative h-40 bg-gray-100">
                        <img
                          src={campaign.thumbnail}
                          alt={campaign.name}
                          className="w-full h-full object-cover"
                        />
                        <div className="absolute top-2 right-2">
                          {getStatusBadge(campaign.status)}
                        </div>
                      </div>
                      <div className="p-4">
                        <h3 className="font-semibold text-gray-900 mb-1">{campaign.name}</h3>
                        <p className="text-sm text-gray-600 mb-3">{campaign.brand}</p>
                        <div className="mb-3">
                          <div className="flex items-center justify-between text-xs text-gray-600 mb-1">
                            <span>Progress</span>
                            <span>{campaign.progress}%</span>
                          </div>
                          <div className="w-full bg-gray-200 rounded-full h-2">
                            <div
                              className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] h-2 rounded-full"
                              style={{ width: `${campaign.progress}%` }}
                            />
                          </div>
                        </div>
                        <button className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                          <span>View Details</span>
                          <FaArrowRight className="w-3 h-3" />
                        </button>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="lg:col-span-1">
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-xl font-semibold text-gray-900">Top Engaged Creators</h2>
                  <button className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                    <span>View All</span>
                    <FaArrowRight className="w-3 h-3" />
                  </button>
                </div>
                <div className="space-y-4">
                  {MOCK_TOP_CREATORS.map((creator) => (
                    <div key={creator.id} className="flex items-center gap-4">
                      <img
                        src={creator.avatar}
                        alt={creator.name}
                        className="w-12 h-12 rounded-full object-cover"
                      />
                      <div className="flex-1">
                        <h3 className="font-medium text-gray-900">{creator.name}</h3>
                        <p className="text-sm text-gray-600">{creator.role}</p>
                        <p className="text-xs text-gray-500 mt-1">{creator.activeDeals} active deals</p>
                      </div>
                      <button className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                        <span>View</span>
                        <FaArrowRight className="w-3 h-3" />
                      </button>
                    </div>
                  ))}
                </div>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-semibold text-gray-900">Pending Approvals</h2>
                <button className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                  <span>View All</span>
                  <FaArrowRight className="w-3 h-3" />
                </button>
              </div>
              <div className="space-y-4">
                {MOCK_PENDING_APPROVALS.map((approval) => (
                  <div key={approval.id} className="border-b border-gray-200 pb-4 last:border-b-0 last:pb-0">
                    <p className="text-sm text-gray-900 mb-1">{approval.description}</p>
                    <p className="text-xs text-gray-500">{approval.timestamp}</p>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <div className="flex items-center justify-between mb-6">
                <h2 className="text-xl font-semibold text-gray-900">Recent Notifications</h2>
                <button className="flex items-center gap-1 text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors">
                  <span>View All</span>
                  <FaArrowRight className="w-3 h-3" />
                </button>
              </div>
              <div className="space-y-4">
                {MOCK_NOTIFICATIONS.map((notification) => (
                  <div key={notification.id} className="border-b border-gray-200 pb-4 last:border-b-0 last:pb-0">
                    <p className="text-sm text-gray-900 mb-1">{notification.message}</p>
                    <p className="text-xs text-gray-500">{notification.timestamp}</p>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
  )
}
</file>

<file path="src/pages/brand/deals/ProposalInboxPage.tsx">
import { useState, useMemo } from 'react'
import { FaSearch, FaFilter, FaCheck, FaTimes } from 'react-icons/fa'

interface Proposal {
  id: string
  creatorName: string
  creatorAvatar: string
  submittedDate: string
  proposalTitle: string
  campaignName: string
  budgetRange: string
  status: 'pending' | 'accepted' | 'rejected'
}

const MOCK_PROPOSALS: Proposal[] = [
  {
    id: '1',
    creatorName: 'Alice Johnson',
    creatorAvatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face',
    submittedDate: '2024-07-28',
    proposalTitle: 'Engaging Content Series for "EcoLife"',
    campaignName: 'EcoLife Launch Campaign',
    budgetRange: '$1,500 - $2,000',
    status: 'pending',
  },
  {
    id: '2',
    creatorName: 'Bob Williams',
    creatorAvatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face',
    submittedDate: '2024-07-27',
    proposalTitle: 'Innovative Ad Concepts for "Quantum Leap"',
    campaignName: 'Quantum Leap Brand Refresh',
    budgetRange: '$2,500 - $3,000',
    status: 'pending',
  },
  {
    id: '3',
    creatorName: 'Carol White',
    creatorAvatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face',
    submittedDate: '2024-07-25',
    proposalTitle: 'Lifestyle Photography for "Urban Chic"',
    campaignName: 'Urban Chic Summer Collection',
    budgetRange: '$1,200 - $1,800',
    status: 'accepted',
  },
  {
    id: '4',
    creatorName: 'David Green',
    creatorAvatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face',
    submittedDate: '2024-07-24',
    proposalTitle: 'Influencer Collaboration for "Fitness First"',
    campaignName: 'Fitness First Expansion',
    budgetRange: '$3,000 - $3,500',
    status: 'rejected',
  },
  {
    id: '5',
    creatorName: 'Eve Brown',
    creatorAvatar: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face',
    submittedDate: '2024-07-23',
    proposalTitle: 'Podcast Sponsorship for "Tech Insights"',
    campaignName: 'Tech Insights Season 3',
    budgetRange: '$2,000 - $2,500',
    status: 'pending',
  },
  {
    id: '6',
    creatorName: 'Frank Davis',
    creatorAvatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face',
    submittedDate: '2024-07-22',
    proposalTitle: 'SEO-Optimized Blog Content for "Home Decor Hub"',
    campaignName: 'Home Decor Hub Content Boost',
    budgetRange: '$1,000 - $1,400',
    status: 'pending',
  },
]

export default function ProposalInboxPage() {
  const [proposals, setProposals] = useState<Proposal[]>(MOCK_PROPOSALS)
  const [selectedProposals, setSelectedProposals] = useState<string[]>([])
  const [searchQuery, setSearchQuery] = useState('')

  const pendingCount = proposals.filter(p => p.status === 'pending').length

  const filteredProposals = useMemo(() => {
    if (!searchQuery) return proposals
    const query = searchQuery.toLowerCase()
    return proposals.filter(p =>
      p.creatorName.toLowerCase().includes(query) ||
      p.proposalTitle.toLowerCase().includes(query) ||
      p.campaignName.toLowerCase().includes(query)
    )
  }, [proposals, searchQuery])

  const handleSelectProposal = (proposalId: string) => {
    setSelectedProposals(prev =>
      prev.includes(proposalId)
        ? prev.filter(id => id !== proposalId)
        : [...prev, proposalId]
    )
  }

  const handleAccept = (proposalId: string) => {
    setProposals(prev =>
      prev.map(p => p.id === proposalId ? { ...p, status: 'accepted' as const } : p)
    )
    setSelectedProposals(prev => prev.filter(id => id !== proposalId))
  }

  const handleReject = (proposalId: string) => {
    setProposals(prev =>
      prev.map(p => p.id === proposalId ? { ...p, status: 'rejected' as const } : p)
    )
    setSelectedProposals(prev => prev.filter(id => id !== proposalId))
  }

  const handleAcceptSelected = () => {
    selectedProposals.forEach(id => handleAccept(id))
    setSelectedProposals([])
  }

  const handleRejectSelected = () => {
    selectedProposals.forEach(id => handleReject(id))
    setSelectedProposals([])
  }

  const getStatusBadge = (status: string) => {
    switch (status) {
      case 'pending':
        return <span className="px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full">Pending</span>
      case 'accepted':
        return <span className="px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full">Accepted</span>
      case 'rejected':
        return <span className="px-2 py-1 text-xs font-medium bg-red-100 text-red-800 rounded-full">Rejected</span>
      default:
        return null
    }
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">

          <div className="bg-white rounded-xl border border-gray-200 p-4 mb-6">
            <div className="flex items-center gap-4 flex-wrap">
              <div className="flex-1 min-w-[200px]">
                <div className="relative">
                  <FaSearch className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
                  <input
                    type="text"
                    value={searchQuery}
                    onChange={(e) => setSearchQuery(e.target.value)}
                    placeholder="Search proposals..."
                    className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                  />
                </div>
              </div>
              <button className="flex items-center gap-2 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                <FaFilter className="w-4 h-4" />
                <span>Filter</span>
              </button>
              <button
                disabled={selectedProposals.length === 0}
                className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                Compare Selected ({selectedProposals.length})
              </button>
              <button
                onClick={handleAcceptSelected}
                disabled={selectedProposals.length === 0}
                className="flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <FaCheck className="w-4 h-4" />
                <span>Accept Selected</span>
              </button>
              <button
                onClick={handleRejectSelected}
                disabled={selectedProposals.length === 0}
                className="flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
              >
                <FaTimes className="w-4 h-4" />
                <span>Reject Selected</span>
              </button>
            </div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {filteredProposals.map((proposal) => (
              <div key={proposal.id} className="bg-white rounded-xl border border-gray-200 p-6 relative">
                <input
                  type="checkbox"
                  checked={selectedProposals.includes(proposal.id)}
                  onChange={() => handleSelectProposal(proposal.id)}
                  className="absolute top-4 right-4 w-5 h-5 text-[#6366F1] border-gray-300 rounded focus:ring-[#6366F1]"
                />
                <div className="flex items-center gap-3 mb-4">
                  <img
                    src={proposal.creatorAvatar}
                    alt={proposal.creatorName}
                    className="w-12 h-12 rounded-full object-cover"
                  />
                  <div className="flex-1">
                    <h3 className="font-semibold text-gray-900">{proposal.creatorName}</h3>
                    <p className="text-sm text-gray-500">{proposal.submittedDate}</p>
                  </div>
                </div>
                <div className="mb-4">
                  <h4 className="font-medium text-gray-900 mb-1">{proposal.proposalTitle}</h4>
                  <p className="text-sm text-gray-600 mb-2">{proposal.campaignName}</p>
                  <p className="text-sm font-medium text-gray-900 mb-2">{proposal.budgetRange}</p>
                  <div className="flex items-center justify-between">
                    {getStatusBadge(proposal.status)}
                  </div>
                </div>
                <div className="flex flex-col gap-2">
                  <button className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm">
                    Quick Preview
                  </button>
                  {proposal.status === 'pending' && (
                    <div className="flex gap-2">
                      <button
                        onClick={() => handleAccept(proposal.id)}
                        className="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm"
                      >
                        <FaCheck className="w-4 h-4" />
                        <span>Accept</span>
                      </button>
                      <button
                        onClick={() => handleReject(proposal.id)}
                        className="flex-1 flex items-center justify-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm"
                      >
                        <FaTimes className="w-4 h-4" />
                        <span>Reject</span>
                      </button>
                    </div>
                  )}
                </div>
              </div>
            ))}
          </div>
        </div>
      </div>
  )
}
</file>

<file path="src/pages/brand/discovery/CreatorDiscoveryPage.tsx">
import { useState, useMemo } from 'react'
import { FaSearch, FaYoutube, FaInstagram, FaFilter, FaTh, FaList, FaUser } from 'react-icons/fa'
import { SiTiktok, SiTwitch } from 'react-icons/si'

interface Creator {
  id: string
  name: string
  niche: string
  followers: number
  avgPrice: number
  platforms: string[]
  avatar: string
  location: string
  shortlisted: boolean
}

const MOCK_CREATORS: Creator[] = [
  {
    id: '1',
    name: 'Alice Wonderland',
    niche: 'Gaming & Tech',
    followers: 1200000,
    avgPrice: 1500,
    platforms: ['youtube', 'instagram', 'tiktok'],
    avatar: 'https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop&crop=face',
    location: 'New York, USA',
    shortlisted: true,
  },
  {
    id: '2',
    name: 'Bob The Builder',
    niche: 'DIY & Home',
    followers: 500000,
    avgPrice: 800,
    platforms: ['youtube', 'instagram'],
    avatar: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop&crop=face',
    location: 'Los Angeles, USA',
    shortlisted: false,
  },
  {
    id: '3',
    name: 'Charlie Chef',
    niche: 'Food & Cooking',
    followers: 750000,
    avgPrice: 1200,
    platforms: ['youtube', 'instagram', 'tiktok'],
    avatar: 'https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop&crop=face',
    location: 'Chicago, USA',
    shortlisted: true,
  },
  {
    id: '4',
    name: 'Diana Designer',
    niche: 'Fashion & Lifestyle',
    followers: 2100000,
    avgPrice: 2000,
    platforms: ['instagram', 'tiktok'],
    avatar: 'https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop&crop=face',
    location: 'Miami, USA',
    shortlisted: false,
  },
  {
    id: '5',
    name: 'Eve Explorer',
    niche: 'Travel & Adventure',
    followers: 900000,
    avgPrice: 1000,
    platforms: ['youtube', 'instagram'],
    avatar: 'https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=100&h=100&fit=crop&crop=face',
    location: 'Seattle, USA',
    shortlisted: false,
  },
  {
    id: '6',
    name: 'Frank Fitness',
    niche: 'Health & Fitness',
    followers: 1500000,
    avgPrice: 1800,
    platforms: ['youtube', 'instagram', 'tiktok', 'twitch'],
    avatar: 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop&crop=face',
    location: 'Austin, USA',
    shortlisted: false,
  },
  {
    id: '7',
    name: 'Grace Green',
    niche: 'Sustainability',
    followers: 300000,
    avgPrice: 700,
    platforms: ['instagram', 'blog'],
    avatar: 'https://images.unsplash.com/photo-1488426862026-3ee34a7d66df?w=100&h=100&fit=crop&crop=face',
    location: 'Portland, USA',
    shortlisted: false,
  },
  {
    id: '8',
    name: 'Henry History',
    niche: 'Education & History',
    followers: 600000,
    avgPrice: 950,
    platforms: ['youtube', 'blog'],
    avatar: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop&crop=face',
    location: 'Boston, USA',
    shortlisted: false,
  },
]

const NICHE_OPTIONS = [
  'All Niches',
  'Gaming & Tech',
  'DIY & Home',
  'Food & Cooking',
  'Fashion & Lifestyle',
  'Travel & Adventure',
  'Health & Fitness',
  'Sustainability',
  'Education & History',
]

const PLATFORM_ICONS: Record<string, React.ReactNode> = {
  youtube: <FaYoutube className="w-4 h-4 text-red-600" />,
  instagram: <FaInstagram className="w-4 h-4 text-pink-600" />,
  tiktok: <SiTiktok className="w-4 h-4 text-black" />,
  twitch: <SiTwitch className="w-4 h-4 text-purple-600" />,
  blog: <span className="text-xs font-semibold text-gray-600">Blog</span>,
}

export default function CreatorDiscoveryPage() {
  const [searchQuery, setSearchQuery] = useState('')
  const [selectedPlatforms, setSelectedPlatforms] = useState<string[]>(['youtube', 'instagram'])
  const [selectedNiche, setSelectedNiche] = useState('All Niches')
  const [priceRange, setPriceRange] = useState([500, 5000])
  const [followerRange, setFollowerRange] = useState([10000, 500000])
  const [location, setLocation] = useState('')
  const [selectedCreators, setSelectedCreators] = useState<string[]>([])
  const [shortlistedIds, setShortlistedIds] = useState<string[]>(MOCK_CREATORS.filter(c => c.shortlisted).map(c => c.id))
  const [sortBy, setSortBy] = useState('Most Relevant')
  const [viewMode, setViewMode] = useState<'grid' | 'list'>('grid')

  const handlePlatformToggle = (platform: string) => {
    setSelectedPlatforms(prev =>
      prev.includes(platform)
        ? prev.filter(p => p !== platform)
        : [...prev, platform]
    )
  }

  const handleCreatorSelect = (creatorId: string) => {
    setSelectedCreators(prev =>
      prev.includes(creatorId)
        ? prev.filter(id => id !== creatorId)
        : [...prev, creatorId]
    )
  }

  const handleShortlist = (creatorId: string) => {
    setShortlistedIds(prev =>
      prev.includes(creatorId)
        ? prev.filter(id => id !== creatorId)
        : [...prev, creatorId]
    )
  }

  const clearFilters = () => {
    setSearchQuery('')
    setSelectedPlatforms(['youtube', 'instagram'])
    setSelectedNiche('All Niches')
    setPriceRange([500, 5000])
    setFollowerRange([10000, 500000])
    setLocation('')
  }

  const filteredCreators = useMemo(() => {
    let filtered = MOCK_CREATORS.filter(creator => {
      if (searchQuery && !creator.name.toLowerCase().includes(searchQuery.toLowerCase()) && !creator.niche.toLowerCase().includes(searchQuery.toLowerCase())) {
        return false
      }
      if (selectedPlatforms.length > 0 && !selectedPlatforms.some(platform => creator.platforms.includes(platform))) {
        return false
      }
      if (selectedNiche !== 'All Niches' && creator.niche !== selectedNiche) {
        return false
      }
      if (creator.avgPrice < priceRange[0] || creator.avgPrice > priceRange[1]) {
        return false
      }
      if (creator.followers < followerRange[0] || creator.followers > followerRange[1]) {
        return false
      }
      if (location && !creator.location.toLowerCase().includes(location.toLowerCase())) {
        return false
      }
      return true
    })

    if (sortBy === 'Most Relevant') {
      filtered = filtered.sort((a, b) => b.followers - a.followers)
    } else if (sortBy === 'Price: Low to High') {
      filtered = filtered.sort((a, b) => a.avgPrice - b.avgPrice)
    } else if (sortBy === 'Price: High to Low') {
      filtered = filtered.sort((a, b) => b.avgPrice - a.avgPrice)
    } else if (sortBy === 'Followers: High to Low') {
      filtered = filtered.sort((a, b) => b.followers - a.followers)
    }

    return filtered
  }, [searchQuery, selectedPlatforms, selectedNiche, priceRange, followerRange, location, sortBy])

  const formatFollowers = (count: number) => {
    if (count >= 1000000) {
      return `${(count / 1000000).toFixed(1)}M`
    }
    if (count >= 1000) {
      return `${(count / 1000).toFixed(0)}K`
    }
    return count.toString()
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <div className="flex items-center justify-end mb-6">
            <div className="flex items-center gap-4">
              <select
                value={sortBy}
                onChange={(e) => setSortBy(e.target.value)}
                className="px-4 py-2 border border-gray-300 rounded-lg bg-white text-sm"
              >
                <option>Most Relevant</option>
                <option>Price: Low to High</option>
                <option>Price: High to Low</option>
                <option>Followers: High to Low</option>
              </select>
              <button
                disabled={selectedCreators.length < 2}
                className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"
              >
                Compare Selected ({selectedCreators.length})
              </button>
              <button
                onClick={() => setViewMode('grid')}
                className={`p-2 rounded-lg ${viewMode === 'grid' ? 'bg-gray-200' : 'bg-white border border-gray-300'}`}
              >
                <FaTh className="w-4 h-4" />
              </button>
              <button
                onClick={() => setViewMode('list')}
                className={`p-2 rounded-lg ${viewMode === 'list' ? 'bg-gray-200' : 'bg-white border border-gray-300'}`}
              >
                <FaList className="w-4 h-4" />
              </button>
              <button className="p-2 rounded-lg bg-white border border-gray-300">
                <FaFilter className="w-4 h-4" />
              </button>
            </div>
          </div>

          <div className="flex gap-6">
            <div className="w-80 flex-shrink-0">
              <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
                <div className="flex items-center justify-between mb-6">
                  <h2 className="text-lg font-semibold text-gray-900">Filters</h2>
                  <button
                    onClick={clearFilters}
                    className="text-sm text-[#6366F1] hover:text-[#EC4899] transition-colors"
                  >
                    Clear Filters
                  </button>
                </div>

                <div className="space-y-6">
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Search Creator</label>
                    <div className="relative">
                      <FaSearch className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4" />
                      <input
                        type="text"
                        value={searchQuery}
                        onChange={(e) => setSearchQuery(e.target.value)}
                        placeholder="Search by name or key"
                        className="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Platforms</label>
                    <div className="space-y-2">
                      {['youtube', 'instagram', 'tiktok', 'twitch', 'blog'].map((platform) => (
                        <label key={platform} className="flex items-center gap-2 cursor-pointer">
                          <input
                            type="checkbox"
                            checked={selectedPlatforms.includes(platform)}
                            onChange={() => handlePlatformToggle(platform)}
                            className="w-4 h-4 text-[#6366F1] border-gray-300 rounded focus:ring-[#6366F1]"
                          />
                          <span className="text-sm text-gray-700 capitalize">{platform}</span>
                        </label>
                      ))}
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Niche</label>
                    <select
                      value={selectedNiche}
                      onChange={(e) => setSelectedNiche(e.target.value)}
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    >
                      {NICHE_OPTIONS.map((niche) => (
                        <option key={niche} value={niche}>{niche}</option>
                      ))}
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Price Range: ${priceRange[0]} - ${priceRange[1]}
                    </label>
                    <div className="flex items-center gap-2">
                      <input
                        type="range"
                        min="0"
                        max="10000"
                        step="100"
                        value={priceRange[0]}
                        onChange={(e) => setPriceRange([parseInt(e.target.value), priceRange[1]])}
                        className="flex-1"
                      />
                      <input
                        type="range"
                        min="0"
                        max="10000"
                        step="100"
                        value={priceRange[1]}
                        onChange={(e) => setPriceRange([priceRange[0], parseInt(e.target.value)])}
                        className="flex-1"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Follower Count: {formatFollowers(followerRange[0])} - {formatFollowers(followerRange[1])}
                    </label>
                    <div className="flex items-center gap-2">
                      <input
                        type="range"
                        min="0"
                        max="5000000"
                        step="10000"
                        value={followerRange[0]}
                        onChange={(e) => setFollowerRange([parseInt(e.target.value), followerRange[1]])}
                        className="flex-1"
                      />
                      <input
                        type="range"
                        min="0"
                        max="5000000"
                        step="10000"
                        value={followerRange[1]}
                        onChange={(e) => setFollowerRange([followerRange[0], parseInt(e.target.value)])}
                        className="flex-1"
                      />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">Location</label>
                    <input
                      type="text"
                      value={location}
                      onChange={(e) => setLocation(e.target.value)}
                      placeholder="e.g., New York, USA"
                      className="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div className="flex-1">
              <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                {filteredCreators.map((creator) => (
                  <div key={creator.id} className="bg-white rounded-xl border border-gray-200 p-6 relative">
                    <input
                      type="checkbox"
                      checked={selectedCreators.includes(creator.id)}
                      onChange={() => handleCreatorSelect(creator.id)}
                      className="absolute top-4 right-4 w-5 h-5 text-[#6366F1] border-gray-300 rounded focus:ring-[#6366F1]"
                    />
                    <div className="flex flex-col items-center text-center mb-4">
                      <img
                        src={creator.avatar}
                        alt={creator.name}
                        className="w-20 h-20 rounded-full object-cover mb-3"
                      />
                      <h3 className="font-semibold text-gray-900 mb-1">{creator.name}</h3>
                      <p className="text-sm text-gray-600 mb-3">{creator.niche}</p>
                      <div className="flex items-center gap-4 text-sm text-gray-600 mb-3">
                        <div className="flex items-center gap-1">
                          <FaUser className="w-4 h-4" />
                          <span>{formatFollowers(creator.followers)} Followers</span>
                        </div>
                        <div className="flex items-center gap-1">
                          <span className="font-semibold">$</span>
                          <span>Avg. ${creator.avgPrice}</span>
                        </div>
                      </div>
                      <div className="flex items-center gap-2 mb-4">
                        {creator.platforms.map((platform) => (
                          <div key={platform}>
                            {PLATFORM_ICONS[platform]}
                          </div>
                        ))}
                      </div>
                    </div>
                    <div className="flex flex-col gap-2">
                      <button
                        onClick={() => handleShortlist(creator.id)}
                        className={`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${
                          shortlistedIds.includes(creator.id)
                            ? 'bg-gray-100 text-gray-700'
                            : 'bg-white border border-gray-300 text-gray-700 hover:bg-gray-50'
                        }`}
                      >
                        {shortlistedIds.includes(creator.id) ? 'Shortlisted' : 'Shortlist'}
                      </button>
                      <button className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity text-sm font-medium">
                        View Profile
                      </button>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
  )
}
</file>

<file path="src/pages/creator/profile/SettingsPage.tsx">
import { useState } from 'react'
import { Link } from 'react-router-dom'
import { useAuth } from '../../../hooks/useAuth'
import { useProfile } from '../../../hooks/useProfile'
import { getSupabase } from '../../../lib/supabase'
import Toast from '../../../components/shared/Toast'
import { FaGoogle, FaFacebook, FaInstagram, FaTiktok, FaCheckCircle, FaTimesCircle } from 'react-icons/fa'

export default function SettingsPage() {
  const { session } = useAuth()
  const { profile } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const supabase = getSupabase()
  const [currentPassword, setCurrentPassword] = useState('')
  const [newPassword, setNewPassword] = useState('')
  const [confirmPassword, setConfirmPassword] = useState('')
  const [passwordError, setPasswordError] = useState('')
  const [passwordLoading, setPasswordLoading] = useState(false)
  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null)

  // Check if user is OAuth-only (no email/password)
  // Check if user has email provider or if all providers are OAuth
  const userProviders = session?.user?.app_metadata?.providers || []
  const hasEmailProvider = userProviders.includes('email') || session?.user?.email
  const isOAuthOnly = !hasEmailProvider && userProviders.length > 0

  // Get account created date
  const accountCreatedDate = session?.user?.created_at 
    ? new Date(session.user.created_at).toLocaleDateString('vi-VN', { 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric' 
      })
    : 'N/A'

  // Mock connected accounts - replace with real data later
  const connectedAccounts = [
    { name: 'Google', provider: 'google', connected: true, icon: FaGoogle },
    { name: 'Facebook', provider: 'facebook', connected: false, icon: FaFacebook },
    { name: 'Instagram', provider: 'instagram', connected: false, icon: FaInstagram },
    { name: 'TikTok', provider: 'tiktok', connected: false, icon: FaTiktok },
  ]

  // Clear error when user starts typing
  const handleCurrentPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setCurrentPassword(e.target.value)
    if (passwordError) setPasswordError('')
  }

  const handleNewPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setNewPassword(e.target.value)
    if (passwordError) setPasswordError('')
  }

  const handleConfirmPasswordChange = (e: React.ChangeEvent<HTMLInputElement>) => {
    setConfirmPassword(e.target.value)
    if (passwordError) setPasswordError('')
  }

  const handleChangePassword = async () => {
    // Clear previous errors
    setPasswordError('')

    // Validation: All fields required
    if (!currentPassword || !newPassword || !confirmPassword) {
      setPasswordError('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin')
      return
    }

    // Validation: New password must be different from current password
    if (currentPassword === newPassword) {
      setPasswordError('M·∫≠t kh·∫©u m·ªõi ph·∫£i kh√°c v·ªõi m·∫≠t kh·∫©u hi·ªán t·∫°i')
      return
    }

    // Validation: Confirm password must match new password
    if (newPassword !== confirmPassword) {
      setPasswordError('M·∫≠t kh·∫©u m·ªõi kh√¥ng kh·ªõp')
      return
    }

    // Validation: Minimum length
    if (newPassword.length < 6) {
      setPasswordError('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±')
      return
    }

    if (!session?.user?.email) {
      setPasswordError('Kh√¥ng t√¨m th·∫•y th√¥ng tin ng∆∞·ªùi d√πng')
      return
    }

    setPasswordLoading(true)

    try {
      // Step 1: Re-authenticate with current password to verify it's correct
      const { error: signInError } = await supabase.auth.signInWithPassword({
        email: session.user.email,
        password: currentPassword,
      })

      if (signInError) {
        setPasswordError('M·∫≠t kh·∫©u hi·ªán t·∫°i kh√¥ng ƒë√∫ng')
        setPasswordLoading(false)
        return
      }

      // Step 2: Update password
      const { error: updateError } = await supabase.auth.updateUser({
        password: newPassword,
      })

      if (updateError) {
        setPasswordError(updateError.message || 'C√≥ l·ªói x·∫£y ra khi ƒë·ªïi m·∫≠t kh·∫©u')
        setPasswordLoading(false)
        return
      }

      // Success: Clear form and show toast
      setCurrentPassword('')
      setNewPassword('')
      setConfirmPassword('')
      setPasswordError('')
      setToast({ message: 'ƒê·ªïi m·∫≠t kh·∫©u th√†nh c√¥ng', type: 'success' })
    } catch (error: any) {
      setPasswordError(error.message || 'C√≥ l·ªói x·∫£y ra khi ƒë·ªïi m·∫≠t kh·∫©u')
    } finally {
      setPasswordLoading(false)
    }
  }

  return (
    <div className="bg-gray-50 py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
          
          {/* CARD 1: Account Information */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">Th√¥ng tin t√†i kho·∫£n</h2>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Email
                </label>
                <input
                  type="email"
                  value={session?.user?.email || ''}
                  disabled
                  className="w-full px-4 py-2.5 rounded-lg border border-gray-300 bg-gray-50 text-gray-600 cursor-not-allowed"
                />
                <p className="text-xs text-gray-500 mt-1">Email kh√¥ng th·ªÉ thay ƒë·ªïi</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Ng√†y t·∫°o t√†i kho·∫£n
                </label>
                <p className="text-gray-700">{accountCreatedDate}</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-3">
                  T√†i kho·∫£n ƒë√£ k·∫øt n·ªëi
                </label>
                <div className="space-y-2">
                  {connectedAccounts.map((account) => {
                    const Icon = account.icon
                    return (
                      <div
                        key={account.provider}
                        className="flex items-center justify-between p-3 rounded-lg border border-gray-200"
                      >
                        <div className="flex items-center gap-3">
                          <Icon className="w-5 h-5 text-gray-600" />
                          <span className="text-sm font-medium text-gray-700">{account.name}</span>
                        </div>
                        <div className="flex items-center gap-2">
                          {account.connected ? (
                            <>
                              <FaCheckCircle className="w-4 h-4 text-green-600" />
                              <span className="text-sm text-green-600">ƒê√£ k·∫øt n·ªëi</span>
                            </>
                          ) : (
                            <>
                              <FaTimesCircle className="w-4 h-4 text-gray-400" />
                              <span className="text-sm text-gray-500">Ch∆∞a k·∫øt n·ªëi</span>
                            </>
                          )}
                        </div>
                      </div>
                    )
                  })}
                </div>
              </div>
            </div>
          </div>

          {/* CARD 2: Change Password */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">ƒê·ªïi m·∫≠t kh·∫©u</h2>
            
            {isOAuthOnly ? (
              <div className="bg-blue-50 border border-blue-200 rounded-lg p-4">
                <p className="text-sm text-blue-800">
                  T√†i kho·∫£n c·ªßa b·∫°n ƒë∆∞·ª£c ƒëƒÉng nh·∫≠p qua OAuth. T√≠nh nƒÉng ƒë·ªïi m·∫≠t kh·∫©u kh√¥ng kh·∫£ d·ª•ng cho t√†i kho·∫£n n√†y.
                </p>
              </div>
            ) : (
              <div className="space-y-4">
                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    M·∫≠t kh·∫©u hi·ªán t·∫°i
                  </label>
                  <input
                    type="password"
                    value={currentPassword}
                    onChange={handleCurrentPasswordChange}
                    className="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    M·∫≠t kh·∫©u m·ªõi
                  </label>
                  <input
                    type="password"
                    value={newPassword}
                    onChange={handleNewPasswordChange}
                    className="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi"
                  />
                </div>

                <div>
                  <label className="block text-sm font-medium text-gray-700 mb-2">
                    X√°c nh·∫≠n m·∫≠t kh·∫©u m·ªõi
                  </label>
                  <input
                    type="password"
                    value={confirmPassword}
                    onChange={handleConfirmPasswordChange}
                    className="w-full px-4 py-2.5 rounded-lg border border-gray-300 focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                    placeholder="Nh·∫≠p l·∫°i m·∫≠t kh·∫©u m·ªõi"
                  />
                </div>

                <button
                  onClick={handleChangePassword}
                  disabled={passwordLoading}
                  className="px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 disabled:opacity-50 transition-opacity"
                >
                  {passwordLoading ? 'ƒêang x·ª≠ l√Ω...' : 'ƒê·ªïi m·∫≠t kh·∫©u'}
                </button>

                {passwordError && (
                  <p className="text-sm text-red-600 mt-2">
                    {passwordError}
                  </p>
                )}
              </div>
            )}
          </div>

          {/* CARD 3: Subscription */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">G√≥i ƒëƒÉng k√Ω</h2>
            
            <div className="space-y-4">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  G√≥i hi·ªán t·∫°i
                </label>
                <p className="text-gray-700">Mi·ªÖn ph√≠</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Ng√†y h·∫øt h·∫°n
                </label>
                <p className="text-gray-700">Kh√¥ng gi·ªõi h·∫°n</p>
              </div>

              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">
                  Tr·∫°ng th√°i
                </label>
                <span className="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-green-100 text-green-800">
                  ƒêang ho·∫°t ƒë·ªông
                </span>
              </div>

              <button
                disabled
                className="px-6 py-2.5 rounded-xl font-medium text-[#6366F1] border border-[#6366F1] opacity-50 cursor-not-allowed"
              >
                N√¢ng c·∫•p g√≥i (Coming soon)
              </button>
            </div>
          </div>

          {/* CARD 4: Security & Data Usage (READ-ONLY) */}
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <h2 className="text-2xl font-semibold text-[#374151] mb-6">B·∫£o m·∫≠t & S·ª≠ d·ª•ng d·ªØ li·ªáu</h2>
            
            <div className="space-y-4 text-gray-700">
              <div>
                <p className="text-sm mb-4">
                  ALINO s·ª≠ d·ª•ng th√¥ng tin c·ªßa b·∫°n ƒë·ªÉ v·∫≠n h√†nh, duy tr√¨, c·∫£i thi·ªán v√† t·ªëi ∆∞u h√≥a n·ªÅn t·∫£ng. 
                  Ch√∫ng t√¥i thu th·∫≠p v√† x·ª≠ l√Ω d·ªØ li·ªáu c·∫ßn thi·∫øt ƒë·ªÉ cung c·∫•p d·ªãch v·ª• k·∫øt n·ªëi gi·ªØa Creator v√† Brand m·ªôt c√°ch hi·ªáu qu·∫£.
                </p>
                <p className="text-sm mb-4">
                  Th√¥ng tin c·ªßa b·∫°n ƒë∆∞·ª£c s·ª≠ d·ª•ng ƒë·ªÉ n√¢ng cao tr·∫£i nghi·ªám ng∆∞·ªùi d√πng, c·∫£i thi·ªán ch·∫•t l∆∞·ª£ng d·ªãch v·ª•, 
                  v√† ƒë·∫£m b·∫£o n·ªÅn t·∫£ng ho·∫°t ƒë·ªông ·ªïn ƒë·ªãnh v√† an to√†n.
                </p>
              </div>

              <div className="bg-gray-50 border border-gray-200 rounded-lg p-4">
                <p className="text-sm text-gray-700">
                  ƒê·ªÉ bi·∫øt th√™m chi ti·∫øt v·ªÅ c√°ch ch√∫ng t√¥i x·ª≠ l√Ω d·ªØ li·ªáu c·ªßa b·∫°n, vui l√≤ng xem{' '}
                  <Link to="/privacy" className="text-[#6366F1] hover:underline">
                    Ch√≠nh s√°ch b·∫£o m·∫≠t
                  </Link>
                  {' '}c·ªßa ch√∫ng t√¥i.
                </p>
              </div>
            </div>
          </div>

        </div>
      </div>

      {/* Toast Notification */}
      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  )
}
</file>

<file path="src/pages/creator/proposals/DealWorkspacePage.tsx">
import { useState } from 'react'
import { FaCloudUploadAlt, FaPaperPlane, FaCheck, FaFile, FaFilePdf, FaFileImage } from 'react-icons/fa'

interface FileItem {
  id: string
  name: string
  size: string
  status: 'draft' | 'submitted' | 'approved' | 'final'
  type: string
}

interface Message {
  id: string
  sender: 'creator' | 'brand'
  senderName: string
  timestamp: string
  content: string
}

interface Milestone {
  id: string
  title: string
  date: string
  completed: boolean
}

interface Task {
  id: string
  name: string
  dueDate: string
  completed: boolean
}

const MOCK_FILES: FileItem[] = [
  { id: '1', name: 'Initial_Moodboard.pdf', size: '2.3 MB', status: 'approved', type: 'pdf' },
  { id: '2', name: 'Draft_Concepts_v1.psd', size: '15.1 MB', status: 'submitted', type: 'psd' },
  { id: '3', name: 'Revised_Concepts_v2.png', size: '7.8 MB', status: 'draft', type: 'image' },
  { id: '4', name: 'Final_Deliverable.zip', size: '32.5 MB', status: 'final', type: 'zip' },
]

const MOCK_MESSAGES: Message[] = [
  { id: '1', sender: 'brand', senderName: 'Brand Contact', timestamp: '10:30 AM', content: 'Hi John, I love the initial concepts! Could we explore a slightly warmer color palette for the key visuals?' },
  { id: '2', sender: 'creator', senderName: 'You', timestamp: '10:45 AM', content: 'Absolutely! I\'ll prepare some revisions with a warmer palette and send them over by tomorrow evening. üòä' },
  { id: '3', sender: 'brand', senderName: 'Brand Contact', timestamp: '10:50 AM', content: 'Great, looking forward to seeing them! Thanks for the quick turnaround.' },
]

const MOCK_MILESTONES: Milestone[] = [
  { id: '1', title: 'Proposal Accepted', date: 'Jan 10, 2024', completed: true },
  { id: '2', title: 'Initial Concepts Submitted', date: 'Jan 15, 2024', completed: true },
  { id: '3', title: 'Feedback Received', date: 'Jan 17, 2024', completed: true },
  { id: '4', title: 'Revised Concepts Submitted', date: 'Jan 18, 2024', completed: true },
  { id: '5', title: 'Final Approval', date: 'Jan 25, 2024', completed: true },
  { id: '6', title: 'Deliverables Finalized', date: 'Jan 28, 2024', completed: true },
]

const MOCK_TASKS: Task[] = [
  { id: '1', name: 'Review brand guidelines', dueDate: 'Jan 12, 2024', completed: true },
  { id: '2', name: 'Develop initial concept drafts', dueDate: 'Jan 14, 2024', completed: true },
  { id: '3', name: 'Incorporate feedback on color palette', dueDate: 'Jan 19, 2024', completed: false },
  { id: '4', name: 'Prepare final high-resolution deliverables', dueDate: 'Jan 24, 2024', completed: false },
  { id: '5', name: 'Submit deliverables for final approval', dueDate: 'Jan 25, 2024', completed: false },
]

export default function DealWorkspacePage() {
  const [files, setFiles] = useState<FileItem[]>(MOCK_FILES)
  const [messages, setMessages] = useState<Message[]>(MOCK_MESSAGES)
  const [newMessage, setNewMessage] = useState('')
  const [tasks, setTasks] = useState<Task[]>(MOCK_TASKS)

  const handleFileUpload = () => {
    const newFile: FileItem = {
      id: Date.now().toString(),
      name: `New_File_${files.length + 1}.pdf`,
      size: '1.2 MB',
      status: 'draft',
      type: 'pdf',
    }
    setFiles([...files, newFile])
  }

  const handleSendMessage = () => {
    if (!newMessage.trim()) return
    const message: Message = {
      id: Date.now().toString(),
      sender: 'creator',
      senderName: 'You',
      timestamp: new Date().toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit' }),
      content: newMessage,
    }
    setMessages([...messages, message])
    setNewMessage('')
  }

  const handleTaskToggle = (taskId: string) => {
    setTasks(tasks.map(task => task.id === taskId ? { ...task, completed: !task.completed } : task))
  }

  const getStatusBadgeClass = (status: FileItem['status']) => {
    switch (status) {
      case 'draft':
        return 'bg-gray-100 text-gray-700'
      case 'submitted':
        return 'bg-purple-100 text-purple-700'
      case 'approved':
        return 'bg-green-100 text-green-700'
      case 'final':
        return 'bg-purple-600 text-white'
      default:
        return 'bg-gray-100 text-gray-700'
    }
  }

  const getStatusLabel = (status: FileItem['status']) => {
    switch (status) {
      case 'draft':
        return 'Draft'
      case 'submitted':
        return 'Submitted'
      case 'approved':
        return 'Approved'
      case 'final':
        return 'Final'
      default:
        return status
    }
  }

  const getFileIcon = (type: string) => {
    if (type === 'pdf') return <FaFilePdf className="w-5 h-5 text-red-600" />
    if (type === 'image' || type === 'png' || type === 'psd') return <FaFileImage className="w-5 h-5 text-blue-600" />
    return <FaFile className="w-5 h-5 text-gray-600" />
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        {/* Campaign Header Card */}
        <div className="mb-8">
          <div className="bg-white rounded-xl border border-gray-200 p-6">
            <div className="flex items-center justify-between">
            <div>
              <h1 className="text-3xl font-bold text-gray-900 mb-1">Spring Collection Launch</h1>
              <p className="text-lg text-gray-600">FashionNova</p>
            </div>
            <div className="flex items-center gap-4">
              <span className="px-4 py-2 bg-purple-100 text-purple-700 rounded-full text-sm font-medium">
                ƒêang th·ª±c hi·ªán
              </span>
              <button className="px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                Xem chi ti·∫øt chi·∫øn d·ªãch
              </button>
              <button className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity">
                Li√™n h·ªá th∆∞∆°ng hi·ªáu
              </button>
              </div>
            </div>
          </div>
        </div>

        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <div className="lg:col-span-2 space-y-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-2">Qu·∫£n l√Ω t·ªáp</h2>
              <p className="text-sm text-gray-600 mb-6">
                T·∫£i l√™n b·∫£n nh√°p v√† xem c√°c s·∫£n ph·∫©m ƒë·∫ßu ra.
              </p>

              <div
                onClick={handleFileUpload}
                className="border-2 border-dashed border-gray-300 rounded-lg p-12 text-center mb-6 cursor-pointer hover:border-purple-400 transition-colors"
              >
                <FaCloudUploadAlt className="w-12 h-12 text-gray-400 mx-auto mb-4" />
                <p className="text-gray-700 font-medium mb-2">K√©o th·∫£ t·ªáp v√†o ƒë√¢y ho·∫∑c nh·∫•p ƒë·ªÉ duy·ªát</p>
                <p className="text-sm text-gray-500">K√≠ch th∆∞·ªõc t·ªáp t·ªëi ƒëa: 25MB</p>
              </div>

              <div className="space-y-3 mb-6">
                {files.map((file) => (
                  <div key={file.id} className="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                    <div className="flex items-center gap-3">
                      {getFileIcon(file.type)}
                      <div>
                        <p className="font-medium text-gray-900">{file.name}</p>
                        <p className="text-sm text-gray-500">{file.size}</p>
                      </div>
                    </div>
                    <span className={`px-3 py-1 rounded-full text-xs font-medium ${getStatusBadgeClass(file.status)}`}>
                      {getStatusLabel(file.status)}
                    </span>
                  </div>
                ))}
              </div>

              <div className="flex gap-4">
                <button className="flex-1 px-4 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                  L∆∞u b·∫£n nh√°p
                </button>
                <button className="flex-1 px-4 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity">
                  G·ª≠i ƒë·ªÉ xem x√©t
                </button>
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-2">Lu·ªìng ph·∫£n h·ªìi</h2>
              <p className="text-sm text-gray-600 mb-6">
                C·ªông t√°c v·ªõi th∆∞∆°ng hi·ªáu v·ªÅ th·ªèa thu·∫≠n n√†y.
              </p>

              <div className="space-y-4 mb-6 max-h-96 overflow-y-auto">
                {messages.map((message) => (
                  <div
                    key={message.id}
                    className={`flex gap-3 ${message.sender === 'creator' ? 'flex-row-reverse' : ''}`}
                  >
                    <div className={`w-10 h-10 rounded-full flex items-center justify-center flex-shrink-0 ${
                      message.sender === 'creator'
                        ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white'
                        : 'bg-gray-200 text-gray-600'
                    }`}>
                      {message.senderName.charAt(0)}
                    </div>
                    <div className={`flex-1 ${message.sender === 'creator' ? 'text-right' : ''}`}>
                      <div className="flex items-center gap-2 mb-1">
                        <span className="font-medium text-gray-900">{message.senderName}</span>
                        <span className="text-xs text-gray-500">{message.timestamp}</span>
                      </div>
                      <div className={`inline-block px-4 py-2 rounded-lg ${
                        message.sender === 'creator'
                          ? 'bg-purple-100 text-gray-900'
                          : 'bg-gray-100 text-gray-900'
                      }`}>
                        {message.content}
                      </div>
                    </div>
                  </div>
                ))}
              </div>

              <div className="flex gap-3">
                <input
                  type="text"
                  value={newMessage}
                  onChange={(e) => setNewMessage(e.target.value)}
                  onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                  placeholder="Vi·∫øt tin nh·∫Øn c·ªßa b·∫°n..."
                  className="flex-1 px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"
                />
                <button
                  onClick={handleSendMessage}
                  className="px-4 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
                >
                  <FaPaperPlane className="w-5 h-5" />
                </button>
              </div>
            </div>
          </div>

          <div className="space-y-6">
            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-2">L·ªãch s·ª≠ tr·∫°ng th√°i th·ªèa thu·∫≠n</h2>
              <p className="text-sm text-gray-600 mb-6">
                Theo d√µi c√°c c·ªôt m·ªëc quan tr·ªçng v√† ti·∫øn ƒë·ªô.
              </p>

              <div className="space-y-4">
                {MOCK_MILESTONES.map((milestone, index) => (
                  <div key={milestone.id} className="flex gap-4">
                    <div className="flex flex-col items-center">
                      <div className={`w-8 h-8 rounded-full flex items-center justify-center ${
                        milestone.completed
                          ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white'
                          : 'bg-gray-200 text-gray-400'
                      }`}>
                        {milestone.completed && <FaCheck className="w-4 h-4" />}
                      </div>
                      {index < MOCK_MILESTONES.length - 1 && (
                        <div className={`w-0.5 flex-1 ${milestone.completed ? 'bg-purple-300' : 'bg-gray-200'}`} />
                      )}
                    </div>
                    <div className="flex-1 pb-4">
                      <p className={`font-medium ${milestone.completed ? 'text-gray-900' : 'text-gray-400'}`}>
                        {milestone.title}
                      </p>
                      <p className="text-sm text-gray-500">{milestone.date}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>

            <div className="bg-white rounded-xl border border-gray-200 p-6">
              <h2 className="text-xl font-semibold text-gray-900 mb-2">Danh s√°ch c√¥ng vi·ªác</h2>
              <p className="text-sm text-gray-600 mb-6">
                C√°c c√¥ng vi·ªác c√≤n l·∫°i c·ªßa b·∫°n cho th·ªèa thu·∫≠n n√†y.
              </p>

              <div className="space-y-4">
                {tasks.map((task) => (
                  <div key={task.id} className="flex items-start gap-3">
                    <input
                      type="checkbox"
                      checked={task.completed}
                      onChange={() => handleTaskToggle(task.id)}
                      className="mt-1 w-5 h-5 text-purple-600 rounded focus:ring-purple-500"
                    />
                    <div className="flex-1">
                      <p className={`font-medium ${task.completed ? 'text-gray-400 line-through' : 'text-gray-900'}`}>
                        {task.name}
                      </p>
                      <p className="text-sm text-gray-500">ƒê·∫øn h·∫°n: {task.dueDate}</p>
                    </div>
                  </div>
                ))}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/pages/creator/proposals/SubmitProposalPage.tsx">
import { useState, useEffect, useRef } from 'react'
import { useNavigate, useSearchParams } from 'react-router-dom'
import { FaPaperPlane, FaEye, FaCheck, FaTimes, FaChevronDown } from 'react-icons/fa'

interface ProposalFormData {
  campaignId: string
  campaignName: string
  customMessage: string
  serviceId: string
  serviceName: string
  price: string
  notes: string
  timeline: string
  deliverables: string
  attachments: File[]
}

const MOCK_CAMPAIGNS = [
  { id: '1', name: 'Echo Marketing - Digital Marketing Campaign' },
  { id: '2', name: 'Aqua Lifestyle - Health & Wellness Promotion' },
  { id: '3', name: 'Pixel Studios - Software Launch Campaign' },
  { id: '4', name: 'Green Harvest Organics - Product Launch' },
]

const MOCK_SERVICES = [
  { id: '1', name: 'Basic Social Media Kit', basePrice: 250 },
  { id: '2', name: 'Premium Content Creation', basePrice: 750 },
  { id: '3', name: 'Influencer Campaign Management', basePrice: 1500 },
]

export default function SubmitProposalPage() {
  const navigate = useNavigate()
  const [searchParams] = useSearchParams()
  const opportunityId = searchParams.get('opportunityId')

  const [currentStep, setCurrentStep] = useState(1)
  const [formData, setFormData] = useState<ProposalFormData>({
    campaignId: opportunityId || '',
    campaignName: '',
    customMessage: '',
    serviceId: '',
    serviceName: '',
    price: '',
    notes: '',
    timeline: '',
    deliverables: '',
    attachments: [],
  })

  const [campaignDropdownOpen, setCampaignDropdownOpen] = useState(false)
  const [serviceDropdownOpen, setServiceDropdownOpen] = useState(false)

  const steps = [
    { number: 1, label: 'Chi ti·∫øt ƒë·ªÅ xu·∫•t' },
    { number: 2, label: 'D·ªãch v·ª• & Gi√°' },
    { number: 3, label: 'Giao h√†ng & ƒê√≠nh k√®m' },
    { number: 4, label: 'Xem l·∫°i & G·ª≠i' },
  ]

  const handleCampaignSelect = (campaign: { id: string; name: string }) => {
    setFormData({ ...formData, campaignId: campaign.id, campaignName: campaign.name })
    setCampaignDropdownOpen(false)
  }

  const handleServiceSelect = (service: { id: string; name: string; basePrice: number }) => {
    setFormData({
      ...formData,
      serviceId: service.id,
      serviceName: service.name,
      price: service.basePrice.toString(),
    })
    setServiceDropdownOpen(false)
  }

  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {
    if (e.target.files) {
      const files = Array.from(e.target.files)
      setFormData({ ...formData, attachments: [...formData.attachments, ...files] })
    }
  }

  const handleRemoveFile = (index: number) => {
    setFormData({
      ...formData,
      attachments: formData.attachments.filter((_, i) => i !== index),
    })
  }

  const canProceedToNextStep = () => {
    if (currentStep === 1) {
      return formData.campaignId && formData.customMessage.trim()
    }
    if (currentStep === 2) {
      return formData.serviceId && formData.price.trim()
    }
    if (currentStep === 3) {
      return formData.timeline.trim()
    }
    return true
  }

  const handleNext = () => {
    if (canProceedToNextStep() && currentStep < 4) {
      setCurrentStep(currentStep + 1)
    }
  }

  const handlePrevious = () => {
    if (currentStep > 1) {
      setCurrentStep(currentStep - 1)
    }
  }

  const handleSubmit = () => {
    navigate('/dashboard/creator/proposals')
  }

  const selectedCampaign = MOCK_CAMPAIGNS.find(c => c.id === formData.campaignId)
  const selectedService = MOCK_SERVICES.find(s => s.id === formData.serviceId)

  const dropdownRef = useRef<HTMLDivElement>(null)
  const serviceDropdownRef = useRef<HTMLDivElement>(null)

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {
        setCampaignDropdownOpen(false)
      }
      if (serviceDropdownRef.current && !serviceDropdownRef.current.contains(event.target as Node)) {
        setServiceDropdownOpen(false)
      }
    }

    document.addEventListener('mousedown', handleClickOutside)
    return () => document.removeEventListener('mousedown', handleClickOutside)
  }, [])

  return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <div className="mb-8">
            <h1 className="text-3xl font-bold text-gray-900 mb-2">G·ª≠i ƒë·ªÅ xu·∫•t c·ªßa b·∫°n</h1>
            <p className="text-gray-600 mb-6">
              T·∫°o m·ªôt ƒë·ªÅ xu·∫•t chi·∫øn th·∫Øng ƒë·ªÉ ƒë∆∞·ª£c c√°c th∆∞∆°ng hi·ªáu ch√∫ √Ω.
            </p>

            <div className="flex items-center gap-6 pb-4 border-b border-gray-200">
              <div className="flex items-center gap-2">
                <div className="w-8 h-8 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center">
                  <FaPaperPlane className="w-4 h-4 text-white" />
                </div>
                <span className="text-sm font-medium text-gray-900">ƒê√£ g·ª≠i</span>
              </div>
              <div className="flex items-center gap-2">
                <div className="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                  <FaEye className="w-4 h-4 text-gray-500" />
                </div>
                <span className="text-sm text-gray-600">ƒê√£ xem</span>
              </div>
              <div className="flex items-center gap-2">
                <div className="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                  <FaCheck className="w-4 h-4 text-gray-500" />
                </div>
                <span className="text-sm text-gray-600">ƒê√£ ch·∫•p nh·∫≠n</span>
              </div>
              <div className="flex items-center gap-2">
                <div className="w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center">
                  <FaTimes className="w-4 h-4 text-gray-500" />
                </div>
                <span className="text-sm text-gray-600">ƒê√£ t·ª´ ch·ªëi</span>
              </div>
            </div>
          </div>

          <div className="grid grid-cols-1 lg:grid-cols-4 gap-8">
            <div className="lg:col-span-1">
              <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
                <h2 className="text-lg font-semibold text-gray-900 mb-2">C√°c b∆∞·ªõc ƒë·ªÅ xu·∫•t</h2>
                <p className="text-sm text-gray-600 mb-6">
                  L√†m theo c√°c b∆∞·ªõc ƒë·ªÉ ho√†n th√†nh ƒë·ªÅ xu·∫•t c·ªßa b·∫°n
                </p>
                <div className="space-y-2">
                  {steps.map((step) => (
                    <div
                      key={step.number}
                      className={`px-4 py-3 rounded-lg ${
                        currentStep === step.number
                          ? 'bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white'
                          : 'bg-gray-50 text-gray-700'
                      }`}
                    >
                      <div className="flex items-center gap-3">
                        <span className="font-semibold">{step.number}</span>
                        <span className="text-sm font-medium">{step.label}</span>
                      </div>
                    </div>
                  ))}
                </div>
              </div>
            </div>

            <div className="lg:col-span-3">
              <div className="bg-white rounded-xl border border-gray-200 p-8">
                {currentStep === 1 && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-2">1. Chi ti·∫øt ƒë·ªÅ xu·∫•t</h2>
                    <p className="text-gray-600 mb-6">
                      Ch·ªçn chi·∫øn d·ªãch v√† th√™m th√¥ng ƒëi·ªáp t√πy ch·ªânh.
                    </p>

                    <div className="space-y-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Chi·∫øn d·ªãch *
                        </label>
                        <div className="relative" ref={dropdownRef}>
                          <button
                            type="button"
                            onClick={() => setCampaignDropdownOpen(!campaignDropdownOpen)}
                            className="w-full px-4 py-2.5 text-left border border-gray-300 rounded-lg bg-white flex items-center justify-between hover:border-gray-400 transition-colors"
                          >
                            <span className={selectedCampaign ? 'text-gray-900' : 'text-gray-500'}>
                              {selectedCampaign?.name || 'Ch·ªçn chi·∫øn d·ªãch'}
                            </span>
                            <FaChevronDown className="w-4 h-4 text-gray-500" />
                          </button>
                          {campaignDropdownOpen && (
                            <div className="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                              {MOCK_CAMPAIGNS.map((campaign) => (
                                <button
                                  key={campaign.id}
                                  type="button"
                                  onClick={() => handleCampaignSelect(campaign)}
                                  className="w-full px-4 py-2.5 text-left hover:bg-gray-50 transition-colors"
                                >
                                  {campaign.name}
                                </button>
                              ))}
                            </div>
                          )}
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Th√¥ng ƒëi·ªáp t√πy ch·ªânh *
                        </label>
                        <textarea
                          value={formData.customMessage}
                          onChange={(e) => setFormData({ ...formData, customMessage: e.target.value })}
                          placeholder="Gi·ªõi thi·ªáu b·∫£n th√¢n v√† gi·∫£i th√≠ch t·∫°i sao b·∫°n ph√π h·ª£p v·ªõi chi·∫øn d·ªãch n√†y."
                          rows={8}
                          className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent resize-y"
                        />
                      </div>
                    </div>
                  </div>
                )}

                {currentStep === 2 && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-2">2. D·ªãch v·ª• & Gi√°</h2>
                    <p className="text-gray-600 mb-6">
                      Ch·ªçn d·ªãch v·ª• v√† ƒë·∫∑t gi√° cho ƒë·ªÅ xu·∫•t n√†y.
                    </p>

                    <div className="space-y-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          D·ªãch v·ª• *
                        </label>
                        <div className="relative" ref={serviceDropdownRef}>
                          <button
                            type="button"
                            onClick={() => setServiceDropdownOpen(!serviceDropdownOpen)}
                            className="w-full px-4 py-2.5 text-left border border-gray-300 rounded-lg bg-white flex items-center justify-between hover:border-gray-400 transition-colors"
                          >
                            <span className={selectedService ? 'text-gray-900' : 'text-gray-500'}>
                              {selectedService?.name || 'Ch·ªçn d·ªãch v·ª•'}
                            </span>
                            <FaChevronDown className="w-4 h-4 text-gray-500" />
                          </button>
                          {serviceDropdownOpen && (
                            <div className="absolute z-10 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-y-auto">
                              {MOCK_SERVICES.map((service) => (
                                <button
                                  key={service.id}
                                  type="button"
                                  onClick={() => handleServiceSelect(service)}
                                  className="w-full px-4 py-2.5 text-left hover:bg-gray-50 transition-colors"
                                >
                                  <div className="font-medium text-gray-900">{service.name}</div>
                                  <div className="text-sm text-gray-500">Gi√° c∆° b·∫£n: ${service.basePrice}</div>
                                </button>
                              ))}
                            </div>
                          )}
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Gi√° (USD) *
                        </label>
                        <input
                          type="number"
                          value={formData.price}
                          onChange={(e) => setFormData({ ...formData, price: e.target.value })}
                          placeholder="Nh·∫≠p gi√°"
                          min="1"
                          className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Ghi ch√∫ (t√πy ch·ªçn)
                        </label>
                        <textarea
                          value={formData.notes}
                          onChange={(e) => setFormData({ ...formData, notes: e.target.value })}
                          placeholder="Th√™m ghi ch√∫ v·ªÅ d·ªãch v·ª• ho·∫∑c gi√°"
                          rows={4}
                          className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent resize-y"
                        />
                      </div>
                    </div>
                  </div>
                )}

                {currentStep === 3 && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-2">3. Giao h√†ng & ƒê√≠nh k√®m</h2>
                    <p className="text-gray-600 mb-6">
                      Ch·ªâ ƒë·ªãnh th·ªùi gian giao h√†ng v√† ƒë√≠nh k√®m c√°c t·ªáp li√™n quan.
                    </p>

                    <div className="space-y-6">
                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          Th·ªùi gian ∆∞·ªõc t√≠nh *
                        </label>
                        <input
                          type="text"
                          value={formData.timeline}
                          onChange={(e) => setFormData({ ...formData, timeline: e.target.value })}
                          placeholder="V√≠ d·ª•: 5-7 ng√†y l√†m vi·ªác"
                          className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent"
                        />
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          ƒê√≠nh k√®m (t√πy ch·ªçn)
                        </label>
                        <div className="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center">
                          <input
                            type="file"
                            multiple
                            onChange={handleFileSelect}
                            className="hidden"
                            id="file-upload"
                          />
                          <label
                            htmlFor="file-upload"
                            className="cursor-pointer inline-block px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors"
                          >
                            Ch·ªçn t·ªáp
                          </label>
                          {formData.attachments.length > 0 && (
                            <div className="mt-4 space-y-2">
                              {formData.attachments.map((file, index) => (
                                <div
                                  key={index}
                                  className="flex items-center justify-between px-4 py-2 bg-gray-50 rounded-lg"
                                >
                                  <span className="text-sm text-gray-700">{file.name}</span>
                                  <button
                                    type="button"
                                    onClick={() => handleRemoveFile(index)}
                                    className="text-red-600 hover:text-red-700"
                                  >
                                    <FaTimes className="w-4 h-4" />
                                  </button>
                                </div>
                              ))}
                            </div>
                          )}
                        </div>
                      </div>

                      <div>
                        <label className="block text-sm font-medium text-gray-700 mb-2">
                          S·∫£n ph·∫©m ƒë·∫ßu ra (t√πy ch·ªçn)
                        </label>
                        <textarea
                          value={formData.deliverables}
                          onChange={(e) => setFormData({ ...formData, deliverables: e.target.value })}
                          placeholder="M√¥ t·∫£ c√°c s·∫£n ph·∫©m ƒë·∫ßu ra c·ª• th·ªÉ"
                          rows={4}
                          className="w-full px-4 py-2.5 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#6366F1] focus:border-transparent resize-y"
                        />
                      </div>
                    </div>
                  </div>
                )}

                {currentStep === 4 && (
                  <div>
                    <h2 className="text-2xl font-semibold text-gray-900 mb-2">4. Xem l·∫°i & G·ª≠i</h2>
                    <p className="text-gray-600 mb-6">
                      Xem l·∫°i th√¥ng tin ƒë·ªÅ xu·∫•t c·ªßa b·∫°n tr∆∞·ªõc khi g·ª≠i.
                    </p>

                    <div className="space-y-6">
                      <div className="border border-gray-200 rounded-lg p-6">
                        <h3 className="font-semibold text-gray-900 mb-4">Chi ti·∫øt ƒë·ªÅ xu·∫•t</h3>
                        <div className="space-y-3">
                          <div>
                            <span className="text-sm text-gray-600">Chi·∫øn d·ªãch:</span>
                            <p className="text-gray-900">{formData.campaignName || '-'}</p>
                          </div>
                          <div>
                            <span className="text-sm text-gray-600">Th√¥ng ƒëi·ªáp:</span>
                            <p className="text-gray-900 whitespace-pre-wrap">{formData.customMessage || '-'}</p>
                          </div>
                        </div>
                      </div>

                      <div className="border border-gray-200 rounded-lg p-6">
                        <h3 className="font-semibold text-gray-900 mb-4">D·ªãch v·ª• & Gi√°</h3>
                        <div className="space-y-3">
                          <div>
                            <span className="text-sm text-gray-600">D·ªãch v·ª•:</span>
                            <p className="text-gray-900">{formData.serviceName || '-'}</p>
                          </div>
                          <div>
                            <span className="text-sm text-gray-600">Gi√°:</span>
                            <p className="text-gray-900">${formData.price || '-'}</p>
                          </div>
                          {formData.notes && (
                            <div>
                              <span className="text-sm text-gray-600">Ghi ch√∫:</span>
                              <p className="text-gray-900">{formData.notes}</p>
                            </div>
                          )}
                        </div>
                      </div>

                      <div className="border border-gray-200 rounded-lg p-6">
                        <h3 className="font-semibold text-gray-900 mb-4">Giao h√†ng & ƒê√≠nh k√®m</h3>
                        <div className="space-y-3">
                          <div>
                            <span className="text-sm text-gray-600">Th·ªùi gian ∆∞·ªõc t√≠nh:</span>
                            <p className="text-gray-900">{formData.timeline || '-'}</p>
                          </div>
                          {formData.deliverables && (
                            <div>
                              <span className="text-sm text-gray-600">S·∫£n ph·∫©m ƒë·∫ßu ra:</span>
                              <p className="text-gray-900 whitespace-pre-wrap">{formData.deliverables}</p>
                            </div>
                          )}
                          {formData.attachments.length > 0 && (
                            <div>
                              <span className="text-sm text-gray-600">T·ªáp ƒë√≠nh k√®m:</span>
                              <div className="mt-2 space-y-1">
                                {formData.attachments.map((file, index) => (
                                  <p key={index} className="text-gray-900 text-sm">{file.name}</p>
                                ))}
                              </div>
                            </div>
                          )}
                        </div>
                      </div>
                    </div>
                  </div>
                )}

                <div className="flex items-center justify-end gap-4 mt-8 pt-6 border-t border-gray-200">
                  {currentStep > 1 && (
                    <button
                      onClick={handlePrevious}
                      className="px-6 py-2.5 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors"
                    >
                      Tr∆∞·ªõc
                    </button>
                  )}
                  {currentStep < 4 ? (
                    <button
                      onClick={handleNext}
                      disabled={!canProceedToNextStep()}
                      className="px-6 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                      Ti·∫øp theo
                    </button>
                  ) : (
                    <button
                      onClick={handleSubmit}
                      className="px-6 py-2.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white rounded-lg hover:opacity-90 transition-opacity"
                    >
                      G·ª≠i ƒë·ªÅ xu·∫•t
                    </button>
                  )}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
  )
}
</file>

<file path="src/pages/public/SignupPage.tsx">
import { useState } from 'react'
import { Link } from 'react-router-dom'
import { getSupabase } from '../../lib/supabase'

export default function SignupPage() {
  const [email, setEmail] = useState('')
  const [password, setPassword] = useState('')
  const [confirmPassword, setConfirmPassword] = useState('')
  const [error, setError] = useState('')
  const [loading, setLoading] = useState(false)
  const [success, setSuccess] = useState(false)
  const supabase = getSupabase()

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setError('')

    if (password !== confirmPassword) {
      setError('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp')
      return
    }

    if (password.length < 6) {
      setError('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±')
      return
    }

    setLoading(true)

    try {
      const { data, error } = await supabase.auth.signUp({
        email,
        password,
        options: {
          emailRedirectTo: `${window.location.origin}/verify-email`,
        },
      })
      
      if (error) {
        setError(error.message || 'ƒêƒÉng k√Ω th·∫•t b·∫°i')
        setLoading(false)
        return
      }
      
      setSuccess(true)
      setLoading(false)

    } catch (err) {
      setError('C√≥ l·ªói x·∫£y ra')
      setLoading(false)
    }
  }

  const handleGoogleSignup = async () => {
    const { data, error } = await supabase.auth.signInWithOAuth({
      provider: 'google',
      options: {
        redirectTo: `${window.location.origin}/app`,
      },
    })

    if (error) {
      setError(error.message)
      return
    }

    if (data.url) {
      window.location.href = data.url
    }
  }

  return (
    <div className="min-h-screen flex items-center justify-center bg-[#F9FAFB] px-6 pt-16">
      <div className="w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden flex">
        <div className="hidden lg:flex w-[45%] bg-gradient-to-br from-[#6366F1]/20 via-[#7C3AED]/15 to-[#EC4899]/20">
          <div className="flex flex-col px-12 pt-12 items-center">
            <img
              src="/logo/logo.png"
              alt="ALINO"
              className="w-40 h-40 mb-6"
            />
            <h1 className="text-3xl font-semibold text-[#1F2937] mb-3">
              T·∫°o t√†i kho·∫£n m·ªõi
            </h1>
            <p className="text-[#6B7280] leading-relaxed">
              B·∫Øt ƒë·∫ßu h√†nh tr√¨nh h·ª£p t√°c v·ªõi Alino
            </p>
          </div>
        </div>

        <div className="w-full lg:w-[55%] px-10 py-8 flex items-center justify-center">
          <div className="w-full max-w-sm">
            <h2 className="text-2xl font-semibold mb-2">ƒêƒÉng k√Ω</h2>
            <p className="text-sm text-[#6B7280] mb-6">
              T·∫°o t√†i kho·∫£n m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu
            </p>

            {error && (
              <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
                {error}
              </div>
            )}

            <div className="relative">
              <div className={`transition-opacity duration-200 ${success ? 'opacity-0 invisible' : 'opacity-100 visible'}`}>
                <form onSubmit={handleSubmit} className="space-y-4">
                  <input
                    type="email"
                    placeholder="Email"
                    value={email}
                    onChange={(e) => setEmail(e.target.value)}
                    className="w-full px-3 py-2.5 border rounded-lg"
                    required
                  />

                  <input
                    type="password"
                    placeholder="M·∫≠t kh·∫©u"
                    value={password}
                    onChange={(e) => setPassword(e.target.value)}
                    className="w-full px-3 py-2.5 border rounded-lg"
                    required
                  />

                  <input
                    type="password"
                    placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u"
                    value={confirmPassword}
                    onChange={(e) => setConfirmPassword(e.target.value)}
                    className="w-full px-3 py-2.5 border rounded-lg"
                    required
                  />

                  <button
                    type="submit"
                    disabled={loading}
                    className="w-full py-2.5 rounded-lg text-white font-medium bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
                  >
                    {loading ? 'ƒêang t·∫°o t√†i kho·∫£n...' : 'ƒêƒÉng k√Ω'}
                  </button>
                </form>

                <div className="my-5 text-center text-xs text-[#9CA3AF]">HO·∫∂C</div>

                <button
                  onClick={handleGoogleSignup}
                  className="w-full py-2.5 border rounded-lg text-sm hover:bg-gray-50 flex items-center justify-center gap-3"
                >
                  <svg className="w-5 h-5" viewBox="0 0 24 24">
                    <path
                      fill="#4285F4"
                      d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                    />
                    <path
                      fill="#34A853"
                      d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                    />
                    <path
                      fill="#FBBC05"
                      d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                    />
                    <path
                      fill="#EA4335"
                      d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                    />
                  </svg>
                  ƒêƒÉng k√Ω v·ªõi Google
                </button>
              </div>

              <div className={`absolute inset-0 flex items-center transition-opacity duration-200 ${success ? 'opacity-100 visible' : 'opacity-0 invisible'}`}>
                <div className="w-full p-4 bg-green-50 border border-green-200 rounded-lg text-green-700 text-sm">
                  <p className="font-medium mb-1">T√†i kho·∫£n ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng.</p>
                  <p>Vui l√≤ng ki·ªÉm tra email ƒë·ªÉ x√°c th·ª±c t√†i kho·∫£n.</p>
                </div>
              </div>
            </div>

            <p className="mt-6 text-center text-sm text-[#6B7280]">
              {success ? (
                <Link to="/login" className="text-[#6366F1] font-medium">
                  ƒêƒÉng nh·∫≠p
                </Link>
              ) : (
                <>
                  ƒê√£ c√≥ t√†i kho·∫£n?{' '}
                  <Link to="/login" className="text-[#6366F1] font-medium">
                    ƒêƒÉng nh·∫≠p
                  </Link>
                </>
              )}
            </p>
          </div>
        </div>
      </div>
    </div>
  )
}
</file>

<file path="src/vite-env.d.ts">
/// <reference types="vite/client" />
</file>

<file path="src/app/AppGate.tsx">
import { useEffect, useState, ReactNode } from 'react'
import { useNavigate, useLocation } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'
import { getSupabase } from '../lib/supabase'
import { LoadingState } from '../components/shared/LoadingState'

export default function AppGate({ children }: { children: ReactNode }) {
  const { session, loading: authLoading } = useAuth()
  const navigate = useNavigate()
  const location = useLocation()
  const supabase = getSupabase()

  const [isProcessing, setIsProcessing] = useState(false)

  const isAppRoute = location.pathname.startsWith('/app')

  useEffect(() => {
    if (!isAppRoute) return
    if (authLoading) return
    if (isProcessing) return

    // Not logged in
    if (!session) {
      navigate('/login', { replace: true })
      return
    }

    // Email not confirmed
    if (!session.user.email_confirmed_at) {
      supabase.auth.signOut().finally(() => {
        navigate('/login', { replace: true })
      })
      return
    }

    runGate()
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [authLoading, session, isAppRoute])

  async function runGate() {
    if (!session) return

    setIsProcessing(true)

    try {
      const { data: profile, error } = await supabase
        .from('profiles')
        .select('role, onboarding_completed')
        .eq('id', session.user.id)
        .maybeSingle()

      if (error || !profile || !profile.role) {
        navigate('/role', { replace: true })
        return
      }

      if (!profile.onboarding_completed) {
        navigate(`/onboarding/${profile.role}`, { replace: true })
        return
      }

      const dashboardPath =
        profile.role === 'creator'
          ? '/dashboard/creator'
          : '/dashboard/brand'

      navigate(dashboardPath, { replace: true })
    } catch (err) {
      console.error('AppGate error:', err)
      navigate('/login', { replace: true })
    } finally {
      setIsProcessing(false)
    }
  }

  if (isAppRoute && (authLoading || isProcessing)) {
    return <LoadingState />
  }

  return <>{children}</>
}
</file>

<file path="src/app/brandRoutes.tsx">
import { Navigate } from 'react-router-dom'

/**
 * BrandRoutes: Legacy route component - redirect-only
 * 
 * All old /brand/* routes must go through AppGate at /app.
 * This component redirects to /app which handles authentication,
 * role selection, and onboarding before routing to the correct dashboard.
 * 
 * Architecture: This is a redirect-only component that MUST NOT accept children.
 * It should only be used as a terminal route element: element={<BrandRoutes />}
 * Using it as a child of wrapper components violates the architectural contract.
 */
export function BrandRoutes(): JSX.Element {
  // Guard: All old /brand/* routes must go through AppGate
  return <Navigate to="/app" replace />
}
</file>

<file path="src/app/creatorRoutes.tsx">
import { Navigate } from 'react-router-dom'

/**
 * CreatorRoutes: Legacy route component - redirect-only
 * 
 * All old /creator/* routes must go through AppGate at /app.
 * This component redirects to /app which handles authentication,
 * role selection, and onboarding before routing to the correct dashboard.
 * 
 * Architecture: This is a redirect-only component that MUST NOT accept children.
 * It should only be used as a terminal route element: element={<CreatorRoutes />}
 * Using it as a child of wrapper components violates the architectural contract.
 */
export function CreatorRoutes(): JSX.Element {
  // Guard: All old /creator/* routes must go through AppGate
  return <Navigate to="/app" replace />
}
</file>

<file path="src/app/dashboardRoutes.tsx">
import { Routes, Route, useParams } from 'react-router-dom'
import CreatorDashboardLayout from '../components/creator/CreatorDashboardLayout'
import BrandDashboardLayout from '../components/brand/BrandDashboardLayout'
import { DashboardRouteGuard } from './routeGuards'
import { getRoutesForRole, fallbackRoute, type RouteRole } from './routeConfig'

/**
 * DashboardRoutes: Stable final destination routes
 * 
 * IMPORTANT: These routes are OUTSIDE AppGate and should NEVER redirect.
 * They are the final destination after onboarding is completed.
 * 
 * If user needs to complete onboarding or select role, they should go through /app
 * (which is handled by AppGate), not through dashboard redirects.
 * 
 * This component:
 * 1. Uses DashboardRouteGuard for authentication and role validation
 * 2. Renders routes from centralized route configuration
 * 3. Applies appropriate layout based on role
 * 
 * No onboarding checks, no role selection redirects - those are handled by AppGate at /app
 */
function DashboardRoutes() {
  const { role } = useParams<{ role: RouteRole }>()
  const routes = role ? getRoutesForRole(role) : []
  const Layout = role === 'creator' ? CreatorDashboardLayout : BrandDashboardLayout

  if (!role || routes.length === 0) {
    return null // Guard will handle redirect
  }

  return (
    <DashboardRouteGuard>
      <Routes>
        <Route element={<Layout />}>
          {routes.map((route) => {
            // Index route (empty path) should use index prop
            if (route.path === '' || route.exact) {
              return (
                <Route
                  key={route.path || 'index'}
                  index
                  element={route.element}
                />
              )
            }
            return (
              <Route
                key={route.path}
                path={route.path}
                element={route.element}
              />
            )
          })}
          <Route path={fallbackRoute.path} element={fallbackRoute.element} />
        </Route>
      </Routes>
    </DashboardRouteGuard>
  )
}

export default DashboardRoutes
</file>

<file path="src/components/dashboard/DashboardHeader.tsx">
import { Link, useNavigate, useLocation } from 'react-router-dom'
import { useState } from 'react'
import { FaBell } from 'react-icons/fa'
import { useAuth } from '../../hooks/useAuth'
import { useProfile } from '../../hooks/useProfile'
import UserMenu from '../layout/UserMenu'
import NotificationModal from '../shared/NotificationModal'

/**
 * DashboardHeader
 * - Fixed header for dashboard pages
 * - Height: h-16 (same as Landing Header)
 * - Left: w-64 (aligned with Sidebar) ‚Üí Logo + ALINO centered
 * - Middle: Title + Subtitle (auto by route)
 * - Right: Notification + UserMenu (tight spacing)
 */
export default function DashboardHeader() {
  const { session } = useAuth()
  const { profile } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const navigate = useNavigate()
  const location = useLocation()
  const [isNotificationModalOpen, setIsNotificationModalOpen] = useState(false)

  const handleLogoClick = (e: React.MouseEvent) => {
    // Always navigate to landing page
    e.preventDefault()
    navigate('/', { replace: false })
  }

  const fullName =
    (profile?.role === 'creator' ? (profile as any).full_name : profile?.role === 'brand' ? (profile as any).brand_name : null) ||
    session?.user?.user_metadata?.display_name ||
    ''

  const avatarUrl =
    (profile?.role === 'creator' ? (profile as any).avatar_url : null) ||
    session?.user?.user_metadata?.avatar_url ||
    undefined

  // üîî mock unread count
  const unreadNotificationCount = 4

  /* ------------------------------
   * Title & Subtitle by route
   * ------------------------------ */
  const pathname = location.pathname

  const getTitleAndSubtitle = () => {
    // Creator dashboard routes
    if (pathname === '/dashboard/creator') {
      const displayName = (profile?.role === 'creator' ? (profile as any).full_name : profile?.role === 'brand' ? (profile as any).brand_name : null) || session?.user?.user_metadata?.display_name || 'Creator'
      return {
        title: `Ch√†o m·ª´ng, ${displayName}!`,
        subtitle: 'T·ªïng quan t√†i kho·∫£n ALINO c·ªßa b·∫°n h√¥m nay.',
      }
    }

    if (pathname.startsWith('/dashboard/creator/profile')) {
      return {
        title: 'H·ªì s∆° c√° nh√¢n',
        subtitle: 'Qu·∫£n l√Ω th√¥ng tin hi·ªÉn th·ªã c·ªßa b·∫°n v·ªõi ƒë·ªëi t√°c',
      }
    }

    if (pathname.startsWith('/dashboard/creator/settings')) {
      return {
        title: 'C√†i ƒë·∫∑t',
        subtitle: 'Qu·∫£n l√Ω c√†i ƒë·∫∑t t√†i kho·∫£n v√† t√πy ch·ªçn',
      }
    }

    if (pathname.startsWith('/dashboard/creator/services')) {
      return {
        title: 'D·ªãch v·ª• & B·∫£ng gi√°',
        subtitle: 'Thi·∫øt l·∫≠p d·ªãch v·ª• v√† m·ª©c gi√° b·∫°n cung c·∫•p',
      }
    }

    if (pathname.startsWith('/dashboard/creator/discovery')) {
      return {
        title: 'C∆° h·ªôi h·ª£p t√°c',
        subtitle: 'Kh√°m ph√° c√°c c∆° h·ªôi ph√π h·ª£p v·ªõi b·∫°n',
      }
    }

    if (pathname.startsWith('/dashboard/creator/proposals')) {
      return {
        title: 'ƒê·ªÅ xu·∫•t',
        subtitle: 'Qu·∫£n l√Ω c√°c ƒë·ªÅ xu·∫•t h·ª£p t√°c ƒëang di·ªÖn ra',
      }
    }

    if (pathname.startsWith('/dashboard/creator/workspace')) {
      return {
        title: 'Trung t√¢m l√†m vi·ªác',
        subtitle: 'Theo d√µi v√† x·ª≠ l√Ω c√°c ho·∫°t ƒë·ªông h·ª£p t√°c',
      }
    }

    if (pathname.startsWith('/dashboard/creator/analytics')) {
      return {
        title: 'Ph√¢n t√≠ch',
        subtitle: 'Theo d√µi hi·ªáu su·∫•t v√† tƒÉng tr∆∞·ªüng c·ªßa b·∫°n',
      }
    }

    // Brand dashboard routes
    if (pathname === '/dashboard/brand') {
      return {
        title: 'Brand Dashboard',
        subtitle: 'T·ªïng quan chi·∫øn d·ªãch v√† hi·ªáu su·∫•t',
      }
    }

    if (pathname.startsWith('/dashboard/brand/discovery')) {
      return {
        title: 'T√¨m ki·∫øm Creator',
        subtitle: 'Kh√°m ph√° v√† k·∫øt n·ªëi v·ªõi c√°c creator ph√π h·ª£p',
      }
    }

    if (pathname.startsWith('/dashboard/brand/campaigns')) {
      return {
        title: 'Chi·∫øn d·ªãch',
        subtitle: 'Qu·∫£n l√Ω c√°c chi·∫øn d·ªãch marketing c·ªßa b·∫°n',
      }
    }

    if (pathname.startsWith('/dashboard/brand/proposals')) {
      return {
        title: 'H·ªôp th∆∞ ƒë·ªÅ xu·∫•t',
        subtitle: 'Xem v√† qu·∫£n l√Ω c√°c ƒë·ªÅ xu·∫•t t·ª´ creator',
      }
    }

    if (pathname.startsWith('/dashboard/brand/workspace')) {
      return {
        title: 'Kh√¥ng gian l√†m vi·ªác',
        subtitle: 'Theo d√µi ti·∫øn ƒë·ªô v√† c·ªông t√°c v·ªõi creator',
      }
    }

    if (pathname.startsWith('/dashboard/brand/analytics')) {
      return {
        title: 'Ph√¢n t√≠ch',
        subtitle: 'Theo d√µi hi·ªáu su·∫•t chi·∫øn d·ªãch v√† ROI',
      }
    }

    if (pathname.startsWith('/dashboard/brand/settings')) {
      return {
        title: 'C√†i ƒë·∫∑t',
        subtitle: 'Qu·∫£n l√Ω c√†i ƒë·∫∑t t√†i kho·∫£n v√† t√πy ch·ªçn',
      }
    }

    return { title: '', subtitle: '' }
  }

  const { title, subtitle } = getTitleAndSubtitle()

  return (
    <>
      <header className="fixed top-0 inset-x-0 z-50 h-16 bg-white/80 backdrop-blur-xl border-b border-black/5">
  <div className="h-full flex">
    {/* LEFT: Sidebar-aligned block */}
    <div className="w-64 h-full flex items-center justify-center border-r border-gray-200 flex-shrink-0">
      <Link
        to="/"
        onClick={handleLogoClick}
        className="flex items-center gap-3"
      >
        <img src="/logo/logo.png" alt="ALINO" className="w-8 h-8" />
        <span className="font-bold text-2xl leading-none bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
          ALINO
        </span>
      </Link>
    </div>

    {/* RIGHT AREA: SAME CONTAINER AS LANDING */}
    <div className="flex-1">
      <div className="max-w-7xl mx-auto px-6 h-full flex items-center justify-between">
        {/* Title */}
        <div className="flex flex-col justify-center">
          <h1 className="text-lg font-semibold text-gray-900 leading-tight">
            {title}
          </h1>
          {subtitle && (
            <p className="text-sm text-gray-500 leading-tight mt-0.5">
              {subtitle}
            </p>
          )}
        </div>

        {/* User actions ‚Äì EXACT SAME POSITION AS LANDING */}
        {session && (
          <div className="flex items-center gap-2">
            <button
              onClick={() => setIsNotificationModalOpen(true)}
              className="relative p-2 rounded-lg text-gray-600 hover:text-[#6366F1] hover:bg-gray-100 transition"
            >
              <FaBell className="w-5 h-5" />
              {unreadNotificationCount > 0 && (
                <span className="absolute -top-1 -right-1 w-4 h-4 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-xs font-bold rounded-full flex items-center justify-center">
                  {unreadNotificationCount}
                </span>
              )}
            </button>

            <UserMenu
              userEmail={session.user.email || ''}
              displayName={fullName}
              avatarUrl={avatarUrl}
              role={profile?.role || null}
            />
          </div>
        )}
      </div>
    </div>
  </div>
</header>

      <NotificationModal
        isOpen={isNotificationModalOpen}
        onClose={() => setIsNotificationModalOpen(false)}
      />
    </>
  )
}
</file>

<file path="src/pages/creator/services/ServicesPage.tsx">
import { useState, useEffect } from 'react'
import { useAuth } from '../../../hooks/useAuth'
import { useProfile } from '../../../hooks/useProfile'
import { getSupabase } from '../../../lib/supabase'
import { FaCheck, FaEdit, FaEye, FaTrash, FaTimes, FaExternalLinkAlt } from 'react-icons/fa'
import UpgradePlanModal from '../../../components/shared/UpgradePlanModal'
import Toast from '../../../components/shared/Toast'
import type { CreatorProfile } from '../../../types/profile'

// Type guard to check if profile is a CreatorProfile
function isCreatorProfile(profile: any): profile is CreatorProfile {
  return profile?.role === 'creator'
}

interface Service {
  id: string
  user_id: string
  name: string
  price: number
  description: string
  deliverables: string[]
  estimated_timeline: string
  status: 'active' | 'draft' | 'hidden'
  created_at: string
  updated_at: string
}

type ServiceStatus = 'active' | 'draft' | 'hidden'
type PlanType = 'free' | 'pro' | 'business'

const FREE_PLAN_MAX_SERVICES = 3
const PRO_PLAN_MAX_SERVICES = 10

export default function ServicesPage() {
  const { session } = useAuth()
  const { profile } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const supabase = getSupabase()

  const [services, setServices] = useState<Service[]>([])
  const [loading, setLoading] = useState(true)
  const [showForm, setShowForm] = useState(false)
  const [editingService, setEditingService] = useState<Service | null>(null)
  const [showUpgradeModal, setShowUpgradeModal] = useState(false)
  const [toast, setToast] = useState<{ message: string; type: 'success' | 'error' } | null>(null)

  // Form state
  const [formData, setFormData] = useState({
    name: '',
    price: '',
    description: '',
    deliverables: '',
    estimated_timeline: '',
  })
  const [formErrors, setFormErrors] = useState<Record<string, string>>({})

  // TODO: Get from subscription - currently using is_admin as proxy for business plan
  const currentPlan: PlanType = profile?.is_admin ? 'business' : 'free'
  const canShowPricing = currentPlan !== 'free'
  
  // Calculate max services based on plan type
  const getMaxServices = (plan: PlanType): number => {
    if (plan === 'free') return FREE_PLAN_MAX_SERVICES
    if (plan === 'pro') return PRO_PLAN_MAX_SERVICES
    return Infinity // business plan has unlimited services
  }
  const maxServices = getMaxServices(currentPlan)
  const activeServicesCount = services.filter(s => s.status === 'active').length

  useEffect(() => {
    if (session?.user?.id) {
      loadServices()
    }
  }, [session?.user?.id])

  const loadServices = async () => {
    try {
      setLoading(true)
      const { data, error } = await supabase
        .from('creator_services')
        .select('*')
        .eq('user_id', session?.user?.id)
        .order('created_at', { ascending: false })

      if (error) throw error
      setServices(data || [])
    } catch (error: any) {
      console.error('Error loading services:', error)
      setToast({ message: 'Kh√¥ng th·ªÉ t·∫£i danh s√°ch d·ªãch v·ª•', type: 'error' })
    } finally {
      setLoading(false)
    }
  }

  const validateForm = (): boolean => {
    const errors: Record<string, string> = {}

    if (!formData.name.trim()) {
      errors.name = 'T√™n d·ªãch v·ª• l√† b·∫Øt bu·ªôc'
    } else if (formData.name.trim().length < 3) {
      errors.name = 'T√™n d·ªãch v·ª• ph·∫£i c√≥ √≠t nh·∫•t 3 k√Ω t·ª±'
    } else if (formData.name.trim().length > 100) {
      errors.name = 'T√™n d·ªãch v·ª• kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±'
    }

    if (!formData.price.trim()) {
      errors.price = 'Gi√° l√† b·∫Øt bu·ªôc'
    } else {
      const priceNum = parseInt(formData.price)
      if (isNaN(priceNum) || priceNum < 1) {
        errors.price = 'Gi√° ph·∫£i l√† s·ªë d∆∞∆°ng t·ªëi thi·ªÉu $1'
      } else if (priceNum > 999999) {
        errors.price = 'Gi√° kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° $999,999'
      }
    }

    if (!formData.description.trim()) {
      errors.description = 'M√¥ t·∫£ l√† b·∫Øt bu·ªôc'
    } else if (formData.description.trim().length < 20) {
      errors.description = 'M√¥ t·∫£ ph·∫£i c√≥ √≠t nh·∫•t 20 k√Ω t·ª±'
    } else if (formData.description.trim().length > 1000) {
      errors.description = 'M√¥ t·∫£ kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 1000 k√Ω t·ª±'
    }

    if (!formData.deliverables.trim()) {
      errors.deliverables = 'S·∫£n ph·∫©m ƒë·∫ßu ra l√† b·∫Øt bu·ªôc'
    } else {
      const deliverablesList = formData.deliverables.split('\n').filter(line => line.trim())
      if (deliverablesList.length === 0) {
        errors.deliverables = 'Ph·∫£i c√≥ √≠t nh·∫•t 1 s·∫£n ph·∫©m ƒë·∫ßu ra'
      } else if (deliverablesList.length > 15) {
        errors.deliverables = 'Kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 15 s·∫£n ph·∫©m ƒë·∫ßu ra'
      }
      deliverablesList.forEach((item, index) => {
        if (item.length > 200) {
          errors.deliverables = `S·∫£n ph·∫©m ƒë·∫ßu ra th·ª© ${index + 1} kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 200 k√Ω t·ª±`
        }
      })
    }

    if (!formData.estimated_timeline.trim()) {
      errors.estimated_timeline = 'Th·ªùi gian ho√†n th√†nh l√† b·∫Øt bu·ªôc'
    } else if (formData.estimated_timeline.trim().length < 2) {
      errors.estimated_timeline = 'Th·ªùi gian ho√†n th√†nh ph·∫£i c√≥ √≠t nh·∫•t 2 k√Ω t·ª±'
    } else if (formData.estimated_timeline.trim().length > 100) {
      errors.estimated_timeline = 'Th·ªùi gian ho√†n th√†nh kh√¥ng ƒë∆∞·ª£c v∆∞·ª£t qu√° 100 k√Ω t·ª±'
    }

    setFormErrors(errors)
    return Object.keys(errors).length === 0
  }

  const handleSubmit = async (status: ServiceStatus = 'draft') => {
    if (!validateForm()) {
      return
    }

    // Check service limit
    const totalServicesCount = services.length
    if (!editingService && totalServicesCount >= maxServices) {
      setShowUpgradeModal(true)
      return
    }

    try {
      const deliverablesList = formData.deliverables.split('\n').filter(line => line.trim())
      const serviceData = {
        user_id: session?.user?.id,
        name: formData.name.trim(),
        price: parseInt(formData.price),
        description: formData.description.trim(),
        deliverables: deliverablesList,
        estimated_timeline: formData.estimated_timeline.trim(),
        status,
      }

      if (editingService) {
        const { error } = await supabase
          .from('creator_services')
          .update(serviceData)
          .eq('id', editingService.id)

        if (error) throw error
        setToast({ message: 'C·∫≠p nh·∫≠t d·ªãch v·ª• th√†nh c√¥ng', type: 'success' })
      } else {
        const { error } = await supabase
          .from('creator_services')
          .insert([serviceData])

        if (error) throw error
        setToast({ message: 'T·∫°o d·ªãch v·ª• th√†nh c√¥ng', type: 'success' })
      }

      resetForm()
      loadServices()
    } catch (error: any) {
      console.error('Error saving service:', error)
      setToast({ message: error.message || 'C√≥ l·ªói x·∫£y ra khi l∆∞u d·ªãch v·ª•', type: 'error' })
    }
  }

  const handleEdit = (service: Service) => {
    setEditingService(service)
    setFormData({
      name: service.name,
      price: service.price.toString(),
      description: service.description,
      deliverables: service.deliverables.join('\n'),
      estimated_timeline: service.estimated_timeline,
    })
    setShowForm(true)
    setFormErrors({})
  }

  const handleDelete = async (service: Service) => {
    if (!confirm('B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a d·ªãch v·ª• n√†y? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.')) {
      return
    }

    try {
      const { error } = await supabase
        .from('creator_services')
        .delete()
        .eq('id', service.id)

      if (error) throw error
      setToast({ message: 'X√≥a d·ªãch v·ª• th√†nh c√¥ng', type: 'success' })
      loadServices()
    } catch (error: any) {
      console.error('Error deleting service:', error)
      setToast({ message: 'C√≥ l·ªói x·∫£y ra khi x√≥a d·ªãch v·ª•', type: 'error' })
    }
  }

  const handleStatusChange = async (service: Service, newStatus: ServiceStatus) => {
    // Check active limit when publishing
    if (newStatus === 'active' && activeServicesCount >= maxServices && service.status !== 'active') {
      setShowUpgradeModal(true)
      return
    }

    try {
      const { error } = await supabase
        .from('creator_services')
        .update({ status: newStatus })
        .eq('id', service.id)

      if (error) throw error
      setToast({ message: 'C·∫≠p nh·∫≠t tr·∫°ng th√°i th√†nh c√¥ng', type: 'success' })
      loadServices()
    } catch (error: any) {
      console.error('Error updating status:', error)
      setToast({ message: 'C√≥ l·ªói x·∫£y ra khi c·∫≠p nh·∫≠t tr·∫°ng th√°i', type: 'error' })
    }
  }

  const resetForm = () => {
    setFormData({
      name: '',
      price: '',
      description: '',
      deliverables: '',
      estimated_timeline: '',
    })
    setEditingService(null)
    setShowForm(false)
    setFormErrors({})
  }

  const getStatusLabel = (status: ServiceStatus) => {
    switch (status) {
      case 'active':
        return 'ƒêang ho·∫°t ƒë·ªông'
      case 'draft':
        return 'B·∫£n nh√°p'
      case 'hidden':
        return 'ƒê√£ ·∫©n'
    }
  }

  const getStatusBadgeClass = (status: ServiceStatus) => {
    switch (status) {
      case 'active':
        return 'bg-blue-100 text-blue-700'
      case 'draft':
        return 'bg-gray-100 text-gray-700'
      case 'hidden':
        return 'bg-gray-100 text-gray-500'
    }
  }

  const formatPrice = (price: number) => {
    return `$${price.toLocaleString('vi-VN')}`
  }

  // Type-safe access to creator profile properties using proper type narrowing
  const getCreatorProfileBio = (): string => {
    if (isCreatorProfile(profile)) {
      // TypeScript narrows to CreatorProfile here
      // Check if bio exists using 'in' operator for runtime safety
      if ('bio' in profile && typeof profile.bio === 'string') {
        return profile.bio || 'Creator'
      }
    }
    return 'Creator'
  }

  const getCreatorProfileName = (): string | null => {
    if (isCreatorProfile(profile)) {
      // TypeScript narrows to CreatorProfile here, full_name is defined
      return profile.full_name || null
    }
    return null
  }

  const getCreatorProfileAvatar = (): string | null => {
    if (isCreatorProfile(profile)) {
      // TypeScript narrows to CreatorProfile here, avatar_url is defined
      return profile.avatar_url || null
    }
    return null
  }

  const displayName = getCreatorProfileName() || session?.user?.email?.split('@')[0] || 'Creator'
  const avatarUrl = getCreatorProfileAvatar() || session?.user?.user_metadata?.avatar_url

  if (loading) {
    return (
      <div className="bg-gray-50 min-h-screen py-8 px-6">
        <div className="max-w-7xl mx-auto">
          <div className="text-center py-20">
            <p className="text-gray-600">ƒêang t·∫£i...</p>
          </div>
        </div>
      </div>
    )
  }

  return (
    <div className="bg-gray-50 min-h-screen py-8 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          {/* Left Column - Create/Edit Form */}
          {showForm && (
            <div className="lg:col-span-1">
              <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
                <div className="flex items-center justify-between mb-4">
                  <div>
                    <h2 className="text-xl font-semibold text-gray-900">
                      {editingService ? 'Ch·ªânh s·ª≠a d·ªãch v·ª•' : 'T·∫°o d·ªãch v·ª• m·ªõi'}
                    </h2>
                    <p className="text-sm text-gray-600 mt-1">
                      {editingService ? 'C·∫≠p nh·∫≠t th√¥ng tin d·ªãch v·ª•' : 'ƒê·ªãnh nghƒ©a chi ti·∫øt d·ªãch v·ª• c·ªßa b·∫°n'}
                    </p>
                  </div>
                  <button
                    onClick={resetForm}
                    className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                  >
                    <FaTimes className="w-5 h-5 text-gray-500" />
                  </button>
                </div>

                <div className="space-y-4">
                  {/* Service Name */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      T√™n d·ªãch v·ª• *
                    </label>
                    <input
                      type="text"
                      value={formData.name}
                      onChange={(e) => {
                        setFormData({ ...formData, name: e.target.value })
                        setFormErrors({ ...formErrors, name: '' })
                      }}
                      placeholder="V√≠ d·ª•: G√≥i Social Media C∆° b·∫£n"
                      className={`w-full px-4 py-2.5 rounded-lg border ${
                        formErrors.name ? 'border-red-300' : 'border-gray-300'
                      } focus:ring-2 focus:ring-[#6366F1] focus:border-transparent`}
                    />
                    {formErrors.name && (
                      <p className="text-sm text-red-600 mt-1">{formErrors.name}</p>
                    )}
                    <p className="text-xs text-gray-500 mt-1">
                      T√™n ng·∫Øn g·ªçn, r√µ r√†ng gi√∫p th∆∞∆°ng hi·ªáu d·ªÖ hi·ªÉu d·ªãch v·ª• c·ªßa b·∫°n
                    </p>
                  </div>

                  {/* Price */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Gi√° (USD) *
                    </label>
                    <input
                      type="number"
                      value={formData.price}
                      onChange={(e) => {
                        setFormData({ ...formData, price: e.target.value })
                        setFormErrors({ ...formErrors, price: '' })
                      }}
                      placeholder="V√≠ d·ª•: 250"
                      min="1"
                      max="999999"
                      className={`w-full px-4 py-2.5 rounded-lg border ${
                        formErrors.price ? 'border-red-300' : 'border-gray-300'
                      } focus:ring-2 focus:ring-[#6366F1] focus:border-transparent`}
                    />
                    {formErrors.price && (
                      <p className="text-sm text-red-600 mt-1">{formErrors.price}</p>
                    )}
                    <p className="text-xs text-gray-500 mt-1">
                      Nh·∫≠p gi√° b·∫±ng USD. Gi√° n√†y c√≥ th·ªÉ ƒë∆∞·ª£c ·∫©n tr√™n h·ªì s∆° c√¥ng khai t√πy theo g√≥i ƒëƒÉng k√Ω c·ªßa b·∫°n.
                    </p>
                  </div>

                  {/* Description */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      M√¥ t·∫£ d·ªãch v·ª• *
                    </label>
                    <textarea
                      value={formData.description}
                      onChange={(e) => {
                        setFormData({ ...formData, description: e.target.value })
                        setFormErrors({ ...formErrors, description: '' })
                      }}
                      placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ d·ªãch v·ª• b·∫°n cung c·∫•p..."
                      rows={5}
                      className={`w-full px-4 py-2.5 rounded-lg border ${
                        formErrors.description ? 'border-red-300' : 'border-gray-300'
                      } focus:ring-2 focus:ring-[#6366F1] focus:border-transparent`}
                    />
                    {formErrors.description && (
                      <p className="text-sm text-red-600 mt-1">{formErrors.description}</p>
                    )}
                    <p className="text-xs text-gray-500 mt-1">
                      Gi·∫£i th√≠ch r√µ r√†ng gi√° tr·ªã v√† l·ª£i √≠ch c·ªßa d·ªãch v·ª• ƒë·ªÉ thu h√∫t th∆∞∆°ng hi·ªáu
                    </p>
                  </div>

                  {/* Deliverables */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      S·∫£n ph·∫©m ƒë·∫ßu ra (m·ªói d√≤ng m·ªôt m·ª•c) *
                    </label>
                    <textarea
                      value={formData.deliverables}
                      onChange={(e) => {
                        setFormData({ ...formData, deliverables: e.target.value })
                        setFormErrors({ ...formErrors, deliverables: '' })
                      }}
                      placeholder="V√≠ d·ª•:&#10;- 3 b√†i ƒëƒÉng Instagram&#10;- 1 Story campaign&#10;- B√°o c√°o t∆∞∆°ng t√°c"
                      rows={6}
                      className={`w-full px-4 py-2.5 rounded-lg border ${
                        formErrors.deliverables ? 'border-red-300' : 'border-gray-300'
                      } focus:ring-2 focus:ring-[#6366F1] focus:border-transparent`}
                    />
                    {formErrors.deliverables && (
                      <p className="text-sm text-red-600 mt-1">{formErrors.deliverables}</p>
                    )}
                    <p className="text-xs text-gray-500 mt-1">
                      Li·ªát k√™ c·ª• th·ªÉ nh·ªØng g√¨ th∆∞∆°ng hi·ªáu s·∫Ω nh·∫≠n ƒë∆∞·ª£c. M·ªói d√≤ng l√† m·ªôt m·ª•c.
                    </p>
                  </div>

                  {/* Timeline */}
                  <div>
                    <label className="block text-sm font-medium text-gray-700 mb-2">
                      Th·ªùi gian ho√†n th√†nh *
                    </label>
                    <input
                      type="text"
                      value={formData.estimated_timeline}
                      onChange={(e) => {
                        setFormData({ ...formData, estimated_timeline: e.target.value })
                        setFormErrors({ ...formErrors, estimated_timeline: '' })
                      }}
                      placeholder="V√≠ d·ª•: 5-7 ng√†y l√†m vi·ªác"
                      className={`w-full px-4 py-2.5 rounded-lg border ${
                        formErrors.estimated_timeline ? 'border-red-300' : 'border-gray-300'
                      } focus:ring-2 focus:ring-[#6366F1] focus:border-transparent`}
                    />
                    {formErrors.estimated_timeline && (
                      <p className="text-sm text-red-600 mt-1">{formErrors.estimated_timeline}</p>
                    )}
                    <p className="text-xs text-gray-500 mt-1">
                      Th·ªùi gian t·ª´ khi b·∫Øt ƒë·∫ßu ƒë·∫øn khi ho√†n th√†nh d·ªãch v·ª•
                    </p>
                  </div>

                  {/* Actions */}
                  <div className="flex gap-3 pt-4">
                    <button
                      onClick={resetForm}
                      className="flex-1 px-4 py-2.5 rounded-lg font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 transition-colors"
                    >
                      H·ªßy
                    </button>
                    {!editingService && (
                      <button
                        onClick={() => handleSubmit('draft')}
                        className="flex-1 px-4 py-2.5 rounded-lg font-medium text-gray-700 bg-white border-2 border-gray-300 hover:bg-gray-50 transition-colors"
                      >
                        L∆∞u b·∫£n nh√°p
                      </button>
                    )}
                    <button
                      onClick={() => handleSubmit(editingService?.status || 'active')}
                      className="flex-1 px-4 py-2.5 rounded-lg font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:opacity-90 transition-opacity"
                    >
                      {editingService ? 'C·∫≠p nh·∫≠t' : 'Th√™m d·ªãch v·ª•'}
                    </button>
                  </div>
                </div>
              </div>
            </div>
          )}

          {/* Right Column - Services List & Preview */}
          <div className={showForm ? 'lg:col-span-2' : 'lg:col-span-3'}>
            <div className="space-y-6">
              {/* Services Table */}
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <div className="mb-4">
                  <h2 className="text-xl font-semibold text-gray-900">G√≥i d·ªãch v·ª• c·ªßa t√¥i</h2>
                  <p className="text-sm text-gray-600 mt-1">
                    Qu·∫£n l√Ω c√°c d·ªãch v·ª• ƒëang ho·∫°t ƒë·ªông v√† b·∫£n nh√°p c·ªßa b·∫°n.
                  </p>
                </div>

                {services.length === 0 ? (
                  <div className="text-center py-12">
                    <p className="text-gray-600 mb-2">B·∫°n ch∆∞a c√≥ d·ªãch v·ª• n√†o</p>
                    <p className="text-sm text-gray-500 mb-4">
                      T·∫°o d·ªãch v·ª• ƒë·∫ßu ti√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu nh·∫≠n h·ª£p t√°c t·ª´ th∆∞∆°ng hi·ªáu.
                    </p>
                    <button
                      onClick={() => setShowForm(true)}
                      className="px-6 py-3 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white font-medium rounded-lg hover:opacity-90 transition-opacity"
                    >
                      T·∫°o d·ªãch v·ª• m·ªõi
                    </button>
                  </div>
                ) : (
                  <div className="overflow-x-auto">
                    <table className="w-full">
                      <thead>
                        <tr className="border-b border-gray-200">
                          <th className="text-left py-3 px-4 text-sm font-semibold text-gray-700">T√™n</th>
                          <th className="text-left py-3 px-4 text-sm font-semibold text-gray-700">Gi√°</th>
                          <th className="text-left py-3 px-4 text-sm font-semibold text-gray-700">Th·ªùi gian</th>
                          <th className="text-left py-3 px-4 text-sm font-semibold text-gray-700">Tr·∫°ng th√°i</th>
                          <th className="text-right py-3 px-4 text-sm font-semibold text-gray-700">Thao t√°c</th>
                        </tr>
                      </thead>
                      <tbody>
                        {services.map((service) => (
                          <tr key={service.id} className="border-b border-gray-100 hover:bg-gray-50">
                            <td className="py-4 px-4">
                              <div className="font-medium text-gray-900">{service.name}</div>
                            </td>
                            <td className="py-4 px-4">
                              <div className="text-gray-700">{formatPrice(service.price)}</div>
                            </td>
                            <td className="py-4 px-4">
                              <div className="text-gray-700">{service.estimated_timeline}</div>
                            </td>
                            <td className="py-4 px-4">
                              <span className={`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${getStatusBadgeClass(service.status)}`}>
                                {getStatusLabel(service.status)}
                              </span>
                            </td>
                            <td className="py-4 px-4">
                              <div className="flex items-center justify-end gap-2">
                                <button
                                  onClick={() => handleEdit(service)}
                                  className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                                  title="S·ª≠a"
                                >
                                  <FaEdit className="w-4 h-4 text-gray-600" />
                                </button>
                                {service.status === 'active' && (
                                  <button
                                    onClick={() => handleStatusChange(service, 'hidden')}
                                    className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                                    title="·∫®n"
                                  >
                                    <FaEye className="w-4 h-4 text-gray-600" />
                                  </button>
                                )}
                                {(service.status === 'draft' || service.status === 'hidden') && (
                                  <button
                                    onClick={() => handleStatusChange(service, 'active')}
                                    className="p-2 hover:bg-gray-100 rounded-lg transition-colors"
                                    title="C√¥ng khai"
                                  >
                                    <FaCheck className="w-4 h-4 text-green-600" />
                                  </button>
                                )}
                                <button
                                  onClick={() => handleDelete(service)}
                                  className="p-2 hover:bg-red-100 rounded-lg transition-colors"
                                  title="X√≥a"
                                >
                                  <FaTrash className="w-4 h-4 text-red-600" />
                                </button>
                              </div>
                            </td>
                          </tr>
                        ))}
                      </tbody>
                    </table>
                  </div>
                )}
              </div>

              {/* Public Profile Preview */}
              <div className="bg-white rounded-xl border border-gray-200 p-6">
                <div className="mb-4">
                  <h2 className="text-xl font-semibold text-gray-900">H·ªì s∆° c√¥ng khai c·ªßa b·∫°n</h2>
                  <p className="text-sm text-gray-600 mt-1">
                    ƒê√¢y l√† c√°ch th∆∞∆°ng hi·ªáu nh√¨n th·∫•y d·ªãch v·ª• c·ªßa b·∫°n.
                  </p>
                </div>

                <div className="space-y-4">
                  {/* Profile Card */}
                  <div className="flex items-center gap-4 p-4 bg-gray-50 rounded-lg">
                    {avatarUrl ? (
                      <img src={avatarUrl} alt={displayName} className="w-12 h-12 rounded-full object-cover" />
                    ) : (
                      <div className="w-12 h-12 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center text-white font-medium">
                        {displayName.charAt(0).toUpperCase()}
                      </div>
                    )}
                    <div>
                      <div className="font-semibold text-gray-900">{displayName}</div>
                      <div className="text-sm text-gray-600">{getCreatorProfileBio()}</div>
                    </div>
                  </div>

                  {/* Services List */}
                  <div>
                    <h3 className="font-medium text-gray-900 mb-3">D·ªãch v·ª• ({services.filter(s => s.status === 'active').length})</h3>
                    {services.filter(s => s.status === 'active').length === 0 ? (
                      <p className="text-sm text-gray-500">Ch∆∞a c√≥ d·ªãch v·ª• c√¥ng khai</p>
                    ) : (
                      <>
                        <ul className="space-y-4">
                          {services.filter(s => s.status === 'active').map((service) => (
                            <li key={service.id} className="border border-gray-200 rounded-lg p-4">
                              <div className="flex items-start gap-3">
                                <FaCheck className="w-4 h-4 text-green-600 mt-0.5 flex-shrink-0" />
                                <div className="flex-1">
                                  <div className="font-medium text-gray-900">{service.name}</div>
                                  <div className="text-sm text-gray-600 mt-1">{service.description.substring(0, 150)}...</div>
                                  {canShowPricing && (
                                    <div className="text-sm font-medium text-gray-900 mt-2">{formatPrice(service.price)}</div>
                                  )}
                                </div>
                              </div>
                            </li>
                          ))}
                        </ul>
                        
                        {!canShowPricing && services.filter(s => s.status === 'active').length > 0 && (
                          <div className="mt-4 p-4 bg-gray-100 rounded-lg border border-gray-200">
                            <div className="font-semibold text-gray-900 mb-1">Pricing Hidden</div>
                            <p className="text-sm text-gray-600 mb-3">
                              N√¢ng c·∫•p g√≥i c·ªßa b·∫°n ƒë·ªÉ hi·ªÉn th·ªã gi√° tr√™n h·ªì s∆° c√¥ng khai v√† nh·∫≠n nhi·ªÅu c∆° h·ªôi h·ª£p t√°c h∆°n.
                            </p>
                            <button
                              onClick={() => setShowUpgradeModal(true)}
                              className="px-4 py-2 bg-gradient-to-r from-[#6366F1] to-[#EC4899] text-white text-sm font-medium rounded-lg hover:opacity-90 transition-opacity"
                            >
                              N√¢ng c·∫•p ƒë·ªÉ m·ªü kh√≥a
                            </button>
                          </div>
                        )}
                      </>
                    )}
                  </div>

                  {/* View Profile Button */}
                  <div className="pt-4 border-t border-gray-200">
                    <p className="text-xs text-gray-500 mb-3">Hi·ªÉn th·ªã c√¥ng khai tr√™n h·ªì s∆° c·ªßa b·∫°n.</p>
                    <button className="flex items-center gap-2 px-4 py-2 text-sm font-medium text-[#6366F1] hover:text-[#EC4899] transition-colors">
                      Xem h·ªì s∆°
                      <FaExternalLinkAlt className="w-3 h-3" />
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}

      <UpgradePlanModal
        isOpen={showUpgradeModal}
        onClose={() => setShowUpgradeModal(false)}
        currentPlan={currentPlan}
      />
    </div>
  )
}
</file>

<file path="src/main.tsx">
import React from 'react'
import ReactDOM from 'react-dom/client'
import App from './App'
import './index.css'

ReactDOM.createRoot(document.getElementById('root')!).render(
  <React.StrictMode>
    <App />
  </React.StrictMode>,
)
</file>

<file path="index.html">
<!doctype html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/logo/logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ALINO - Qu·∫£n l√Ω h·ª£p t√°c Creator‚ÄìBrand</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ["./index.html", "./src/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {
      fontFamily: {
        sans: ['Inter', 'system-ui', 'sans-serif'],
      },
      colors: {
        background: '#FFFFFF',
        foreground: '#0A0A0A',
        border: '#E5E7EB',
      },
    },
  },
  plugins: [],
}
</file>

<file path="src/app/router.tsx">
import { Routes, Route, Navigate } from 'react-router-dom'
import { useAuth } from '../hooks/useAuth'
import { useProfile } from '../hooks/useProfile'
import { LoadingState } from '../components/shared/LoadingState'
import LandingPage from '../pages/public/LandingPage'
import LoginPage from '../pages/public/LoginPage'
import SignupPage from '../pages/public/SignupPage'
import VerifyEmailPage from '../pages/public/VerifyEmailPage'
import AppGate from './AppGate'
import RolePage from '../pages/onboarding/RolePage'
import OnboardingPage from '../pages/onboarding/OnboardingPage'
import TermsPage from '../pages/public/TermsPage'
import PrivacyPage from '../pages/public/PrivacyPage'
import PublicCreatorProfilePage from '../pages/public/PublicCreatorProfilePage'
import { CreatorRoutes } from './creatorRoutes'
import { BrandRoutes } from './brandRoutes'
import DashboardRoutes from './dashboardRoutes'
import type { RouteRole } from './routeConfig'

/**
 * ProtectedRoute: Simple auth check - redirects to login if not authenticated
 * Used for routes that require authentication but don't need role/onboarding checks
 */
function ProtectedRoute({ children }: { children: React.ReactNode }) {
  const { session, loading } = useAuth()

  if (loading) {
    return <LoadingState />
  }

  if (!session) {
    return <Navigate to="/login" replace />
  }

  return <>{children}</>
}

/**
 * RoleBasedRoute: Protects routes that require a specific role
 * Only checks role match - no redirects to /app or dashboards
 */
function RoleBasedRoute({ children, requiredRole }: { children: React.ReactNode; requiredRole: RouteRole }) {
  const { session, loading: authLoading } = useAuth()
  const { profile, loading: profileLoading } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )

  if (authLoading || profileLoading) {
    return <LoadingState />
  }

  if (!session || !profile) {
    return <Navigate to="/login" replace />
  }

  if (profile.role !== requiredRole) {
    // Role mismatch - redirect to login (user should go through /app to get to correct route)
    return <Navigate to="/login" replace />
  }

  return <>{children}</>
}

/**
 * CatchAllRoute: Simple 404 handler
 * Just redirects to login if not authenticated, otherwise shows 404
 */
function CatchAllRoute() {
  const { session, loading } = useAuth()

  if (loading) {
    return <LoadingState />
  }

  if (!session) {
    return <Navigate to="/login" replace />
  }

  // Authenticated but unknown route - show 404
  return (
    <div className="min-h-screen flex items-center justify-center">
      <div className="text-center">
        <h1 className="text-4xl font-bold mb-4">404</h1>
        <p className="text-[#6B7280] mb-4">Trang kh√¥ng t·ªìn t·∫°i</p>
        <Navigate to="/" replace />
      </div>
    </div>
  )
}

export function Router() {
  return (
    <Routes>
      {/* Public routes - no AppGate, always accessible */}
      <Route path="/" element={<LandingPage />} />
      <Route path="/login" element={<LoginPage />} />
      <Route path="/signup" element={<SignupPage />} />
      <Route path="/verify-email" element={<VerifyEmailPage />} />
      <Route path="/terms" element={<TermsPage />} />
      <Route path="/privacy" element={<PrivacyPage />} />
      <Route path="/creator/:id" element={<PublicCreatorProfilePage />} />
      <Route path="/c/:id" element={<PublicCreatorProfilePage />} />

      {/* AppGate routes - /app is the ONLY decision gate */}
      {/* AppGate handles: auth check, role check, onboarding check, and redirects */}
      <Route
        path="/app"
        element={
          <AppGate>
            <div className="min-h-screen flex items-center justify-center">
              <div className="text-[#6B7280]">ƒêang t·∫£i...</div>
            </div>
          </AppGate>
        }
      />

      <Route
        path="/role"
        element={
          <AppGate>
            <ProtectedRoute>
              <RolePage />
            </ProtectedRoute>
          </AppGate>
        }
      />

      <Route
        path="/onboarding/:role?"
        element={
          <AppGate>
            <ProtectedRoute>
              <OnboardingPage />
            </ProtectedRoute>
          </AppGate>
        }
      />

      {/* Dashboard routes - OUTSIDE AppGate, stable final destinations */}
      {/* These routes never redirect on their own - they are the final destination */}
      <Route
        path="/dashboard/:role/*"
        element={
          <ProtectedRoute>
            <DashboardRoutes />
          </ProtectedRoute>
        }
      />

      {/* Legacy routes - keep for backward compatibility */}
      {/* Redirect-only components used as terminal route elements (not wrapped) */}
      {/* They redirect to /app which handles auth, role, and onboarding checks */}
      <Route
        path="/creator/*"
        element={<CreatorRoutes />}
      />

      <Route
        path="/brand/*"
        element={<BrandRoutes />}
      />

      {/* 404 handler */}
      <Route path="*" element={<CatchAllRoute />} />
    </Routes>
  )
}
</file>

<file path="src/pages/creator/profile/ProfilePage.tsx">
import { useState } from 'react'
import { useAuth } from '../../../hooks/useAuth'
import { useProfile } from '../../../hooks/useProfile'
import Toast from '../../../components/shared/Toast'
import { LoadingState, NotFoundState } from '../../../components/shared/LoadingState'
import { useCreatorProfileForm } from './hooks/useCreatorProfileForm'
import { useCreatorProfileOperations } from './hooks/useCreatorProfileOperations'
import { ProfileSummaryCard } from './components/ProfileSummaryCard'
import { TabbedContent } from './components/TabbedContent'

type TabType = 'overview' | 'services' | 'portfolio' | 'reviews'

/**
 * ProfilePage: Main component for creator profile management
 * 
 * Responsibilities:
 * - Orchestrates data fetching, form management, and UI rendering
 * - Delegates specific concerns to hooks and components
 */
export default function ProfilePage() {
  const { session } = useAuth()
  const { profile, loading: profileLoading } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const [activeTab, setActiveTab] = useState<TabType>('overview')

  const { formData, displayData, updateFormField, setFormData } = useCreatorProfileForm(profile)
  const { loading, toast, setToast, saveProfile, saveAvatar } = useCreatorProfileOperations(
    session,
    profile
  )

  const handleSave = () => {
    saveProfile(formData)
  }

  const handleAvatarChange = async (url: string) => {
    setFormData((prev) => ({ ...prev, avatar_url: url }))
    await saveAvatar(url)
  }

  if (profileLoading) {
    return <LoadingState />
  }

  if (!profile || profile.role !== 'creator') {
    return <NotFoundState message="Kh√¥ng t√¨m th·∫•y h·ªì s∆°" />
  }

  const displayName = formData.display_name || 'Creator'

  return (
    <div className="bg-gray-50 py-6 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="grid grid-cols-1 lg:grid-cols-3 gap-6">
          <ProfileSummaryCard
            formData={formData}
            displayData={displayData}
            loading={loading}
                        userId={session?.user?.id || ''}
            onFormFieldChange={updateFormField}
                        onAvatarChange={handleAvatarChange}
            onSave={handleSave}
          />

          <TabbedContent activeTab={activeTab} onTabChange={setActiveTab} displayName={displayName} />
        </div>
      </div>

      {toast && (
        <Toast
          message={toast.message}
          type={toast.type}
          onClose={() => setToast(null)}
        />
      )}
    </div>
  )
}
</file>

<file path="src/types/profile.ts">
// Core profile fields (matches FINAL schema)
export interface Profile {
  id: string
  role: 'creator' | 'brand' | null
  onboarding_completed: boolean
  onboarding_data?: any
  is_admin?: boolean
  created_at?: string
  updated_at?: string
}

// Creator-specific fields (matches FINAL schema)
export interface CreatorProfile extends Profile {
  role: 'creator'
  full_name?: string | null
  avatar_url?: string | null
  birth_year?: number | null
  gender?: string | null
  country?: string | null
  city?: string | null
  creator_platforms?: string[] | null // TEXT[]
  content_categories?: string[] | null // TEXT[]
  followers_count?: number | null
  avg_views?: number | null
  collaboration_expectation?: string[] | null // TEXT[]
}

// Brand-specific fields (matches FINAL schema)
export interface BrandProfile extends Profile {
  role: 'brand'
  brand_name?: string | null
  industry?: string | null
  company_size?: string | null
  monthly_marketing_budget?: number | null // NUMERIC
  target_platforms?: string[] | null // TEXT[]
  collaboration_goals?: string[] | null // TEXT[]
}

export type ProfileWithRole = CreatorProfile | BrandProfile
</file>

<file path="vite.config.ts">
import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react'
import path from 'path'

export default defineConfig({
  plugins: [react()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
    },
  },
  server: {
    host: true,
    port: 3000,
  },
})
</file>

<file path="src/components/layout/UserMenu.tsx">
import { useState, useRef, useEffect } from 'react'
import { Link, useNavigate } from 'react-router-dom'
import { useAuth } from '../../hooks/useAuth'

interface UserMenuProps {
  userEmail: string
  displayName?: string
  avatarUrl?: string | null
  role?: string | null
}

export default function UserMenu({ userEmail, displayName, avatarUrl, role }: UserMenuProps) {
  const [isOpen, setIsOpen] = useState(false)
  const menuRef = useRef<HTMLDivElement>(null)
  const navigate = useNavigate()
  const { signOut } = useAuth()

  useEffect(() => {
    const handleClickOutside = (event: MouseEvent) => {
      if (menuRef.current && !menuRef.current.contains(event.target as Node)) {
        setIsOpen(false)
      }
    }

    if (isOpen) {
      document.addEventListener('mousedown', handleClickOutside)
    }

    return () => {
      document.removeEventListener('mousedown', handleClickOutside)
    }
  }, [isOpen])

  const handleLogout = async () => {
    setIsOpen(false)
    await signOut()
    // Redirect to landing page after sign out
    navigate('/')
  }

  const nameToShow = displayName || userEmail.split('@')[0]

  return (
    <div
      className="relative"
      ref={menuRef}
      onMouseEnter={() => setIsOpen(true)}
      onMouseLeave={() => setIsOpen(false)}
    >
      <button
        onClick={() => setIsOpen(!isOpen)}
        className="flex items-center gap-2 px-0 py-0 text-[#6B7280] hover:text-[#6366F1] transition-colors group"
      >
        {avatarUrl ? (
          <img 
            src={avatarUrl} 
            alt={nameToShow}
            className="w-6 h-6 rounded-full object-cover flex-shrink-0"
          />
        ) : (
          <div className="w-6 h-6 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center text-white font-medium text-xs flex-shrink-0">
            {nameToShow.charAt(0).toUpperCase()}
          </div>
        )}
        <span className="text-sm whitespace-nowrap">
          {nameToShow}
        </span>
      </button>

      {isOpen && (
        <div className="absolute right-0 top-full pt-2 w-56 z-50">
          <div className="bg-white rounded-xl shadow-lg border border-gray-200 py-2">
            <Link
              to="/app"
              onClick={() => setIsOpen(false)}
              className="block px-4 py-2.5 text-sm text-[#374151] hover:bg-gray-50 transition-colors"
            >
              Qu·∫£n l√Ω d·ª± √°n
            </Link>
            <div className="border-t border-gray-200 my-1" />
            <button
              onClick={handleLogout}
              className="block w-full text-left px-4 py-2.5 text-sm text-red-600 hover:bg-gray-50 transition-colors"
            >
              ƒêƒÉng xu·∫•t
            </button>
          </div>
        </div>
      )}
    </div>
  )
}
</file>

<file path="src/hooks/useProfile.ts">
import { useEffect, useState, useRef } from 'react'
import { getSupabase } from '../lib/supabase'
import type { Profile, CreatorProfile, BrandProfile } from '../types/profile'

const PROFILE_FETCH_TIMEOUT = 3000 // 3 seconds

export function useProfile(
  userId: string | undefined,
  enabled: boolean
) {
  const [profile, setProfile] = useState<Profile | CreatorProfile | BrandProfile | null>(null)
  const [loading, setLoading] = useState(true)
  const [error, setError] = useState<string | null>(null)
  const [needsOnboarding, setNeedsOnboarding] = useState(false)
  const timeoutRef = useRef<ReturnType<typeof setTimeout> | null>(null)

  useEffect(() => {
    if (!enabled || !userId) {
      setProfile(null)
      setLoading(false)
      setError(null)
      setNeedsOnboarding(false)
      return
    }
  
    let mounted = true
  
    async function fetchProfile() {
      const supabaseInstance = getSupabase()
      const { data: { session } } = await supabaseInstance.auth.getSession()
      
      if (!session || !session.access_token || !session.user.email_confirmed_at) {
        if (mounted) {
          setProfile(null)
          setLoading(false)
          setError(null)
          setNeedsOnboarding(false)
        }
        return
      }

      setLoading(true)
      setError(null)
      setNeedsOnboarding(false)
  
      timeoutRef.current = setTimeout(() => {
        if (mounted) {
          setLoading(false)
          setError('Timeout loading profile')
        }
      }, PROFILE_FETCH_TIMEOUT)
  
      try {
        // Step 1: Fetch core profile (role, onboarding flags)
        const { data: coreProfile, error: coreError } = await supabaseInstance
          .from('profiles')
          .select('id, role, onboarding_completed, created_at, updated_at')
          .eq('id', userId)
          .single()
  
        if (timeoutRef.current) {
          clearTimeout(timeoutRef.current)
          timeoutRef.current = null
        }
  
        if (coreError) {
          if (mounted) {
            if (coreError.code === '42501' || coreError.code === 'PGRST301') {
              setLoading(false)
              return
            }
            setError(coreError.message)
            setLoading(false)
          }
          return
        }
  
        if (!coreProfile) {
          if (mounted) {
            setError('Profile not found')
            setLoading(false)
          }
          return
        }
  
        // Step 2: Fetch domain-specific profile based on role
        if (coreProfile.role === 'creator') {
          const { data: creatorProfile, error: creatorError } = await supabaseInstance
            .from('creator_profiles')
            .select('*')
            .eq('user_id', userId)
            .single()
  
          if (creatorError) {
            if (mounted) {
              if (creatorError.code === 'PGRST116') {
                setProfile(null)
                setNeedsOnboarding(true)
                setLoading(false)
                return
              }
              if (creatorError.code === '42501' || creatorError.code === 'PGRST301') {
                setLoading(false)
                return
              }
              setError(creatorError.message)
              setLoading(false)
            }
            return
          }
  
          if (mounted && creatorProfile) {
            // Merge core profile with creator profile
            setProfile({
              ...coreProfile,
              ...creatorProfile,
              role: 'creator',
            } as CreatorProfile)
            setLoading(false)
          }
        } else if (coreProfile.role === 'brand') {
          const { data: brandProfile, error: brandError } = await supabaseInstance
            .from('brand_profiles')
            .select('*')
            .eq('user_id', userId)
            .single()
  
          if (brandError && brandError.code === 'PGRST116') {
            // Brand profile not found - needs onboarding
            if (mounted) {
              setProfile(null)
              setNeedsOnboarding(true)
              setLoading(false)
            }
            return
          }
  
          if (brandError) {
            if (mounted) {
              if (brandError.code === '42501' || brandError.code === 'PGRST301') {
                setLoading(false)
                return
              }
              setError(brandError.message)
              setLoading(false)
            }
            return
          }
  
          if (mounted && brandProfile) {
            // Merge core profile with brand profile
            setProfile({
              ...coreProfile,
              ...brandProfile,
              role: 'brand',
            } as BrandProfile)
            setLoading(false)
          }
        } else {
          // No role set yet
          if (mounted) {
            setProfile(coreProfile)
            setLoading(false)
          }
        }
      } catch (err: any) {
        if (mounted) {
          setError(err.message || 'Failed to load profile')
          setLoading(false)
        }
      }
    }
  
    fetchProfile()
  
    return () => {
      mounted = false
      if (timeoutRef.current) {
        clearTimeout(timeoutRef.current)
      }
    }
  }, [userId, enabled])
  

  return { profile, loading, error, needsOnboarding }
}
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "react-jsx",
    "incremental": true,
    "types": ["vite/client"],
    "paths": {
      "@/*": ["./src/*"]
    }
  },
  "include": ["src"],
  "exclude": ["node_modules"]
}
</file>

<file path="src/components/layout/Header.tsx">
import { Link, useLocation, useNavigate } from 'react-router-dom'
import { useAuth } from '../../hooks/useAuth'
import { useProfile } from '../../hooks/useProfile'
import UserMenu from './UserMenu'

/**
 * Landing Page Header Component
 * - Used ONLY on landing pages (not dashboard)
 * - Contains: Logo | Navigation | UserMenu
 */
export default function Header() {
  const { session, loading: authLoading } = useAuth()
  const { profile } = useProfile(
    session?.user?.id,
    !!(session && session.access_token && session.user.email_confirmed_at)
  )
  const location = useLocation()
  const navigate = useNavigate()

  const handleLogoClick = (e: React.MouseEvent) => {
    e.preventDefault()
    if (location.pathname !== '/') navigate('/')
    window.scrollTo({ top: 0, behavior: 'smooth' })
  }

  const displayName =
    (profile?.role === 'creator' ? (profile as any).full_name : profile?.role === 'brand' ? (profile as any).brand_name : null) ||
    session?.user?.user_metadata?.display_name ||
    undefined

  const avatarUrl =
    (profile?.role === 'creator' ? (profile as any).avatar_url : null) ||
    session?.user?.user_metadata?.avatar_url ||
    undefined

  return (
    <header className="fixed top-0 inset-x-0 z-50 h-16 bg-white/80 backdrop-blur-xl border-b border-black/5">
      <div className="max-w-7xl mx-auto px-6 h-full flex items-center justify-between">
        {/* Logo */}
        <Link
          to="/"
          onClick={handleLogoClick}
          className="flex items-center gap-3"
        >
          <img src="/logo/logo.png" alt="ALINO" className="w-8 h-8" />
          <span className="font-bold text-2xl leading-tight bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
            ALINO
          </span>
        </Link>

        {/* Navigation */}
        <nav className="hidden md:flex items-center gap-10 text-sm text-[#6B7280]">
          <a href="#about">V·ªÅ ch√∫ng t√¥i</a>
          <a href="#features">T√≠nh nƒÉng</a>
          <a href="#news">Tin t·ª©c</a>
          <a href="#contact">Li√™n h·ªá</a>
        </nav>

        {/* Actions */}
        <div className="flex items-center gap-4 text-sm">
          {authLoading ? null : session ? (
            <UserMenu
              userEmail={session.user.email || ''}
              displayName={displayName}
              avatarUrl={avatarUrl}
              role={profile?.role || null}
            />
          ) : (
            <>
              <Link to="/login">ƒêƒÉng nh·∫≠p</Link>
              <Link
                to="/signup"
                className="px-5 py-2.5 rounded-full text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899]"
              >
                ƒêƒÉng k√Ω
              </Link>
            </>
          )}
        </div>
      </div>
    </header>
  )
}
</file>

<file path="src/pages/onboarding/OnboardingPage.tsx">
import { useState, useEffect } from 'react'
import { useNavigate, Link, useParams } from 'react-router-dom'
import { useAuth } from '../../hooks/useAuth'
import { getSupabase } from '../../lib/supabase'
import { LoadingState } from '../../components/shared/LoadingState'

// Form state interfaces
interface CreatorFormData {
  display_name?: string
  country?: string
  city?: string
  birth_year?: number
  gender?: string
  creator_platforms?: string[]
  followers_count?: number
  avg_views?: number
  content_categories?: string[]
  collaboration_expectation?: ('paid' | 'gift' | 'affiliate')[]
}

// Collaboration goal options for brands
// These are predefined business objectives that brands can select multiple of
export type CollaborationGoalOption = 
  | 'brand_awareness'
  | 'product_launch'
  | 'engagement'
  | 'conversions'
  | 'community_building'
  | 'content_creation'
  | 'influencer_relations'

interface BrandFormData {
  company_name?: string
  industry?: string
  country?: string
  city?: string
  company_size?: string
  budget?: number
  campaign_budget_range?: string
  target_platforms?: string[]
  collaboration_goals?: CollaborationGoalOption[] // Changed from campaign_goal (string) to array
  preferred_collaboration_type?: ('paid' | 'gift' | 'affiliate')[]
}

export default function OnboardingPage() {
  const { session, loading: authLoading } = useAuth()
  const navigate = useNavigate()
  const { role: roleParam } = useParams<{ role?: 'creator' | 'brand' }>()
  const supabase = getSupabase()
  const [currentStep, setCurrentStep] = useState(1)
  const [loading, setLoading] = useState(false)
  const [error, setError] = useState('')
  const [role, setRole] = useState<'creator' | 'brand' | null>(roleParam || null)
  
  // Form state - separate for creator and brand
  const [creatorData, setCreatorData] = useState<CreatorFormData>({})
  const [brandData, setBrandData] = useState<BrandFormData>({})

  useEffect(() => {
    if (authLoading) return
    if (!session) return
    checkOnboardingStatus()
    // eslint-disable-next-line react-hooks/exhaustive-deps
  }, [session, authLoading])

  async function checkOnboardingStatus() {
    if (!session || !session.access_token) return

    try {
      const { data, error } = await supabase
        .from('profiles')
        .select('onboarding_completed, role, onboarding_data')
        .eq('id', session.user.id)
        .single()

      if (error) {
        if (error.code === '42501' || error.code === 'PGRST301') {
          return
        }
        if (error.code !== 'PGRST116') throw error
      }

      if (data?.role) {
        setRole(data.role)
        loadExistingData(data.role, data?.onboarding_data)
      }
    } catch (err) {
      console.error('Error checking onboarding:', err)
    }
  }

  async function loadExistingData(userRole: 'creator' | 'brand', onboardingData: any) {
    if (!session) return

    try {
      // Read from onboarding_data JSON, not profile columns
      const data = onboardingData || {}

      if (userRole === 'creator') {
        const step2 = data.step2 || {}
        const step3 = data.step3 || {}
        const step4 = data.step4 || {}
        
        const cd: CreatorFormData = {
          display_name: step2.display_name || undefined,
          country: step2.country || undefined,
          city: step2.city || undefined,
          birth_year: step2.birth_year || undefined,
          gender: step2.gender || undefined,
          creator_platforms: step3.creator_platforms || undefined,
          followers_count: step3.followers_count || undefined,
          avg_views: step3.avg_views || undefined,
          content_categories: step3.content_categories || undefined,
          collaboration_expectation: step4.collaboration_expectation || undefined,
        }
        setCreatorData(cd)

        // Determine current step based on onboarding_data
        if (!step2.display_name) {
          setCurrentStep(2)
        } else if (!step3.creator_platforms || step3.creator_platforms.length === 0) {
          setCurrentStep(3)
        } else if (!step4.collaboration_expectation || step4.collaboration_expectation.length === 0) {
          setCurrentStep(4)
        } else {
          setCurrentStep(5)
        }
      } else {
        const step2 = data.step2 || {}
        const step3 = data.step3 || {}
        const step4 = data.step4 || {}
        
        const bd: BrandFormData = {
          company_name: step2.company_name || undefined,
          industry: step2.industry || undefined,
          country: step2.country || undefined,
          city: step2.city || undefined,
          company_size: step3.company_size || undefined,
          budget: step3.budget || undefined,
          campaign_budget_range: step3.campaign_budget_range || undefined,
          target_platforms: step3.target_platforms || undefined,
          // Support legacy single campaign_goal or new collaboration_goals array
          collaboration_goals: Array.isArray(step4.collaboration_goals) 
            ? step4.collaboration_goals 
            : step4.campaign_goal 
              ? [step4.campaign_goal as CollaborationGoalOption] // Legacy support
              : undefined,
          preferred_collaboration_type: step4.preferred_collaboration_type || undefined,
        }
        setBrandData(bd)

        // Determine current step based on onboarding_data
        if (!step2.company_name) {
          setCurrentStep(2)
        } else if (!step3.company_size) {
          setCurrentStep(3)
        } else if (!step4.collaboration_goals || (Array.isArray(step4.collaboration_goals) && step4.collaboration_goals.length === 0)) {
          // Check for new array format or legacy single campaign_goal
          const hasGoals = Array.isArray(step4.collaboration_goals) && step4.collaboration_goals.length > 0
          const hasLegacyGoal = step4.campaign_goal && step4.campaign_goal.trim()
          if (!hasGoals && !hasLegacyGoal) {
            setCurrentStep(4)
          } else {
            setCurrentStep(5)
          }
        } else {
          setCurrentStep(5)
        }
      }
    } catch (err) {
      console.error('Error loading existing data:', err)
    }
  }

  // Helper to merge onboarding_data JSON
  async function mergeOnboardingData(stepKey: string, stepData: any) {
    if (!session || !session.access_token) return null

    // Fetch current onboarding_data
    const { data: profile, error: fetchError } = await supabase
      .from('profiles')
      .select('onboarding_data')
      .eq('id', session.user.id)
      .single()

    if (fetchError) {
      if (fetchError.code === '42501' || fetchError.code === 'PGRST301') {
        return null
      }
      throw fetchError
    }

    // Merge new step data into existing onboarding_data
    const currentData = profile?.onboarding_data || {}
    const mergedData = {
      ...currentData,
      [stepKey]: stepData,
    }

    // Update only onboarding_data column
    const { error: updateError } = await supabase
      .from('profiles')
      .update({
        onboarding_data: mergedData,
        updated_at: new Date().toISOString(),
      })
      .eq('id', session.user.id)

    if (updateError) {
      if (updateError.code === '42501' || updateError.code === 'PGRST301') {
        return null
      }
      throw updateError
    }

    return mergedData
  }

  async function saveStep(stepData: CreatorFormData | BrandFormData, nextStep?: number) {
    if (!session || !role) return

    setLoading(true)
    setError('')

    try {
      // Determine step key based on current step
      const stepKey = `step${currentStep}`

      // Update local state
      if (role === 'creator') {
        const cd = { ...creatorData, ...stepData } as CreatorFormData
        setCreatorData(cd)
      } else {
        const bd = { ...brandData, ...stepData } as BrandFormData
        setBrandData(bd)
      }

      // Save to onboarding_data JSON (merge)
      await mergeOnboardingData(stepKey, stepData)

      if (nextStep) {
        setCurrentStep(nextStep)
      }
    } catch (err: any) {
      setError(err.message || 'C√≥ l·ªói x·∫£y ra khi l∆∞u d·ªØ li·ªáu')
    } finally {
      setLoading(false)
    }
  }

  async function handleComplete() {
    if (!session || !session.access_token || !role) {
      setError('Phi√™n ƒëƒÉng nh·∫≠p kh√¥ng h·ª£p l·ªá. Vui l√≤ng ƒëƒÉng nh·∫≠p l·∫°i.')
      return
    }

    setLoading(true)
    setError('')

    try {
      const { data: profile, error: fetchError } = await supabase
        .from('profiles')
        .select('onboarding_data')
        .eq('id', session.user.id)
        .single()

      if (fetchError) {
        if (fetchError.code === '42501' || fetchError.code === 'PGRST301') {
          setError('Kh√¥ng th·ªÉ truy c·∫≠p d·ªØ li·ªáu. Vui l√≤ng th·ª≠ l·∫°i.')
          setLoading(false)
          return
        }
        throw fetchError
      }

      const onboardingData = profile?.onboarding_data || {}

      // Validate required fields before completing
      if (role === 'creator') {
        const step2 = onboardingData.step2 || {}
        const step3 = onboardingData.step3 || {}
        const step4 = onboardingData.step4 || {}
        
        if (!step2.display_name?.trim() || !step2.birth_year || !step2.gender || !step2.country?.trim() || !step2.city?.trim()) {
          setError('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin c∆° b·∫£n (t√™n, nƒÉm sinh, gi·ªõi t√≠nh, qu·ªëc gia, th√†nh ph·ªë)')
          setLoading(false)
          return
        }
        if (!step3.creator_platforms || step3.creator_platforms.length === 0) {
          setError('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt n·ªÅn t·∫£ng')
          setLoading(false)
          return
        }
        if (!step3.content_categories || step3.content_categories.length === 0) {
          setError('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt danh m·ª•c n·ªôi dung')
          setLoading(false)
          return
        }
        if (!step4.collaboration_expectation || step4.collaboration_expectation.length === 0) {
          setError('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt lo·∫°i h·ª£p t√°c')
          setLoading(false)
          return
        }
      } else {
        const step2 = onboardingData.step2 || {}
        const step3 = onboardingData.step3 || {}
        const step4 = onboardingData.step4 || {}
        
        if (!step2.company_name?.trim() || !step2.industry?.trim() || !step2.country?.trim() || !step2.city?.trim()) {
          setError('Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß th√¥ng tin c∆° b·∫£n (t√™n c√¥ng ty, ng√†nh ngh·ªÅ, qu·ªëc gia, th√†nh ph·ªë)')
          setLoading(false)
          return
        }
        if (!step3.company_size) {
          setError('Vui l√≤ng ch·ªçn quy m√¥ c√¥ng ty')
          setLoading(false)
          return
        }
        if (!step3.target_platforms || step3.target_platforms.length === 0) {
          setError('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt n·ªÅn t·∫£ng m·ª•c ti√™u')
          setLoading(false)
          return
        }
        // Validate collaboration_goals (array) - support legacy campaign_goal for migration
        const hasCollaborationGoals = Array.isArray(step4.collaboration_goals) && step4.collaboration_goals.length > 0
        const hasLegacyCampaignGoal = step4.campaign_goal && step4.campaign_goal.trim()
        if (!hasCollaborationGoals && !hasLegacyCampaignGoal) {
          setError('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt m·ª•c ti√™u h·ª£p t√°c')
          setLoading(false)
          return
        }
        if (!step4.preferred_collaboration_type || step4.preferred_collaboration_type.length === 0) {
          setError('Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt lo·∫°i h·ª£p t√°c')
          setLoading(false)
          return
        }
      }

      // Step 1: Create or update domain-specific profile FIRST
      if (role === 'creator') {
        const step2 = onboardingData.step2 || {}
        const step3 = onboardingData.step3 || {}
        const step4 = onboardingData.step4 || {}

        const creatorProfileData: any = {
          user_id: session.user.id,
          full_name: step2.display_name || null,
          birth_year: step2.birth_year || null,
          gender: step2.gender || null,
          country: step2.country || null,
          city: step2.city || null,
          creator_platforms: step3.creator_platforms || null,
          followers_count: step3.followers_count || null,
          avg_views: step3.avg_views || null,
          content_categories: step3.content_categories || null,
          collaboration_expectation: step4.collaboration_expectation || null,
          created_at: new Date().toISOString(),
          updated_at: new Date().toISOString(),
        }

        // Insert creator profile (if already exists, ignore duplicate)
        const { error: creatorError } = await supabase
          .from('creator_profiles')
          .insert(creatorProfileData)

        // Ignore duplicate key error (if profile already exists)
        if (creatorError && creatorError.code !== '23505') {
          throw creatorError
        }
      } else {
        const step2 = onboardingData.step2 || {}
        const step3 = onboardingData.step3 || {}
        const step4 = onboardingData.step4 || {}

        const brandProfileData: any = {
          user_id: session.user.id,
          brand_name: step2.company_name || null,
          industry: step2.industry || null,
          company_size: step3.company_size || null,
          monthly_marketing_budget: (() => {
            const budgetValue = step3.budget || step3.campaign_budget_range
            return budgetValue ? (typeof budgetValue === 'string' ? parseFloat(budgetValue.replace(/[^0-9.]/g, '')) || null : Number(budgetValue)) : null
          })(),
          target_platforms: step3.target_platforms || null,
          // Store collaboration_goals as array - support legacy campaign_goal during migration
          collaboration_goals: (() => {
            if (Array.isArray(step4.collaboration_goals) && step4.collaboration_goals.length > 0) {
              return step4.collaboration_goals
            }
            // Legacy support: convert single campaign_goal to array if present
            if (step4.campaign_goal && typeof step4.campaign_goal === 'string' && step4.campaign_goal.trim()) {
              // TODO: This is a migration path - remove once all profiles are migrated to array format
              return [step4.campaign_goal as CollaborationGoalOption]
            }
            return null
          })(),
          created_at: new Date().toISOString(),
          updated_at: new Date().toISOString(),
        }

        // Insert brand profile (if already exists, do nothing)
        const { error: brandError } = await supabase
          .from('brand_profiles')
          .insert(brandProfileData)

        // Ignore duplicate key error (if profile already exists)
        if (brandError && brandError.code !== '23505') {
          throw brandError
        }
      }

      // Step 2: Update profiles.onboarding_completed and clear onboarding_data
      const { error: profileError } = await supabase
        .from('profiles')
        .update({
          onboarding_completed: true,
          onboarding_data: null,
          updated_at: new Date().toISOString(),
        })
        .eq('id', session.user.id)

      if (profileError) throw profileError

      // Insert consent record
      const { error: consentError } = await supabase
        .from('user_consents')
        .insert({
          user_id: session.user.id,
          policy_version: 'v1.0',
          accepted_via: 'onboarding',
          accepted_at: new Date().toISOString(),
        })

      if (consentError) {
        console.error('Error inserting consent:', consentError)
        // Don't block onboarding if consent insert fails
      }

      // Redirect directly to dashboard based on role (bypass /app to prevent loops)
      const dashboardPath = role === 'creator' ? '/dashboard/creator' : '/dashboard/brand'
      navigate(dashboardPath, { replace: true })
    } catch (err: any) {
      setError(err.message || 'C√≥ l·ªói x·∫£y ra khi ho√†n t·∫•t onboarding')
      setLoading(false)
    }
  }

  // Show loading while checking auth or fetching role
  if (authLoading || !session) {
    return <LoadingState />
  }

  if (!role) {
    return <LoadingState />
  }

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6 pt-24">
      <div className={`max-w-7xl mx-auto ${role === 'creator' && currentStep >= 2 && currentStep <= 4 ? '' : 'max-w-3xl'}`}>
        <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-8 md:p-10 shadow-xl border border-black/5">
          {/* Progress indicator */}
          <div className="mb-8">
            <div className="flex items-center justify-between mb-2">
              <span className="text-sm text-[#6B7280]">
                B∆∞·ªõc {currentStep} / 5
              </span>
              <span className="text-sm text-[#6B7280]">
                {Math.round((currentStep / 5) * 100)}%
              </span>
            </div>
            <div className="w-full bg-gray-200 rounded-full h-2">
              <div
                className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] h-2 rounded-full transition-all"
                style={{ width: `${(currentStep / 5) * 100}%` }}
              />
            </div>
          </div>

          {error && (
            <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
              {error}
            </div>
          )}

          {/* Step 2: Basic Identity */}
          {currentStep === 2 && (
            <Step2BasicIdentity
              role={role}
              creatorData={creatorData}
              brandData={brandData}
              onSave={(data) => saveStep(data, 3)}
              loading={loading}
            />
          )}

          {/* Step 3: Business/Creator Metrics */}
          {currentStep === 3 && (
            <Step3Metrics
              role={role}
              creatorData={creatorData}
              brandData={brandData}
              onSave={(data) => saveStep(data, 4)}
              loading={loading}
            />
          )}

          {/* Step 4: Collaboration Intent */}
          {currentStep === 4 && (
            <Step4Collaboration
              role={role}
              creatorData={creatorData}
              brandData={brandData}
              onSave={(data) => saveStep(data, 5)}
              loading={loading}
            />
          )}

          {/* Step 5: Finalize */}
          {currentStep === 5 && (
            <Step5Finalize
              role={role}
              creatorData={creatorData}
              brandData={brandData}
              onComplete={handleComplete}
              loading={loading}
            />
          )}

          {/* Navigation buttons */}
          {currentStep > 2 && (
            <div className="mt-6 flex justify-between">
              <button
                onClick={() => setCurrentStep(currentStep - 1)}
                disabled={loading}
                className="px-6 py-2.5 rounded-xl font-medium text-[#6B7280] border border-gray-300 hover:bg-gray-50 disabled:opacity-50"
              >
                Quay l·∫°i
              </button>
            </div>
          )}
        </div>
      </div>
    </div>
  )
}

// Step 2: Basic Identity
function Step2BasicIdentity({
  role,
  creatorData,
  brandData,
  onSave,
  loading,
}: {
  role: 'creator' | 'brand'
  creatorData: CreatorFormData
  brandData: BrandFormData
  onSave: (data: CreatorFormData | BrandFormData) => void
  loading: boolean
}) {
  const [localData, setLocalData] = useState(
    role === 'creator'
      ? {
          display_name: creatorData.display_name || '',
          country: creatorData.country || '',
          city: creatorData.city || '',
          birth_year: creatorData.birth_year || undefined,
          gender: creatorData.gender || '',
        }
      : {
          company_name: brandData.company_name || '',
          industry: brandData.industry || '',
          country: brandData.country || '',
          city: brandData.city || '',
        }
  )
  const [errors, setErrors] = useState<Record<string, string>>({})

  const validateStep2 = () => {
    const newErrors: Record<string, string> = {}
    if (role === 'creator') {
      if (!localData.display_name?.trim()) newErrors.display_name = 'Vui l√≤ng nh·∫≠p t√™n hi·ªÉn th·ªã'
      if (!localData.birth_year) newErrors.birth_year = 'Vui l√≤ng nh·∫≠p nƒÉm sinh'
      if (!localData.gender) newErrors.gender = 'Vui l√≤ng ch·ªçn gi·ªõi t√≠nh'
      if (!localData.country?.trim()) newErrors.country = 'Vui l√≤ng nh·∫≠p qu·ªëc gia'
      if (!localData.city?.trim()) newErrors.city = 'Vui l√≤ng nh·∫≠p th√†nh ph·ªë'
    } else {
      if (!localData.company_name?.trim()) newErrors.company_name = 'Vui l√≤ng nh·∫≠p t√™n c√¥ng ty'
      if (!localData.industry?.trim()) newErrors.industry = 'Vui l√≤ng nh·∫≠p ng√†nh ngh·ªÅ'
      if (!localData.country?.trim()) newErrors.country = 'Vui l√≤ng nh·∫≠p qu·ªëc gia'
      if (!localData.city?.trim()) newErrors.city = 'Vui l√≤ng nh·∫≠p th√†nh ph·ªë'
    }
    setErrors(newErrors)
    return Object.keys(newErrors).length === 0
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    if (!validateStep2()) return
    
    if (role === 'creator') {
      onSave({
        display_name: localData.display_name,
        country: localData.country,
        city: localData.city,
        birth_year: localData.birth_year,
        gender: localData.gender,
      } as CreatorFormData)
    } else {
      onSave({
        company_name: localData.company_name,
        industry: localData.industry,
        country: localData.country,
        city: localData.city,
      } as BrandFormData)
    }
  }

  // Creator preview component
  const CreatorProfilePreview = () => {
    if (role !== 'creator') return null
    
    const displayName = localData.display_name || 'T√™n c·ªßa b·∫°n'
    const location = localData.city && localData.country 
      ? `${localData.city}, ${localData.country}` 
      : localData.city || localData.country || 'ƒê·ªãa ƒëi·ªÉm'
    
    return (
      <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
        <div className="text-center mb-6">
          <div className="w-24 h-24 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] mx-auto mb-4 flex items-center justify-center text-white text-3xl font-bold">
            {displayName.charAt(0).toUpperCase()}
          </div>
          <h3 className="text-xl font-bold text-gray-900 mb-1">{displayName}</h3>
          <p className="text-sm text-gray-600 mb-2">Creator Profile</p>
          <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800">
            Available
          </span>
        </div>
        
        <div className="space-y-4 text-sm">
          <div>
            <p className="text-gray-600 mb-2">üìç {location}</p>
          </div>
          
          <div className="pt-4 border-t border-gray-200">
            <p className="text-xs text-gray-500 mb-2">Xem tr∆∞·ªõc h·ªì s∆°</p>
            <p className="text-sm text-gray-700 leading-relaxed">
              {displayName !== 'T√™n c·ªßa b·∫°n' 
                ? `ƒê√¢y l√† c√°ch h·ªì s∆° c·ªßa b·∫°n s·∫Ω hi·ªÉn th·ªã cho c√°c th∆∞∆°ng hi·ªáu. Ho√†n th√†nh c√°c b∆∞·ªõc ƒë·ªÉ xem th√™m th√¥ng tin.`
                : 'Nh·∫≠p th√¥ng tin ƒë·ªÉ xem tr∆∞·ªõc h·ªì s∆° c·ªßa b·∫°n'}
            </p>
          </div>
        </div>
      </div>
    )
  }

  return (
    <div>
      <h1 className="text-3xl font-semibold tracking-tight mb-4">
        Th√¥ng tin c∆° b·∫£n
      </h1>
      <p className="text-[#6B7280] mb-8">
        {role === 'creator' ? 'H√£y cho ch√∫ng t√¥i bi·∫øt v·ªÅ b·∫°n' : 'H√£y cho ch√∫ng t√¥i bi·∫øt v·ªÅ th∆∞∆°ng hi·ªáu c·ªßa b·∫°n'}
      </p>

      {role === 'creator' ? (
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* Left: Form */}
          <form onSubmit={handleSubmit} className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                T√™n hi·ªÉn th·ªã *
              </label>
              <input
                type="text"
                value={localData.display_name}
                onChange={(e) => {
                  setLocalData({ ...localData, display_name: e.target.value } as any)
                  if (errors.display_name) {
                    setErrors({ ...errors, display_name: '' })
                  }
                }}
                className={`w-full px-4 py-2.5 border rounded-lg ${errors.display_name ? 'border-red-500' : ''}`}
                required
              />
              {errors.display_name && (
                <p className="mt-1 text-sm text-red-600">{errors.display_name}</p>
              )}
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                NƒÉm sinh *
              </label>
              <input
                type="number"
                min="1950"
                max={new Date().getFullYear()}
                value={localData.birth_year || ''}
                onChange={(e) => {
                  setLocalData({ ...localData, birth_year: e.target.value ? parseInt(e.target.value) : undefined } as any)
                  if (errors.birth_year) {
                    setErrors({ ...errors, birth_year: '' })
                  }
                }}
                className={`w-full px-4 py-2.5 border rounded-lg ${errors.birth_year ? 'border-red-500' : ''}`}
                required
              />
              {errors.birth_year && (
                <p className="mt-1 text-sm text-red-600">{errors.birth_year}</p>
              )}
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                Gi·ªõi t√≠nh *
              </label>
              <select
                value={localData.gender}
                onChange={(e) => {
                  setLocalData({ ...localData, gender: e.target.value } as any)
                  if (errors.gender) {
                    setErrors({ ...errors, gender: '' })
                  }
                }}
                className={`w-full px-4 py-2.5 border rounded-lg ${errors.gender ? 'border-red-500' : ''}`}
                required
              >
                <option value="">Ch·ªçn gi·ªõi t√≠nh</option>
                <option value="male">Nam</option>
                <option value="female">N·ªØ</option>
                <option value="other">Kh√°c</option>
              </select>
              {errors.gender && (
                <p className="mt-1 text-sm text-red-600">{errors.gender}</p>
              )}
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                Qu·ªëc gia *
              </label>
              <input
                type="text"
                value={localData.country}
                onChange={(e) => {
                  setLocalData({ ...localData, country: e.target.value })
                  if (errors.country) {
                    setErrors({ ...errors, country: '' })
                  }
                }}
                className={`w-full px-4 py-2.5 border rounded-lg ${errors.country ? 'border-red-500' : ''}`}
                required
              />
              {errors.country && (
                <p className="mt-1 text-sm text-red-600">{errors.country}</p>
              )}
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                Th√†nh ph·ªë *
              </label>
              <input
                type="text"
                value={localData.city}
                onChange={(e) => {
                  setLocalData({ ...localData, city: e.target.value })
                  if (errors.city) {
                    setErrors({ ...errors, city: '' })
                  }
                }}
                className={`w-full px-4 py-2.5 border rounded-lg ${errors.city ? 'border-red-500' : ''}`}
                required
              />
              {errors.city && (
                <p className="mt-1 text-sm text-red-600">{errors.city}</p>
              )}
            </div>
            
            <button
              type="submit"
              disabled={loading}
              className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
            >
              {loading ? 'ƒêang l∆∞u...' : 'Ti·∫øp t·ª•c'}
            </button>
          </form>

          {/* Right: Live Preview */}
          <CreatorProfilePreview />
        </div>
      ) : (
        <form onSubmit={handleSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              T√™n c√¥ng ty *
            </label>
            <input
              type="text"
              value={localData.company_name}
              onChange={(e) => setLocalData({ ...localData, company_name: e.target.value } as any)}
              className="w-full px-4 py-2.5 border rounded-lg"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              Ng√†nh ngh·ªÅ *
            </label>
            <input
              type="text"
              value={localData.industry}
              onChange={(e) => setLocalData({ ...localData, industry: e.target.value } as any)}
              className="w-full px-4 py-2.5 border rounded-lg"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              Qu·ªëc gia *
            </label>
            <input
              type="text"
              value={localData.country}
              onChange={(e) => setLocalData({ ...localData, country: e.target.value })}
              className="w-full px-4 py-2.5 border rounded-lg"
              required
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              Th√†nh ph·ªë *
            </label>
            <input
              type="text"
              value={localData.city}
              onChange={(e) => setLocalData({ ...localData, city: e.target.value })}
              className="w-full px-4 py-2.5 border rounded-lg"
              required
            />
          </div>

          <button
            type="submit"
            disabled={loading}
            className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
          >
            {loading ? 'ƒêang l∆∞u...' : 'Ti·∫øp t·ª•c'}
          </button>
        </form>
      )}
    </div>
  )
}

// Step 3: Business/Creator Metrics
function Step3Metrics({
  role,
  creatorData,
  brandData,
  onSave,
  loading,
}: {
  role: 'creator' | 'brand'
  creatorData: CreatorFormData
  brandData: BrandFormData
  onSave: (data: CreatorFormData | BrandFormData) => void
  loading: boolean
}) {
  const platforms = ['TikTok', 'Instagram', 'YouTube', 'Facebook', 'Twitter', 'LinkedIn']
  
  const [localData, setLocalData] = useState(
    role === 'creator'
      ? {
          creator_platforms: creatorData.creator_platforms || [],
          followers_count: creatorData.followers_count || undefined,
          avg_views: creatorData.avg_views || undefined,
          content_categories: creatorData.content_categories || [],
        }
      : {
          company_size: brandData.company_size || '',
          budget: brandData.budget || undefined,
          campaign_budget_range: brandData.campaign_budget_range || '',
          target_platforms: brandData.target_platforms || [],
        }
  )
  const [errors, setErrors] = useState<Record<string, string>>({})

  const validateStep3 = () => {
    const newErrors: Record<string, string> = {}
    if (role === 'creator') {
      if (!localData.creator_platforms || localData.creator_platforms.length === 0) {
        newErrors.creator_platforms = 'Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt n·ªÅn t·∫£ng'
      }
      if (!localData.content_categories || localData.content_categories.length === 0) {
        newErrors.content_categories = 'Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt danh m·ª•c n·ªôi dung'
      }
    } else {
      if (!localData.company_size) {
        newErrors.company_size = 'Vui l√≤ng ch·ªçn quy m√¥ c√¥ng ty'
      }
      if (!localData.target_platforms || localData.target_platforms.length === 0) {
        newErrors.target_platforms = 'Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt n·ªÅn t·∫£ng m·ª•c ti√™u'
      }
    }
    setErrors(newErrors)
    return Object.keys(newErrors).length === 0
  }

  const togglePlatform = (platform: string, type: 'creator' | 'target') => {
    if (type === 'creator') {
      const current = localData.creator_platforms || []
      const updated = current.includes(platform)
        ? current.filter((p) => p !== platform)
        : [...current, platform]
      setLocalData({ ...localData, creator_platforms: updated } as any)
    } else {
      const current = localData.target_platforms || []
      const updated = current.includes(platform)
        ? current.filter((p) => p !== platform)
        : [...current, platform]
      setLocalData({ ...localData, target_platforms: updated } as any)
    }
  }

  const toggleCategory = (category: string) => {
    const current = localData.content_categories || []
    const updated = current.includes(category)
      ? current.filter((c) => c !== category)
      : [...current, category]
      setLocalData({ ...localData, content_categories: updated } as any)
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    if (!validateStep3()) return
    
    if (role === 'creator') {
      onSave({
        creator_platforms: localData.creator_platforms,
        followers_count: localData.followers_count,
        avg_views: localData.avg_views,
        content_categories: localData.content_categories,
      } as CreatorFormData)
    } else {
      onSave({
        company_size: localData.company_size,
        budget: localData.budget,
        campaign_budget_range: localData.campaign_budget_range,
        target_platforms: localData.target_platforms,
      } as BrandFormData)
    }
  }

  const categories = ['Beauty', 'Fashion', 'Food', 'Travel', 'Tech', 'Fitness', 'Lifestyle', 'Education']

  // Enhanced Creator preview for Step 3
  const CreatorMetricsPreview = () => {
    if (role !== 'creator') return null
    
    const displayName = creatorData.display_name || 'T√™n c·ªßa b·∫°n'
    const location = creatorData.city && creatorData.country 
      ? `${creatorData.city}, ${creatorData.country}` 
      : creatorData.city || creatorData.country || 'ƒê·ªãa ƒëi·ªÉm'
    const followers = localData.followers_count 
      ? localData.followers_count >= 1000 
        ? `${(localData.followers_count / 1000).toFixed(1)}K` 
        : localData.followers_count.toString()
      : null
    const platforms = localData.creator_platforms || []
    const contentCategories = localData.content_categories || []
    
    return (
      <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
        <div className="text-center mb-6">
          <div className="w-24 h-24 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] mx-auto mb-4 flex items-center justify-center text-white text-3xl font-bold">
            {displayName.charAt(0).toUpperCase()}
          </div>
          <h3 className="text-xl font-bold text-gray-900 mb-1">{displayName}</h3>
          <p className="text-sm text-gray-600 mb-2">Creator Profile</p>
          <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mb-3">
            Available
          </span>
        </div>
        
        <div className="space-y-4 text-sm">
          <div>
            <p className="text-gray-600 mb-2">üìç {location}</p>
          </div>
          
          {followers && (
            <div className="flex items-center gap-2 text-gray-700">
              <span className="text-gray-500">üë•</span>
              <span>Followers: {followers}</span>
            </div>
          )}
          
          {platforms.length > 0 && (
            <div>
              <p className="text-xs text-gray-500 mb-2">Platforms</p>
              <div className="flex flex-wrap gap-2">
                {platforms.slice(0, 3).map((platform) => (
                  <span key={platform} className="px-2 py-1 bg-gray-100 rounded text-xs text-gray-700">
                    {platform}
                  </span>
                ))}
                {platforms.length > 3 && (
                  <span className="px-2 py-1 bg-gray-100 rounded text-xs text-gray-700">
                    +{platforms.length - 3}
                  </span>
                )}
              </div>
            </div>
          )}
          
          {contentCategories.length > 0 && (
            <div>
              <p className="text-xs text-gray-500 mb-2">Content Categories</p>
              <div className="flex flex-wrap gap-2">
                {contentCategories.slice(0, 3).map((cat) => (
                  <span key={cat} className="px-2 py-1 bg-[#6366F1]/10 text-[#6366F1] rounded text-xs">
                    {cat}
                  </span>
                ))}
                {contentCategories.length > 3 && (
                  <span className="px-2 py-1 bg-gray-100 rounded text-xs text-gray-700">
                    +{contentCategories.length - 3}
                  </span>
                )}
              </div>
            </div>
          )}
        </div>
      </div>
    )
  }

  return (
    <div>
      <h1 className="text-3xl font-semibold tracking-tight mb-4">
        {role === 'creator' ? 'Th√¥ng tin Creator' : 'Th√¥ng tin Brand'}
      </h1>
      <p className="text-[#6B7280] mb-8">
        {role === 'creator' ? 'Chia s·∫ª v·ªÅ k√™nh v√† n·ªôi dung c·ªßa b·∫°n' : 'Chia s·∫ª v·ªÅ quy m√¥ v√† ng√¢n s√°ch marketing'}
      </p>

      {role === 'creator' ? (
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* Left: Form */}
          <form onSubmit={handleSubmit} className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                N·ªÅn t·∫£ng b·∫°n s·ª≠ d·ª•ng *
              </label>
              <div className="grid grid-cols-2 gap-2">
                {platforms.map((platform) => (
                  <button
                    key={platform}
                    type="button"
                    onClick={() => {
                      togglePlatform(platform, 'creator')
                      if (errors.creator_platforms) {
                        setErrors({ ...errors, creator_platforms: '' })
                      }
                    }}
                    className={`px-4 py-2 rounded-lg border text-sm ${
                      localData.creator_platforms?.includes(platform)
                        ? 'border-[#6366F1] bg-[#6366F1]/10 text-[#6366F1]'
                        : 'border-gray-300 hover:border-gray-400'
                    }`}
                  >
                    {platform}
                  </button>
                ))}
              </div>
              {errors.creator_platforms && (
                <p className="mt-1 text-sm text-red-600">{errors.creator_platforms}</p>
              )}
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                S·ªë l∆∞·ª£ng ng∆∞·ªùi theo d√µi
              </label>
              <input
                type="number"
                min="0"
                value={localData.followers_count || ''}
                onChange={(e) => setLocalData({ ...localData, followers_count: e.target.value ? parseInt(e.target.value) : undefined } as any)}
                className="w-full px-4 py-2.5 border rounded-lg"
                placeholder="V√≠ d·ª•: 100000"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                L∆∞·ª£t xem trung b√¨nh
              </label>
              <input
                type="number"
                min="0"
                value={localData.avg_views || ''}
                onChange={(e) => setLocalData({ ...localData, avg_views: e.target.value ? parseInt(e.target.value) : undefined } as any)}
                className="w-full px-4 py-2.5 border rounded-lg"
                placeholder="V√≠ d·ª•: 50000"
              />
            </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                Danh m·ª•c n·ªôi dung *
              </label>
              <div className="grid grid-cols-2 gap-2">
                {categories.map((category) => (
                  <button
                    key={category}
                    type="button"
                    onClick={() => {
                      toggleCategory(category)
                      if (errors.content_categories) {
                        setErrors({ ...errors, content_categories: '' })
                      }
                    }}
                    className={`px-4 py-2 rounded-lg border text-sm ${
                      localData.content_categories?.includes(category)
                        ? 'border-[#6366F1] bg-[#6366F1]/10 text-[#6366F1]'
                        : 'border-gray-300 hover:border-gray-400'
                    }`}
                  >
                    {category}
                  </button>
                ))}
              </div>
              {errors.content_categories && (
                <p className="mt-1 text-sm text-red-600">{errors.content_categories}</p>
              )}
            </div>
            
            <button
              type="submit"
              disabled={loading}
              className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
            >
              {loading ? 'ƒêang l∆∞u...' : 'Ti·∫øp t·ª•c'}
            </button>
          </form>

          {/* Right: Live Preview */}
          <CreatorMetricsPreview />
        </div>
      ) : (
        <form onSubmit={handleSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              Quy m√¥ c√¥ng ty *
            </label>
            <select
              value={localData.company_size}
              onChange={(e) => {
                setLocalData({ ...localData, company_size: e.target.value } as any)
                if (errors.company_size) {
                  setErrors({ ...errors, company_size: '' })
                }
              }}
              className={`w-full px-4 py-2.5 border rounded-lg ${errors.company_size ? 'border-red-500' : ''}`}
              required
            >
              <option value="">Ch·ªçn quy m√¥</option>
              <option value="startup">Startup (1-10 nh√¢n vi√™n)</option>
              <option value="small">Nh·ªè (11-50 nh√¢n vi√™n)</option>
              <option value="medium">V·ª´a (51-200 nh√¢n vi√™n)</option>
              <option value="large">L·ªõn (201-1000 nh√¢n vi√™n)</option>
              <option value="enterprise">Doanh nghi·ªáp (1000+ nh√¢n vi√™n)</option>
            </select>
            {errors.company_size && (
              <p className="mt-1 text-sm text-red-600">{errors.company_size}</p>
            )}
          </div>
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              Ng√¢n s√°ch marketing (USD)
            </label>
            <input
              type="number"
              min="0"
              value={localData.budget || ''}
              onChange={(e) => setLocalData({ ...localData, budget: e.target.value ? parseInt(e.target.value) : undefined } as any)}
              className="w-full px-4 py-2.5 border rounded-lg"
              placeholder="V√≠ d·ª•: 5000"
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              Kho·∫£ng ng√¢n s√°ch cho 1 chi·∫øn d·ªãch
            </label>
            <input
              type="text"
              value={localData.campaign_budget_range}
              onChange={(e) => setLocalData({ ...localData, campaign_budget_range: e.target.value } as any)}
              className="w-full px-4 py-2.5 border rounded-lg"
              placeholder="V√≠ d·ª•: $1000 - $5000"
            />
          </div>
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              N·ªÅn t·∫£ng m·ª•c ti√™u *
            </label>
            <div className="grid grid-cols-2 gap-2">
              {platforms.map((platform) => (
                <button
                  key={platform}
                  type="button"
                  onClick={() => {
                    togglePlatform(platform, 'target')
                    if (errors.target_platforms) {
                      setErrors({ ...errors, target_platforms: '' })
                    }
                  }}
                  className={`px-4 py-2 rounded-lg border text-sm ${
                    localData.target_platforms?.includes(platform)
                      ? 'border-[#6366F1] bg-[#6366F1]/10 text-[#6366F1]'
                      : 'border-gray-300 hover:border-gray-400'
                  }`}
                >
                  {platform}
                </button>
              ))}
            </div>
            {errors.target_platforms && (
              <p className="mt-1 text-sm text-red-600">{errors.target_platforms}</p>
            )}
          </div>
          
          <button
            type="submit"
            disabled={loading}
            className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
          >
            {loading ? 'ƒêang l∆∞u...' : 'Ti·∫øp t·ª•c'}
          </button>
        </form>
      )}
    </div>
  )
}

// Step 4: Collaboration Intent
function Step4Collaboration({
  role,
  creatorData,
  brandData,
  onSave,
  loading,
}: {
  role: 'creator' | 'brand'
  creatorData: CreatorFormData
  brandData: BrandFormData
  onSave: (data: CreatorFormData | BrandFormData) => void
  loading: boolean
}) {
  const collaborationTypes: ('paid' | 'gift' | 'affiliate')[] = ['paid', 'gift', 'affiliate']
  
  const [localData, setLocalData] = useState(
    role === 'creator'
      ? {
          collaboration_expectation: creatorData.collaboration_expectation || [],
        }
      : {
          collaboration_goals: brandData.collaboration_goals || [],
          preferred_collaboration_type: brandData.preferred_collaboration_type || [],
        }
  )
  const [errors, setErrors] = useState<Record<string, string>>({})

  const validateStep4 = () => {
    const newErrors: Record<string, string> = {}
    if (role === 'creator') {
      if (!localData.collaboration_expectation || localData.collaboration_expectation.length === 0) {
        newErrors.collaboration_expectation = 'Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt lo·∫°i h·ª£p t√°c'
      }
    } else {
      // Validate collaboration_goals as array (multiple selections required)
      if (!localData.collaboration_goals || localData.collaboration_goals.length === 0) {
        newErrors.collaboration_goals = 'Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt m·ª•c ti√™u h·ª£p t√°c'
      }
      if (!localData.preferred_collaboration_type || localData.preferred_collaboration_type.length === 0) {
        newErrors.preferred_collaboration_type = 'Vui l√≤ng ch·ªçn √≠t nh·∫•t m·ªôt lo·∫°i h·ª£p t√°c'
      }
    }
    setErrors(newErrors)
    return Object.keys(newErrors).length === 0
  }

  const toggleCollaborationType = (type: 'paid' | 'gift' | 'affiliate') => {
    if (role === 'creator') {
      const current = localData.collaboration_expectation || []
      const updated = current.includes(type)
        ? current.filter((t) => t !== type)
        : [...current, type]
      setLocalData({ ...localData, collaboration_expectation: updated } as any)
    } else {
      const current = localData.preferred_collaboration_type || []
      const updated = current.includes(type)
        ? current.filter((t) => t !== type)
        : [...current, type]
      setLocalData({ ...localData, preferred_collaboration_type: updated } as any)
    }
  }

  // Collaboration goal options with labels
  const collaborationGoalOptions: { value: CollaborationGoalOption; label: string }[] = [
    { value: 'brand_awareness', label: 'N√¢ng cao nh·∫≠n di·ªán th∆∞∆°ng hi·ªáu' },
    { value: 'product_launch', label: 'Ra m·∫Øt s·∫£n ph·∫©m m·ªõi' },
    { value: 'engagement', label: 'TƒÉng t∆∞∆°ng t√°c' },
    { value: 'conversions', label: 'TƒÉng chuy·ªÉn ƒë·ªïi b√°n h√†ng' },
    { value: 'community_building', label: 'X√¢y d·ª±ng c·ªông ƒë·ªìng' },
    { value: 'content_creation', label: 'T·∫°o n·ªôi dung' },
    { value: 'influencer_relations', label: 'Quan h·ªá v·ªõi Influencer' },
  ]

  const toggleCollaborationGoal = (goal: CollaborationGoalOption) => {
    if (role !== 'brand') return
    const brandLocalData = localData as { collaboration_goals: CollaborationGoalOption[]; preferred_collaboration_type: ('paid' | 'gift' | 'affiliate')[] }
    const current = brandLocalData.collaboration_goals || []
    const updated = current.includes(goal)
      ? current.filter((g) => g !== goal)
      : [...current, goal]
    setLocalData({ ...localData, collaboration_goals: updated } as any)
    if (errors.collaboration_goals) {
      setErrors({ ...errors, collaboration_goals: '' })
    }
  }

  const handleSubmit = (e: React.FormEvent) => {
    e.preventDefault()
    if (!validateStep4()) return
    
    if (role === 'creator') {
      onSave({
        collaboration_expectation: localData.collaboration_expectation,
      } as CreatorFormData)
    } else {
      onSave({
        collaboration_goals: localData.collaboration_goals,
        preferred_collaboration_type: localData.preferred_collaboration_type,
      } as BrandFormData)
    }
  }

  // Creator collaboration preview
  const CreatorCollaborationPreview = () => {
    if (role !== 'creator') return null
    
    const displayName = creatorData.display_name || 'T√™n c·ªßa b·∫°n'
    const location = creatorData.city && creatorData.country 
      ? `${creatorData.city}, ${creatorData.country}` 
      : creatorData.city || creatorData.country || 'ƒê·ªãa ƒëi·ªÉm'
    const followers = creatorData.followers_count 
      ? creatorData.followers_count >= 1000 
        ? `${(creatorData.followers_count / 1000).toFixed(1)}K` 
        : creatorData.followers_count.toString()
      : null
    const platforms = creatorData.creator_platforms || []
    const contentCategories = creatorData.content_categories || []
    const collaborationTypes = localData.collaboration_expectation || []
    
    const getCollaborationLabel = (type: string) => {
      switch(type) {
        case 'paid': return 'Tr·∫£ ph√≠'
        case 'gift': return 'S·∫£n ph·∫©m'
        case 'affiliate': return 'Affiliate'
        default: return type
      }
    }
    
    return (
      <div className="bg-white rounded-xl border border-gray-200 p-6 sticky top-24">
        <div className="text-center mb-6">
          <div className="w-24 h-24 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] mx-auto mb-4 flex items-center justify-center text-white text-3xl font-bold">
            {displayName.charAt(0).toUpperCase()}
          </div>
          <h3 className="text-xl font-bold text-gray-900 mb-1">{displayName}</h3>
          <p className="text-sm text-gray-600 mb-2">Creator Profile</p>
          <span className="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800 mb-3">
            Available
          </span>
        </div>
        
        <div className="space-y-4 text-sm">
          <div>
            <p className="text-gray-600 mb-2">üìç {location}</p>
          </div>
          
          {followers && (
            <div className="flex items-center gap-2 text-gray-700">
              <span className="text-gray-500">üë•</span>
              <span>Followers: {followers}</span>
            </div>
          )}
          
          {platforms.length > 0 && (
            <div>
              <p className="text-xs text-gray-500 mb-2">Platforms</p>
              <div className="flex flex-wrap gap-2">
                {platforms.slice(0, 3).map((platform) => (
                  <span key={platform} className="px-2 py-1 bg-gray-100 rounded text-xs text-gray-700">
                    {platform}
                  </span>
                ))}
                {platforms.length > 3 && (
                  <span className="px-2 py-1 bg-gray-100 rounded text-xs text-gray-700">
                    +{platforms.length - 3}
                  </span>
                )}
              </div>
            </div>
          )}
          
          {contentCategories.length > 0 && (
            <div>
              <p className="text-xs text-gray-500 mb-2">Content Categories</p>
              <div className="flex flex-wrap gap-2">
                {contentCategories.slice(0, 3).map((cat) => (
                  <span key={cat} className="px-2 py-1 bg-[#6366F1]/10 text-[#6366F1] rounded text-xs">
                    {cat}
                  </span>
                ))}
                {contentCategories.length > 3 && (
                  <span className="px-2 py-1 bg-gray-100 rounded text-xs text-gray-700">
                    +{contentCategories.length - 3}
                  </span>
                )}
              </div>
            </div>
          )}
          
          {collaborationTypes.length > 0 && (
            <div className="pt-4 border-t border-gray-200">
              <p className="text-xs text-gray-500 mb-2">Open to Collaboration</p>
              <div className="flex flex-wrap gap-2">
                {collaborationTypes.map((type) => (
                  <span key={type} className="px-2 py-1 bg-green-100 text-green-800 rounded text-xs">
                    {getCollaborationLabel(type)}
                  </span>
                ))}
              </div>
            </div>
          )}
        </div>
      </div>
    )
  }

  return (
    <div>
      <h1 className="text-3xl font-semibold tracking-tight mb-4">
        M·ª•c ti√™u h·ª£p t√°c
      </h1>
      <p className="text-[#6B7280] mb-8">
        {role === 'creator' ? 'B·∫°n mong ƒë·ª£i g√¨ t·ª´ c√°c h·ª£p t√°c?' : 'M·ª•c ti√™u h·ª£p t√°c c·ªßa th∆∞∆°ng hi·ªáu l√† g√¨?'}
      </p>

      {role === 'creator' ? (
        <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
          {/* Left: Form */}
          <form onSubmit={handleSubmit} className="space-y-4">
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                Lo·∫°i h·ª£p t√°c mong mu·ªën *
              </label>
              <div className="grid grid-cols-3 gap-2">
                {collaborationTypes.map((type) => (
                  <button
                    key={type}
                    type="button"
                    onClick={() => {
                      toggleCollaborationType(type)
                      if (errors.collaboration_expectation) {
                        setErrors({ ...errors, collaboration_expectation: '' })
                      }
                    }}
                    className={`px-4 py-2 rounded-lg border text-sm ${
                      localData.collaboration_expectation?.includes(type)
                        ? 'border-[#6366F1] bg-[#6366F1]/10 text-[#6366F1]'
                        : 'border-gray-300 hover:border-gray-400'
                    }`}
                  >
                    {type === 'paid' ? 'Tr·∫£ ph√≠' : type === 'gift' ? 'Qu√† t·∫∑ng' : 'Affiliate'}
                  </button>
                ))}
              </div>
              {errors.collaboration_expectation && (
                <p className="mt-1 text-sm text-red-600">{errors.collaboration_expectation}</p>
              )}
            </div>
            
            <button
              type="submit"
              disabled={loading}
              className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
            >
              {loading ? 'ƒêang l∆∞u...' : 'Ti·∫øp t·ª•c'}
            </button>
          </form>

          {/* Right: Live Preview */}
          <CreatorCollaborationPreview />
        </div>
      ) : (
        <form onSubmit={handleSubmit} className="space-y-4">
          <div>
            <label className="block text-sm font-medium text-[#374151] mb-2">
              M·ª•c ti√™u h·ª£p t√°c *
            </label>
            <p className="text-sm text-gray-600 mb-3">
              Ch·ªçn m·ªôt ho·∫∑c nhi·ªÅu m·ª•c ti√™u cho chi·∫øn d·ªãch h·ª£p t√°c c·ªßa b·∫°n
            </p>
            <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
              {collaborationGoalOptions.map((option) => (
                <button
                  key={option.value}
                  type="button"
                  onClick={() => toggleCollaborationGoal(option.value)}
                  className={`px-4 py-3 rounded-lg border text-sm text-left transition-colors ${
                    localData.collaboration_goals?.includes(option.value)
                      ? 'border-[#6366F1] bg-[#6366F1]/10 text-[#6366F1]'
                      : 'border-gray-300 hover:border-gray-400'
                  }`}
                >
                  {option.label}
                </button>
              ))}
            </div>
            {errors.collaboration_goals && (
              <p className="mt-1 text-sm text-red-600">{errors.collaboration_goals}</p>
            )}
          </div>
            <div>
              <label className="block text-sm font-medium text-[#374151] mb-2">
                Lo·∫°i h·ª£p t√°c ∆∞a th√≠ch *
              </label>
              <div className="grid grid-cols-3 gap-2">
                {collaborationTypes.map((type) => (
                  <button
                    key={type}
                    type="button"
                    onClick={() => {
                      toggleCollaborationType(type)
                      if (errors.preferred_collaboration_type) {
                        setErrors({ ...errors, preferred_collaboration_type: '' })
                      }
                    }}
                    className={`px-4 py-2 rounded-lg border text-sm ${
                      localData.preferred_collaboration_type?.includes(type)
                        ? 'border-[#6366F1] bg-[#6366F1]/10 text-[#6366F1]'
                        : 'border-gray-300 hover:border-gray-400'
                    }`}
                  >
                    {type === 'paid' ? 'Tr·∫£ ph√≠' : type === 'gift' ? 'Qu√† t·∫∑ng' : 'Affiliate'}
                  </button>
                ))}
              </div>
              {errors.preferred_collaboration_type && (
                <p className="mt-1 text-sm text-red-600">{errors.preferred_collaboration_type}</p>
              )}
            </div>
            
            <button
              type="submit"
              disabled={loading}
              className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
            >
              {loading ? 'ƒêang l∆∞u...' : 'Ti·∫øp t·ª•c'}
            </button>
          </form>
        )}
    </div>
  )
}

// Step 5: Finalize
function Step5Finalize({
  role,
  creatorData,
  brandData,
  onComplete,
  loading,
}: {
  role: 'creator' | 'brand'
  creatorData: CreatorFormData
  brandData: BrandFormData
  onComplete: () => void
  loading: boolean
}) {
  return (
    <div>
      <h1 className="text-3xl font-semibold tracking-tight mb-4">
        Ho√†n t·∫•t thi·∫øt l·∫≠p
      </h1>
      <p className="text-[#6B7280] mb-8">
        B·∫°n ƒë√£ ho√†n th√†nh t·∫•t c·∫£ c√°c b∆∞·ªõc thi·∫øt l·∫≠p. Nh·∫•n "Ho√†n t·∫•t" ƒë·ªÉ b·∫Øt ƒë·∫ßu s·ª≠ d·ª•ng ALINO.
      </p>

      <div className="bg-gray-50 rounded-lg p-4 mb-6">
        <h3 className="font-medium mb-2">T√≥m t·∫Øt th√¥ng tin:</h3>
        <ul className="text-sm text-[#6B7280] space-y-1">
          {role === 'creator' && (
            <>
              <li>‚Ä¢ T√™n: {creatorData.display_name || 'Ch∆∞a c√≥'}</li>
              <li>‚Ä¢ ƒê·ªãa ƒëi·ªÉm: {creatorData.city && creatorData.country ? `${creatorData.city}, ${creatorData.country}` : 'Ch∆∞a c√≥'}</li>
              <li>‚Ä¢ N·ªÅn t·∫£ng: {creatorData.creator_platforms?.length || 0} n·ªÅn t·∫£ng</li>
            </>
          )}
          {role === 'brand' && (
            <>
              <li>‚Ä¢ C√¥ng ty: {brandData.company_name || 'Ch∆∞a c√≥'}</li>
              <li>‚Ä¢ Ng√†nh: {brandData.industry || 'Ch∆∞a c√≥'}</li>
              <li>‚Ä¢ Quy m√¥: {brandData.company_size || 'Ch∆∞a c√≥'}</li>
            </>
          )}
        </ul>
      </div>

      <p className="text-sm text-gray-600 mb-6 text-center">
        By clicking Continue, you agree to ALINO's{' '}
        <Link to="/terms" className="text-[#6366F1] hover:underline">
          Terms of Service
        </Link>
        {' '}and{' '}
        <Link to="/privacy" className="text-[#6366F1] hover:underline">
          Privacy Policy
        </Link>
        .
      </p>

      <button
        onClick={onComplete}
        disabled={loading}
        className="w-full px-6 py-2.5 rounded-xl font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] disabled:opacity-50"
      >
        {loading ? 'ƒêang x·ª≠ l√Ω...' : 'Ho√†n t·∫•t'}
      </button>
    </div>
  )
}
</file>

<file path="src/index.css">
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', system-ui, sans-serif;
  }
}

.underline-gradient {
  position: relative;
}

.underline-gradient::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, #6366F1, #EC4899);
  transition: width 0.3s ease;
}

.underline-gradient:hover::after {
  width: 100%;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}
</file>

<file path=".env.example">
VITE_SUPABASE_URL=https://iralrlsuxoqbgcjzdpbb.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlyYWxybHN1eG9xYmdjanpkcGJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1ODA5ODUsImV4cCI6MjA4MjE1Njk4NX0.e0x5keoaE0GlXehvTA05LlzGhZWh63FHROkAz9kPqZU
</file>

<file path=".gitignore">
# =====================
# Dependencies
# =====================
node_modules/
.pnp
.pnp.js

# =====================
# Next.js / Build
# =====================
.next/
out/
build/
dist/

# =====================
# Environment variables
# =====================
.env
.env.local
.env.*.local

# =====================
# Logs
# =====================
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# =====================
# OS / Editor
# =====================
.DS_Store

# =====================
# TypeScript
# =====================
*.tsbuildinfo
next-env.d.ts

# =====================
# Repomix (local only)
# =====================
repomix-output.*

# =====================
# MS Office temp files
# =====================
~$*.docx
~$*.xlsx
~$*.pptx
</file>

<file path="package.json">
{
  "name": "alino-vite",
  "version": "0.1.0",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "vite",
    "build": "tsc && vite build",
    "preview": "vite preview",
    "backup": "git add -A && git commit -m \"backup\" || echo \"No changes to commit\" && git push"
  },
  "dependencies": {
    "@supabase/supabase-js": "^2.89.0",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-router-dom": "^6.26.0",
    "react-icons": "^5.5.0",
    "react-easy-crop": "^5.0.5",
    "recharts": "^2.12.7"
  },
  "devDependencies": {
    "@types/react": "^18.3.3",
    "@types/react-dom": "^18.3.0",
    "@vitejs/plugin-react": "^4.3.1",
    "autoprefixer": "^10.4.23",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.1",
    "typescript": "^5.5.4",
    "vite": "^5.4.0"
  }
}
</file>

<file path="src/App.tsx">
import { BrowserRouter, useLocation } from 'react-router-dom'
import { Router } from './app/router'
import ScrollToTop from './components/shared/ScrollToTop'
import Header from './components/layout/Header'
import Footer from './components/layout/Footer'
import { AuthProvider } from './contexts/AuthContext'

function AppContent() {
  const location = useLocation()
  
  // Dashboard routes don't show header/footer
  const isDashboardMode = location.pathname.startsWith('/dashboard')
  
  return (
    <div className="min-h-screen flex flex-col">
      {!isDashboardMode && <Header />}
      <main className="flex-1">
        <Router />
      </main>
      {!isDashboardMode && <Footer />}
    </div>
  )
}

function App() {
  return (
    <BrowserRouter>
      <AuthProvider>
      <ScrollToTop />
    <AppContent />
      </AuthProvider>
    </BrowserRouter>
  )
}

export default App
</file>

</files>
