This file is a merged representation of the entire codebase, combined into a single document by Repomix.

<file_summary>
This section contains a summary of this file.

<purpose>
This file contains a packed representation of the entire repository's contents.
It is designed to be easily consumable by AI systems for analysis, code review,
or other automated processes.
</purpose>

<file_format>
The content is organized as follows:
1. This summary section
2. Repository information
3. Directory structure
4. Repository files (if enabled)
5. Multiple file entries, each consisting of:
  - File path as an attribute
  - Full contents of the file
</file_format>

<usage_guidelines>
- This file should be treated as read-only. Any changes should be made to the
  original repository files, not this packed version.
- When processing this file, use the file path to distinguish
  between different files in the repository.
- Be aware that this file may contain sensitive information. Handle it with
  the same level of security as you would the original repository.
</usage_guidelines>

<notes>
- Some files may have been excluded based on .gitignore rules and Repomix's configuration
- Binary files are not included in this packed representation. Please refer to the Repository Structure section for a complete list of file paths, including binary files
- Files matching patterns in .gitignore are excluded
- Files matching default ignore patterns are excluded
- Files are sorted by Git change count (files with more changes are at the bottom)
</notes>

</file_summary>

<directory_structure>
app/
  api/
    auth/
      login/
        route.ts
      logout/
        route.ts
      oauth/
        route.ts
      onboarding/
        route.ts
      profile-check/
        route.ts
      role/
        route.ts
      session/
        route.ts
      signup/
        route.ts
    profile/
      route.ts
  auth/
    callback/
      route.ts
  brand/
    BrandDashboard.tsx
    page.tsx
  components/
    home/
      Compare.tsx
      CTA.tsx
      ForWho.tsx
      Hero.tsx
      HomePageClient.tsx
      HowItWorks.tsx
      index.tsx
      Problems.tsx
      Solutions.tsx
      TrustedBy.tsx
      WhyAlino.tsx
    layout/
      Footer.tsx
      Header.tsx
  creator/
    CreatorDashboard.tsx
    page.tsx
  login/
    page.tsx
  onboarding/
    OnboardingPageClient.tsx
    page.tsx
  role/
    page.tsx
    RolePageClient.tsx
  signup/
    page.tsx
  verify-email/
    page.tsx
  AuthGate.tsx
  globals.css
  layout.tsx
  page.tsx
core/
  contracts/
    auth-repository.ts
    brand-request-repository.ts
    creator-repository.ts
  domain/
    auth.ts
    brand-request.ts
    creator.ts
  .gitkeep
infra/
  supabase/
    auth/
      SupabaseAuthRepository.ts
    client.ts
lib/
  hooks/
    useAuth.ts
  api-response.ts
  auth-guards.ts
  container.ts
  supabase-client.ts
  supabase-helpers.ts
  supabase-server.ts
public/
  logo/
    logo.png
supabase/
  migrations/
    001_create_profiles.sql
.env.example
.gitignore
next.config.js
package.json
postcss.config.js
PROFILES_IMPLEMENTATION.md
README.md
tailwind.config.js
TECHNICAL_SUMMARY.md
tsconfig.json
</directory_structure>

<files>
This section contains the contents of the repository's files.

<file path="app/api/auth/oauth/route.ts">
import { NextRequest, NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server'
;

export async function POST(request: NextRequest) {
  try {
    const { provider } = await request.json();

    if (!provider || (provider !== 'google' && provider !== 'apple')) {
      return NextResponse.json(
        { error: 'Provider kh√¥ng h·ª£p l·ªá' },
        { status: 400 }
      );
    }

    const supabase = createServerClientWithCookies()
;
    const origin = request.nextUrl.origin;

    const { data, error } = await supabase.auth.signInWithOAuth({
      provider: provider as 'google' | 'apple',
      options: {
        redirectTo: `${origin}/auth/callback`,
      },
    });

    if (error) {
      return NextResponse.json(
        { error: error.message },
        { status: 400 }
      );
    }

    return NextResponse.json({ url: data.url });
  } catch (error) {
    console.error('OAuth error:', error);
    return NextResponse.json(
      { error: 'C√≥ l·ªói x·∫£y ra khi ƒëƒÉng nh·∫≠p' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/auth/onboarding/route.ts">
import { NextRequest, NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server';

export async function POST(request: NextRequest) {
  try {
    const { onboardingData } = await request.json();

    const supabase = createServerClientWithCookies();

    // Validate session
    const {
      data: { session },
    } = await supabase.auth.getSession();

    if (!session) {
      return NextResponse.json(
        { error: 'Phi√™n ƒëƒÉng nh·∫≠p kh√¥ng h·ª£p l·ªá' },
        { status: 401 }
      );
    }

    const userId = session.user.id;

    // Get current profile to preserve role
    const { data: currentProfile, error: fetchError } = await supabase
      .from('profiles')
      .select('role')
      .eq('id', userId)
      .single();

    if (fetchError || !currentProfile) {
      console.error('Error fetching profile:', fetchError);
      return NextResponse.json(
        { error: 'Profile kh√¥ng t·ªìn t·∫°i. Vui l√≤ng ch·ªçn vai tr√≤ tr∆∞·ªõc.' },
        { status: 400 }
      );
    }

    // Update profile with onboarding_completed = true and onboarding_data as JSON
    const { error: profileError } = await supabase
      .from('profiles')
      .update({
        onboarding_completed: true,
        onboarding_data: onboardingData || {},
      })
      .eq('id', userId);

    if (profileError) {
      console.error('Error updating profile onboarding:', profileError);
      return NextResponse.json(
        { error: profileError.message || 'Kh√¥ng th·ªÉ ho√†n t·∫•t onboarding' },
        { status: 400 }
      );
    }

    // Also update user_metadata for AuthGate compatibility
    const { error: metadataError } = await supabase.auth.updateUser({
      data: {
        role: currentProfile.role,
        onboardingCompleted: true,
      },
    });

    if (metadataError) {
      // Log but don't fail - profiles is source of truth
      console.error('Failed to update user_metadata:', metadataError);
    }

    return NextResponse.json({
      message: 'Onboarding ƒë√£ ƒë∆∞·ª£c ho√†n t·∫•t th√†nh c√¥ng',
    });
  } catch (error) {
    console.error('Onboarding completion error:', error);
    return NextResponse.json(
      { error: 'C√≥ l·ªói x·∫£y ra khi ho√†n t·∫•t onboarding' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/auth/profile-check/route.ts">
// API endpoint to check profile from database (for client-side checks)
import { NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server';

export async function GET() {
  try {
    const supabase = createServerClientWithCookies();

    const {
      data: { session },
    } = await supabase.auth.getSession();

    if (!session) {
      return NextResponse.json({
        hasSession: false,
        hasProfile: false,
      });
    }

    // Check profile from database (source of truth)
    const { data: profile, error } = await supabase
      .from('profiles')
      .select('id, role, onboarding_completed')
      .eq('id', session.user.id)
      .single();

    if (error || !profile) {
      // Session exists but no profile - invalid state
      await supabase.auth.signOut();
      return NextResponse.json({
        hasSession: false,
        hasProfile: false,
      });
    }

    return NextResponse.json({
      hasSession: true,
      hasProfile: true,
      profile,
    });
  } catch (error) {
    console.error('Profile check error:', error);
    return NextResponse.json(
      { error: 'Internal server error' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/auth/role/route.ts">
import { NextRequest, NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server';

export async function POST(request: NextRequest) {
  try {
    const { role } = await request.json();

    if (!role || (role !== 'creator' && role !== 'brand')) {
      return NextResponse.json(
        { error: 'Vai tr√≤ kh√¥ng h·ª£p l·ªá' },
        { status: 400 }
      );
    }

    const supabase = createServerClientWithCookies();

    const {
      data: { session },
    } = await supabase.auth.getSession();

    if (!session) {
      return NextResponse.json(
        { error: 'Ch∆∞a ƒëƒÉng nh·∫≠p' },
        { status: 401 }
      );
    }

    const userId = session.user.id;

    const { error } = await supabase
      .from('profiles')
      .upsert({
        id: userId,
        role,
        onboarding_completed: false,
        onboarding_data: {},
      });

    if (error) {
      console.error(error);
      return NextResponse.json(
        { error: error.message },
        { status: 400 }
      );
    }

    return NextResponse.json({ success: true });
  } catch (err) {
    console.error(err);
    return NextResponse.json(
      { error: 'Server error' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/profile/route.ts">
import { NextRequest, NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server';
import { isAdmin } from '@/lib/supabase-helpers';

// GET: Get profile(s) - user can get their own, admin can get all
export async function GET(request: NextRequest) {
  try {
    const supabase = createServerClientWithCookies();

    // Validate session
    const {
      data: { session },
    } = await supabase.auth.getSession();

    if (!session) {
      return NextResponse.json(
        { error: 'Phi√™n ƒëƒÉng nh·∫≠p kh√¥ng h·ª£p l·ªá' },
        { status: 401 }
      );
    }

    const userId = session.user.id;
    const userEmail = session.user.email;
    const admin = isAdmin(userEmail);

    // Admin can get all profiles, users can only get their own (enforced by RLS)
    if (admin) {
      const { data, error } = await supabase
        .from('profiles')
        .select('*')
        .order('created_at', { ascending: false });

      if (error) {
        console.error('Error fetching all profiles (admin):', error);
        return NextResponse.json(
          { error: error.message || 'Kh√¥ng th·ªÉ l·∫•y danh s√°ch profiles' },
          { status: 400 }
        );
      }

      return NextResponse.json({ profiles: data });
    } else {
      // Regular users - RLS will enforce they can only read their own profile
      const { data, error } = await supabase
        .from('profiles')
        .select('*')
        .eq('id', userId)
        .single();

      if (error) {
        console.error('Error fetching user profile:', error);
        return NextResponse.json(
          { error: error.message || 'Kh√¥ng th·ªÉ l·∫•y profile' },
          { status: 400 }
        );
      }

      return NextResponse.json({ profile: data });
    }
  } catch (error) {
    console.error('Get profile error:', error);
    return NextResponse.json(
      { error: 'C√≥ l·ªói x·∫£y ra khi l·∫•y profile' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/auth/callback/route.ts">
import { NextRequest, NextResponse } from 'next/server'
import { createServerClientWithCookies } from '@/lib/supabase-server'

export async function GET(request: NextRequest) {
  const url = new URL(request.url)
  const supabase = createServerClientWithCookies()

  const code = url.searchParams.get('code')

  // ‚úÖ OAuth login (Google) or Email verification
  if (code) {
    const { data: authData, error } = await supabase.auth.exchangeCodeForSession(code)

    if (error) {
      return NextResponse.redirect(
        new URL('/verify-email?error=expired', url.origin)
      )
    }

    // üî• SESSION ƒê√É ƒê∆Ø·ª¢C SET COOKIE
    // After email verification/OAuth, check profile and redirect accordingly
    if (authData?.user?.id) {
      const userId = authData.user.id;

      await supabase
  .from('profiles')
  .upsert({
    id: userId,
    onboarding_completed: false,
    onboarding_data: {},
  });
      
      // Check profile from database (source of truth)
      const { data: profile } = await supabase
        .from('profiles')
        .select('role, onboarding_completed')
        .eq('id', userId)
        .single();

      if (!profile) {
        // No profile yet - redirect to role selection
        return NextResponse.redirect(new URL('/role', url.origin));
      }

      if (!profile.role) {
        // Profile exists but no role - redirect to role selection
        return NextResponse.redirect(new URL('/role', url.origin));
      }

      if (!profile.onboarding_completed) {
        // Has role but not completed onboarding - redirect to onboarding
        return NextResponse.redirect(new URL('/onboarding', url.origin));
      }

      // Complete profile - redirect to dashboard
      return NextResponse.redirect(new URL(`/${profile.role}`, url.origin));
    }

    // Fallback: redirect to home
    return NextResponse.redirect(new URL('/', url.origin))
  }

  // ‚úÖ Email confirm (KH√îNG login)
  return NextResponse.redirect(
    new URL('/login?verified=1', url.origin)
  )
}
</file>

<file path="app/brand/BrandDashboard.tsx">
'use client';

export default function BrandDashboard() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-12 shadow-xl border border-black/5 text-center">
          <h1 className="text-4xl font-semibold tracking-tight mb-4">
            Brand Dashboard
          </h1>
          <p className="text-lg text-[#6B7280]">
            Trang n√†y ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn
          </p>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/brand/page.tsx">
import { requireCompleteProfile } from '@/lib/auth-guards';
import BrandDashboard from './BrandDashboard';

export default async function BrandPage() {
  // Server-side guard: requires complete profile with brand role
  await requireCompleteProfile('brand');

  return <BrandDashboard />;
}
</file>

<file path="app/components/home/HomePageClient.tsx">
'use client';

import Header from '@/app/components/layout/Header';
import Footer from '@/app/components/layout/Footer';
import HomeBody from '@/app/components/home';

export default function HomePageClient() {
  return (
    <div className="relative overflow-x-hidden bg-white">
      <Header />
      <HomeBody />
      <Footer />
    </div>
  );
}
</file>

<file path="app/creator/CreatorDashboard.tsx">
'use client';

export default function CreatorDashboard() {
  return (
    <div className="min-h-screen bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6">
      <div className="max-w-7xl mx-auto">
        <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-12 shadow-xl border border-black/5 text-center">
          <h1 className="text-4xl font-semibold tracking-tight mb-4">
            Creator Dashboard
          </h1>
          <p className="text-lg text-[#6B7280]">
            Trang n√†y ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn
          </p>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/creator/page.tsx">
import { requireCompleteProfile } from '@/lib/auth-guards';
import CreatorDashboard from './CreatorDashboard';

export default async function CreatorPage() {
  // Server-side guard: requires complete profile with creator role
  await requireCompleteProfile('creator');

  return <CreatorDashboard />;
}
</file>

<file path="app/onboarding/OnboardingPageClient.tsx">
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';

type OnboardingData = {
  displayName?: string;
  companyName?: string;
  primaryPlatform?: string;
  followerRange?: string;
  industry?: string;
  teamSize?: string;
  niche?: string[];
  experienceLevel?: string;
  mainGoal?: string[];
  workedWithCreatorsBefore?: string;
  primaryGoal?: string[];
  howDidYouHear?: string;
  monthlyBudget?: string;
};

export default function OnboardingPageClient({ role }: { role: 'creator' | 'brand' }) {
  const [currentStep, setCurrentStep] = useState(1);
  const [loading, setLoading] = useState(false);
  const [formData, setFormData] = useState<OnboardingData>({});
  const router = useRouter();
  const totalSteps = 3;

  const handleInputChange = (field: keyof OnboardingData, value: string | string[]) => {
    setFormData((prev) => ({ ...prev, [field]: value }));
  };

  const handleMultiSelect = (field: keyof OnboardingData, value: string) => {
    const current = (formData[field] as string[]) || [];
    const updated = current.includes(value)
      ? current.filter((v) => v !== value)
      : [...current, value];
    handleInputChange(field, updated);
  };

  const validateStep = (step: number): boolean => {
    if (step === 1) {
      if (role === 'creator') {
        return !!(formData.displayName && formData.primaryPlatform && formData.followerRange);
      } else {
        return !!(formData.companyName && formData.industry && formData.teamSize);
      }
    }
    if (step === 2) {
      if (role === 'creator') {
        return !!(formData.niche && formData.niche.length > 0 && formData.experienceLevel && formData.mainGoal && formData.mainGoal.length > 0);
      } else {
        return !!(formData.workedWithCreatorsBefore && formData.primaryGoal && formData.primaryGoal.length > 0);
      }
    }
    return true;
  };

  const handleNext = () => {
    if (currentStep < totalSteps && validateStep(currentStep)) {
      setCurrentStep(currentStep + 1);
    }
  };

  const handleBack = () => {
    if (currentStep > 1) {
      setCurrentStep(currentStep - 1);
    }
  };

  const handleSkip = () => {
    if (currentStep === totalSteps) {
      handleComplete();
    } else {
      handleNext();
    }
  };

  const handleComplete = async () => {
    setLoading(true);

    try {
      const res = await fetch('/api/auth/onboarding', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ onboardingData: formData }),
      });

      const data = await res.json();

      if (!res.ok) {
        throw new Error(data.error || 'C√≥ l·ªói x·∫£y ra khi ho√†n t·∫•t onboarding');
      }

      router.push(`/${role}`);
    } catch (err) {
      setLoading(false);
      const errorMessage = err instanceof Error ? err.message : 'C√≥ l·ªói x·∫£y ra khi ho√†n t·∫•t onboarding';
      alert(errorMessage);
    }
  };

  const progressPercentage = (currentStep / totalSteps) * 100;

  return (
    <div className="min-h-screen bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6">
      <div className="max-w-2xl mx-auto">
        {/* Progress Bar */}
        <div className="mb-8">
          <div className="flex justify-between items-center mb-2">
            <span className="text-sm font-medium text-[#6B7280]">
              B∆∞·ªõc {currentStep} / {totalSteps}
            </span>
            <span className="text-sm text-[#9CA3AF]">
              {Math.round(progressPercentage)}%
            </span>
          </div>
          <div className="w-full h-2 bg-[#E5E7EB] rounded-full overflow-hidden">
            <div
              className="h-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] transition-all duration-300"
              style={{ width: `${progressPercentage}%` }}
            />
          </div>
        </div>

        {/* Form Card */}
        <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-8 md:p-10 shadow-xl border border-black/5">
          {/* Step 1: Basic Information */}
          {currentStep === 1 && (
            <div className="space-y-6">
              <div>
                <h2 className="text-3xl font-semibold tracking-tight mb-2">
                  Th√¥ng tin c∆° b·∫£n
                </h2>
                <p className="text-[#6B7280]">
                  H√£y cho ch√∫ng t√¥i bi·∫øt m·ªôt ch√∫t v·ªÅ b·∫°n
                </p>
              </div>

              {role === 'creator' ? (
                <>
                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      T√™n hi·ªÉn th·ªã <span className="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      value={formData.displayName || ''}
                      onChange={(e) => handleInputChange('displayName', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                      placeholder="Nh·∫≠p t√™n hi·ªÉn th·ªã c·ªßa b·∫°n"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      N·ªÅn t·∫£ng ch√≠nh <span className="text-red-500">*</span>
                    </label>
                    <select
                      value={formData.primaryPlatform || ''}
                      onChange={(e) => handleInputChange('primaryPlatform', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                    >
                      <option value="">Ch·ªçn n·ªÅn t·∫£ng</option>
                      <option value="tiktok">TikTok</option>
                      <option value="instagram">Instagram</option>
                      <option value="youtube">YouTube</option>
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      S·ªë l∆∞·ª£ng ng∆∞·ªùi theo d√µi <span className="text-red-500">*</span>
                    </label>
                    <select
                      value={formData.followerRange || ''}
                      onChange={(e) => handleInputChange('followerRange', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                    >
                      <option value="">Ch·ªçn kho·∫£ng</option>
                      <option value="<10k">D∆∞·ªõi 10k</option>
                      <option value="10k-50k">10k - 50k</option>
                      <option value="50k-100k">50k - 100k</option>
                      <option value="100k-500k">100k - 500k</option>
                      <option value="500k+">500k+</option>
                    </select>
                  </div>
                </>
              ) : (
                <>
                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      T√™n c√¥ng ty <span className="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      value={formData.companyName || ''}
                      onChange={(e) => handleInputChange('companyName', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                      placeholder="Nh·∫≠p t√™n c√¥ng ty"
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      Ng√†nh ngh·ªÅ <span className="text-red-500">*</span>
                    </label>
                    <input
                      type="text"
                      value={formData.industry || ''}
                      onChange={(e) => handleInputChange('industry', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                      placeholder="V√≠ d·ª•: Th·ªùi trang, M·ªπ ph·∫©m, F&B..."
                    />
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      Quy m√¥ team <span className="text-red-500">*</span>
                    </label>
                    <select
                      value={formData.teamSize || ''}
                      onChange={(e) => handleInputChange('teamSize', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                    >
                      <option value="">Ch·ªçn quy m√¥</option>
                      <option value="1-5">1 - 5 ng∆∞·ªùi</option>
                      <option value="6-20">6 - 20 ng∆∞·ªùi</option>
                      <option value="21-50">21 - 50 ng∆∞·ªùi</option>
                      <option value="50+">50+ ng∆∞·ªùi</option>
                    </select>
                  </div>
                </>
              )}
            </div>
          )}

          {/* Step 2: Insight & Intent */}
          {currentStep === 2 && (
            <div className="space-y-6">
              <div>
                <h2 className="text-3xl font-semibold tracking-tight mb-2">
                  M·ª•c ti√™u & Kinh nghi·ªám
                </h2>
                <p className="text-[#6B7280]">
                  Gi√∫p ch√∫ng t√¥i hi·ªÉu r√µ h∆°n v·ªÅ b·∫°n
                </p>
              </div>

              {role === 'creator' ? (
                <>
                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-3">
                      Lƒ©nh v·ª±c (c√≥ th·ªÉ ch·ªçn nhi·ªÅu) <span className="text-red-500">*</span>
                    </label>
                    <div className="space-y-2">
                      {['Beauty', 'Fashion', 'Lifestyle', 'Education', 'Finance', 'Tech', 'Other'].map((niche) => (
                        <label key={niche} className="flex items-center gap-3 p-3 rounded-xl border border-[#E4E7EC] hover:border-[#6366F1] cursor-pointer transition-colors">
                          <input
                            type="checkbox"
                            checked={(formData.niche || []).includes(niche)}
                            onChange={() => handleMultiSelect('niche', niche)}
                            className="w-4 h-4 rounded border-[#E4E7EC] text-[#6366F1] focus:ring-[#6366F1]"
                          />
                          <span className="text-[#374151]">{niche === 'Beauty' ? 'L√†m ƒë·∫πp' : niche === 'Fashion' ? 'Th·ªùi trang' : niche === 'Lifestyle' ? 'L·ªëi s·ªëng' : niche === 'Education' ? 'Gi√°o d·ª•c' : niche === 'Finance' ? 'T√†i ch√≠nh' : niche === 'Tech' ? 'C√¥ng ngh·ªá' : 'Kh√°c'}</span>
                        </label>
                      ))}
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-2">
                      M·ª©c ƒë·ªô kinh nghi·ªám <span className="text-red-500">*</span>
                    </label>
                    <select
                      value={formData.experienceLevel || ''}
                      onChange={(e) => handleInputChange('experienceLevel', e.target.value)}
                      className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                    >
                      <option value="">Ch·ªçn m·ª©c ƒë·ªô</option>
                      <option value="new">M·ªõi b·∫Øt ƒë·∫ßu (0-1 nƒÉm)</option>
                      <option value="intermediate">Trung b√¨nh (1-3 nƒÉm)</option>
                      <option value="professional">Chuy√™n nghi·ªáp (3+ nƒÉm)</option>
                    </select>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-3">
                      M·ª•c ti√™u ch√≠nh (c√≥ th·ªÉ ch·ªçn nhi·ªÅu) <span className="text-red-500">*</span>
                    </label>
                    <div className="space-y-2">
                      {[
                        { value: 'receive-bookings', label: 'Nh·∫≠n booking t·ª´ Brand' },
                        { value: 'send-proposals', label: 'Ch·ªß ƒë·ªông g·ª≠i proposal' },
                        { value: 'manage-deals', label: 'Qu·∫£n l√Ω h·ª£p t√°c chuy√™n nghi·ªáp' },
                      ].map((goal) => (
                        <label key={goal.value} className="flex items-center gap-3 p-3 rounded-xl border border-[#E4E7EC] hover:border-[#6366F1] cursor-pointer transition-colors">
                          <input
                            type="checkbox"
                            checked={(formData.mainGoal || []).includes(goal.value)}
                            onChange={() => handleMultiSelect('mainGoal', goal.value)}
                            className="w-4 h-4 rounded border-[#E4E7EC] text-[#6366F1] focus:ring-[#6366F1]"
                          />
                          <span className="text-[#374151]">{goal.label}</span>
                        </label>
                      ))}
                    </div>
                  </div>
                </>
              ) : (
                <>
                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-3">
                      B·∫°n ƒë√£ t·ª´ng h·ª£p t√°c v·ªõi Creator ch∆∞a? <span className="text-red-500">*</span>
                    </label>
                    <div className="grid grid-cols-2 gap-4">
                      {['yes', 'no'].map((option) => (
                        <label key={option} className="flex items-center justify-center gap-2 p-4 rounded-xl border-2 border-[#E4E7EC] hover:border-[#6366F1] cursor-pointer transition-colors">
                          <input
                            type="radio"
                            name="workedWithCreatorsBefore"
                            value={option}
                            checked={formData.workedWithCreatorsBefore === option}
                            onChange={(e) => handleInputChange('workedWithCreatorsBefore', e.target.value)}
                            className="w-4 h-4 border-[#E4E7EC] text-[#6366F1] focus:ring-[#6366F1]"
                          />
                          <span className="text-[#374151] font-medium">{option === 'yes' ? 'ƒê√£ t·ª´ng' : 'Ch∆∞a t·ª´ng'}</span>
                        </label>
                      ))}
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-medium text-[#374151] mb-3">
                      M·ª•c ti√™u ch√≠nh (c√≥ th·ªÉ ch·ªçn nhi·ªÅu) <span className="text-red-500">*</span>
                    </label>
                    <div className="space-y-2">
                      {[
                        { value: 'quick-booking', label: 'Booking nhanh ch√≥ng' },
                        { value: 'long-term', label: 'H·ª£p t√°c l√¢u d√†i' },
                        { value: 'scale-campaigns', label: 'Scale campaign v·ªõi nhi·ªÅu Creator' },
                      ].map((goal) => (
                        <label key={goal.value} className="flex items-center gap-3 p-3 rounded-xl border border-[#E4E7EC] hover:border-[#6366F1] cursor-pointer transition-colors">
                          <input
                            type="checkbox"
                            checked={(formData.primaryGoal || []).includes(goal.value)}
                            onChange={() => handleMultiSelect('primaryGoal', goal.value)}
                            className="w-4 h-4 rounded border-[#E4E7EC] text-[#6366F1] focus:ring-[#6366F1]"
                          />
                          <span className="text-[#374151]">{goal.label}</span>
                        </label>
                      ))}
                    </div>
                  </div>
                </>
              )}
            </div>
          )}

          {/* Step 3: Optional */}
          {currentStep === 3 && (
            <div className="space-y-6">
              <div>
                <h2 className="text-3xl font-semibold tracking-tight mb-2">
                  Th√¥ng tin b·ªï sung (t√πy ch·ªçn)
                </h2>
                <p className="text-[#6B7280]">
                  Gi√∫p ch√∫ng t√¥i c·∫£i thi·ªán d·ªãch v·ª•
                </p>
              </div>

              <div>
                <label className="block text-sm font-medium text-[#374151] mb-2">
                  B·∫°n bi·∫øt ƒë·∫øn ALINO qua ƒë√¢u?
                </label>
                <select
                  value={formData.howDidYouHear || ''}
                  onChange={(e) => handleInputChange('howDidYouHear', e.target.value)}
                  className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                >
                  <option value="">Ch·ªçn ph∆∞∆°ng th·ª©c</option>
                  <option value="social-media">M·∫°ng x√£ h·ªôi</option>
                  <option value="friend">B·∫°n b√® gi·ªõi thi·ªáu</option>
                  <option value="search">T√¨m ki·∫øm Google</option>
                  <option value="ad">Qu·∫£ng c√°o</option>
                  <option value="other">Kh√°c</option>
                </select>
              </div>

              <div>
                <label className="block text-sm font-medium text-[#374151] mb-2">
                  Ng√¢n s√°ch h·ª£p t√°c h√†ng th√°ng
                </label>
                <select
                  value={formData.monthlyBudget || ''}
                  onChange={(e) => handleInputChange('monthlyBudget', e.target.value)}
                  className="w-full px-4 py-3 rounded-xl border border-[#E4E7EC] focus:ring-2 focus:ring-[#6366F1] focus:border-transparent outline-none transition-all"
                >
                  <option value="">Ch·ªçn kho·∫£ng</option>
                  <option value="<5m">D∆∞·ªõi 5 tri·ªáu</option>
                  <option value="5m-10m">5 - 10 tri·ªáu</option>
                  <option value="10m-50m">10 - 50 tri·ªáu</option>
                  <option value="50m+">50+ tri·ªáu</option>
                </select>
              </div>
            </div>
          )}

          {/* Navigation Buttons */}
          <div className="flex items-center justify-between mt-8 pt-6 border-t border-[#E4E7EC]">
            <button
              onClick={handleBack}
              disabled={currentStep === 1}
              className="px-6 py-3 rounded-xl font-medium text-[#6B7280] border border-[#E4E7EC] hover:border-[#6366F1] hover:text-[#6366F1] transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            >
              Quay l·∫°i
            </button>

            <div className="flex gap-3">
              {currentStep === totalSteps && (
                <button
                  onClick={handleSkip}
                  disabled={loading}
                  className="px-6 py-3 rounded-xl font-medium text-[#6B7280] hover:text-[#6366F1] transition-colors"
                >
                  B·ªè qua
                </button>
              )}

              {currentStep < totalSteps ? (
                <button
                  onClick={handleNext}
                  disabled={!validateStep(currentStep)}
                  className="px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25 disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  Ti·∫øp t·ª•c
                </button>
              ) : (
                <button
                  onClick={handleComplete}
                  disabled={loading}
                  className="px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25 disabled:opacity-50 disabled:cursor-not-allowed"
                >
                  {loading ? 'ƒêang x·ª≠ l√Ω...' : 'Ho√†n t·∫•t'}
                </button>
              )}
            </div>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/onboarding/page.tsx">
import { requireRoleButNoOnboarding } from '@/lib/auth-guards';
import OnboardingPageClient from './OnboardingPageClient';

export default async function OnboardingPage() {
  // Server-side guard: redirects if not authenticated, no role, or already completed
  const { profile } = await requireRoleButNoOnboarding();

  if (!profile?.role) {
    // Guard should have redirected, but just in case
    return null;
  }

  const role = profile.role as 'creator' | 'brand';

  return <OnboardingPageClient role={role} />;
}
</file>

<file path="app/role/page.tsx">
import { requireNoRole } from '@/lib/auth-guards';
import RolePageClient from './RolePageClient';

export default async function RolePage() {
  // Server-side guard: redirects if not authenticated or already has role
  await requireNoRole();

  return <RolePageClient />;
}
</file>

<file path="app/role/RolePageClient.tsx">
'use client';

import { useState } from 'react';
import { useRouter } from 'next/navigation';

export default function RolePageClient() {
  const [selectedRole, setSelectedRole] = useState<'creator' | 'brand' | null>(null);
  const [loading, setLoading] = useState(false);
  const router = useRouter();

  const handleSelectRole = async (role: 'creator' | 'brand') => {
    setSelectedRole(role);
    setLoading(true);

    try {
      const res = await fetch('/api/auth/role', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ role }),
      });

      const data = await res.json();

      if (!res.ok) {
        throw new Error(data.error || 'C√≥ l·ªói x·∫£y ra khi ch·ªçn vai tr√≤');
      }

      router.push('/onboarding');
    } catch (err) {
      setLoading(false);
      const errorMessage = err instanceof Error ? err.message : 'C√≥ l·ªói x·∫£y ra khi ch·ªçn vai tr√≤';
      alert(errorMessage);
    }
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6">
      <div className="w-full max-w-4xl">
        <div className="text-center mb-12">
          <h1 className="text-4xl md:text-5xl font-semibold tracking-tight mb-4">
            Ch·ªçn vai tr√≤ c·ªßa b·∫°n
          </h1>
          <p className="text-lg text-[#6B7280] max-w-2xl mx-auto">
            Ch·ªçn vai tr√≤ ph√π h·ª£p v·ªõi c√°ch b·∫°n s·ª≠ d·ª•ng ALINO. B·∫°n c√≥ th·ªÉ thay ƒë·ªïi sau.
          </p>
        </div>

        <div className="grid md:grid-cols-2 gap-6">
          <button
            onClick={() => handleSelectRole('creator')}
            disabled={loading}
            className="bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-xl border-2 border-transparent hover:border-[#6366F1] transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <div className="w-14 h-14 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
              <svg className="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
              </svg>
            </div>
            <h2 className="text-2xl font-semibold mb-4 tracking-tight">T√¥i l√† Creator</h2>
            <p className="text-[#6B7280] mb-6 leading-relaxed">
              X√¢y d·ª±ng h·ªì s∆° chuy√™n nghi·ªáp, qu·∫£n l√Ω d·ªãch v·ª• v√† k·∫øt n·ªëi v·ªõi c√°c Brand ƒë·ªÉ ph√°t tri·ªÉn s·ª± nghi·ªáp.
            </p>
            <div className="inline-block px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] group-hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25">
              Ti·∫øp t·ª•c v·ªõi Creator
            </div>
          </button>

          <button
            onClick={() => handleSelectRole('brand')}
            disabled={loading}
            className="bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-xl border-2 border-transparent hover:border-[#6366F1] transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed"
          >
            <div className="w-14 h-14 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center mb-6 group-hover:scale-110 transition-transform">
              <svg className="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z" />
              </svg>
            </div>
            <h2 className="text-2xl font-semibold mb-4 tracking-tight">T√¥i l√† Brand</h2>
            <p className="text-[#6B7280] mb-6 leading-relaxed">
              Kh√°m ph√° v√† h·ª£p t√°c v·ªõi c√°c Creator c√≥ ·∫£nh h∆∞·ªüng, kh·ªüi ch·∫°y campaign v√† theo d√µi hi·ªáu qu·∫£ d·ªÖ d√†ng.
            </p>
            <div className="inline-block px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] group-hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25">
              Ti·∫øp t·ª•c v·ªõi Brand
            </div>
          </button>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/verify-email/page.tsx">
'use client';

import Link from 'next/link';

export default function VerifyEmailPage() {
  return (
    <div className="min-h-screen flex items-center justify-center bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white py-20 px-6">
      <div className="w-full max-w-md">
        <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-8 shadow-xl border border-black/5 text-center">
          <div className="w-16 h-16 mx-auto mb-6 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center">
            <svg className="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
            </svg>
          </div>

          <h1 className="text-3xl font-semibold tracking-tight mb-4">
            Ki·ªÉm tra email c·ªßa b·∫°n
          </h1>

          <p className="text-[#6B7280] mb-8 leading-relaxed">
            Ch√∫ng t√¥i ƒë√£ g·ª≠i link x√°c th·ª±c ƒë·∫øn ƒë·ªãa ch·ªâ email c·ªßa b·∫°n. 
            Vui l√≤ng ki·ªÉm tra h·ªôp th∆∞ v√† nh·∫•p v√†o link ƒë·ªÉ x√°c th·ª±c t√†i kho·∫£n.
          </p>

          <div className="bg-[#EEF2FF] rounded-xl p-4 mb-8">
            <p className="text-sm text-[#6B7280]">
              <strong>L∆∞u √Ω:</strong> Link x√°c th·ª±c c√≥ hi·ªáu l·ª±c trong 24 gi·ªù. 
              N·∫øu b·∫°n kh√¥ng th·∫•y email, vui l√≤ng ki·ªÉm tra th∆∞ m·ª•c spam.
            </p>
          </div>

          <Link
            href="/login"
            className="inline-block px-6 py-3 rounded-xl font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25"
          >
            Quay l·∫°i ƒëƒÉng nh·∫≠p
          </Link>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/AuthGate.tsx">
'use client';

import { useEffect } from 'react';
import { usePathname, useRouter } from 'next/navigation';
import { useAuth } from '@/lib/hooks/useAuth';

const PUBLIC_ROUTES = ['/', '/login', '/signup', '/verify-email', '/auth/callback'];
const AUTH_ROUTES = ['/login', '/signup', '/verify-email'];

export default function AuthGate({ children }: { children: React.ReactNode }) {
  const { session, loading } = useAuth();
  const pathname = usePathname();
  const router = useRouter();

  useEffect(() => {
    if (loading) return;

    if (!session && !PUBLIC_ROUTES.includes(pathname)) {
      router.replace('/login');
      return;
    }

    if (session) {
      fetch('/api/auth/profile-check')
        .then(res => res.json())
        .then(({ hasSession, hasProfile, profile }) => {
          if (!hasSession || !hasProfile) {
            router.replace('/login');
            return;
          }

          if (!profile.role) {
            router.replace('/role');
            return;
          }

          if (!profile.onboarding_completed) {
            router.replace('/onboarding');
            return;
          }

          if (pathname === '/' || AUTH_ROUTES.includes(pathname)) {
            router.replace(`/${profile.role}`);
          }
        })
        .catch(() => {
          router.replace('/login');
        });
    }
  }, [session, loading, pathname, router]);

  return <>{children}</>;
}
</file>

<file path="lib/auth-guards.ts">
// Auth guard utilities for route-level protection
import { createServerClientWithCookies } from './supabase-server';
import { redirect } from 'next/navigation';

export interface ProfileCheckResult {
  hasSession: boolean;
  hasProfile: boolean;
  profile?: {
    id: string;
    role: string | null;
    onboarding_completed: boolean;
  } | null;
}

/**
 * Check if user has valid session and profile from database
 * This is the source of truth - checks database, not just cookies
 */
export async function checkAuthAndProfile(): Promise<ProfileCheckResult> {
  const supabase = createServerClientWithCookies();

  const {
    data: { session },
  } = await supabase.auth.getSession();

  if (!session) {
    return {
      hasSession: false,
      hasProfile: false,
    };
  }

  // Check profile from database (source of truth)
  const { data: profile, error } = await supabase
    .from('profiles')
    .select('id, role, onboarding_completed')
    .eq('id', session.user.id)
    .single();

  if (error || !profile) {
    // Session exists but no profile - invalid state
    // Sign out and clear auth state
    await supabase.auth.signOut();
    return {
      hasSession: false,
      hasProfile: false,
    };
  }

  return {
    hasSession: true,
    hasProfile: true,
    profile,
  };
}

/**
 * Guard for protected routes - redirects to landing if not authenticated
 * Use this in protected page components
 */
export async function requireAuth(): Promise<ProfileCheckResult> {
  const result = await checkAuthAndProfile();

  if (!result.hasSession || !result.hasProfile) {
    redirect('/');
  }

  return result;
}

/**
 * Guard for role selection page - redirects if already has role
 */
export async function requireNoRole(): Promise<ProfileCheckResult> {
  const result = await checkAuthAndProfile();

  if (!result.hasSession || !result.hasProfile) {
    redirect('/');
  }

  if (result.profile?.role) {
    // Already has role, redirect to next step
    if (!result.profile.onboarding_completed) {
      redirect('/onboarding');
    } else {
      redirect(`/${result.profile.role}`);
    }
  }

  return result;
}

/**
 * Guard for onboarding page - redirects if not ready for onboarding
 */
export async function requireRoleButNoOnboarding(): Promise<ProfileCheckResult> {
  const result = await checkAuthAndProfile();

  if (!result.hasSession || !result.hasProfile) {
    redirect('/');
  }

  if (!result.profile?.role) {
    // No role yet, redirect to role selection
    redirect('/role');
  }

  if (result.profile.onboarding_completed) {
    // Already completed onboarding, redirect to dashboard
    redirect(`/${result.profile.role}`);
  }

  return result;
}

/**
 * Guard for dashboard pages - requires complete profile
 */
export async function requireCompleteProfile(expectedRole?: string): Promise<ProfileCheckResult> {
  const result = await checkAuthAndProfile();

  if (!result.hasSession || !result.hasProfile) {
    redirect('/');
  }

  if (!result.profile?.role) {
    redirect('/role');
  }

  if (!result.profile.onboarding_completed) {
    redirect('/onboarding');
  }

  if (expectedRole && result.profile.role !== expectedRole) {
    redirect(`/${result.profile.role}`);
  }

  return result;
}
</file>

<file path="lib/supabase-helpers.ts">
// Helper function to check if user is admin
export function isAdmin(email: string | null | undefined): boolean {
  if (!email) return false;
  return email.toLowerCase().endsWith('@alino.net');
}
</file>

<file path="lib/supabase-server.ts">
// lib/supabase-server.ts
import { createServerClient } from '@supabase/auth-helpers-nextjs'
import { cookies } from 'next/headers'

export function createServerClientWithCookies() {
  const cookieStore = cookies()

  return createServerClient(
    process.env.NEXT_PUBLIC_SUPABASE_URL!,
    process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,
    {
      cookies: {
        get(name) {
          return cookieStore.get(name)?.value
        },
        set(name, value, options) {
          cookieStore.set({ name, value, ...options })
        },
        remove(name, options) {
          cookieStore.set({ name, value: '', ...options })
        },
      },
    }
  )
}
</file>

<file path="supabase/migrations/001_create_profiles.sql">
-- Create profiles table
CREATE TABLE IF NOT EXISTS public.profiles (
  id UUID PRIMARY KEY REFERENCES auth.users(id) ON DELETE CASCADE,
  role TEXT CHECK (role IN ('creator', 'brand')),
  onboarding_completed BOOLEAN DEFAULT FALSE,
  onboarding_data JSONB DEFAULT '{}'::jsonb,
  
  created_at TIMESTAMPTZ DEFAULT NOW(),
  updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Enable RLS
ALTER TABLE public.profiles ENABLE ROW LEVEL SECURITY;

-- RLS Policy: Users can read their own profile
CREATE POLICY "Users can read their own profile"
  ON public.profiles
  FOR SELECT
  USING (auth.uid() = id);

-- RLS Policy: Users can update their own profile
CREATE POLICY "Users can update their own profile"
  ON public.profiles
  FOR UPDATE
  USING (auth.uid() = id)
  WITH CHECK (auth.uid() = id);

-- RLS Policy: Users can insert their own profile
CREATE POLICY "Users can insert their own profile"
  ON public.profiles
  FOR INSERT
  WITH CHECK (auth.uid() = id);

-- RLS Policy: Admin users (email ends with @alino.net) can read all profiles
CREATE POLICY "Admin users can read all profiles"
  ON public.profiles
  FOR SELECT
  USING (
    EXISTS (
      SELECT 1 FROM auth.users
      WHERE auth.users.id = auth.uid()
      AND auth.users.email LIKE '%@alino.net'
    )
  );

-- RLS Policy: Admin users can update all profiles
CREATE POLICY "Admin users can update all profiles"
  ON public.profiles
  FOR UPDATE
  USING (
    EXISTS (
      SELECT 1 FROM auth.users
      WHERE auth.users.id = auth.uid()
      AND auth.users.email LIKE '%@alino.net'
    )
  )
  WITH CHECK (
    EXISTS (
      SELECT 1 FROM auth.users
      WHERE auth.users.id = auth.uid()
      AND auth.users.email LIKE '%@alino.net'
    )
  );

-- Function to automatically update updated_at timestamp
CREATE OR REPLACE FUNCTION public.handle_updated_at()
RETURNS TRIGGER AS $$
BEGIN
  NEW.updated_at = NOW();
  RETURN NEW;
END;
$$ LANGUAGE plpgsql;

-- Trigger to update updated_at on profile updates
CREATE TRIGGER set_updated_at
  BEFORE UPDATE ON public.profiles
  FOR EACH ROW
  EXECUTE FUNCTION public.handle_updated_at();

-- Create index on role for faster queries
CREATE INDEX IF NOT EXISTS idx_profiles_role ON public.profiles(role);

-- Create index on onboarding_completed for faster queries
CREATE INDEX IF NOT EXISTS idx_profiles_onboarding_completed ON public.profiles(onboarding_completed);
</file>

<file path="PROFILES_IMPLEMENTATION.md">
# Profiles Implementation Guide

## Overview
This implementation creates `public.profiles` as the single source of truth for user data, with proper RLS policies for admin vs user access control.

## SQL Migration

Run the SQL migration file to create the profiles table and RLS policies:

**File:** `supabase/migrations/001_create_profiles.sql`

Execute this SQL in your Supabase SQL Editor or via Supabase CLI.

## Key Features

1. **Profiles Table**: Stores all user data including role, onboarding completion status, and all onboarding survey data
2. **RLS Policies**:
   - Users can read/update their own profile
   - Admin users (email ends with `@alino.net`) can read/update all profiles
3. **Data Flow**:
   - Role selection ‚Üí Creates/updates profile in `profiles` table
   - Onboarding completion ‚Üí Updates profile with survey data
   - Dashboards ‚Üí Read from `profiles` table (via `/api/profile`)

## API Endpoints

### POST `/api/auth/role`
- Creates/updates profile with role
- Sets `onboarding_completed = false`

### POST `/api/auth/onboarding`
- Updates profile with onboarding survey data
- Sets `onboarding_completed = true`

### GET `/api/profile`
- Users: Returns their own profile
- Admins: Returns all profiles

## Admin Detection

Admin users are identified by email ending with `@alino.net` (checked in `lib/supabase-helpers.ts`).

## Notes

- `user_metadata` is still updated for AuthGate compatibility (role, onboardingCompleted flags)
- `profiles` table is the source of truth for all user data
- RLS policies enforce data access restrictions automatically
</file>

<file path="app/api/auth/login/route.ts">
import { NextRequest, NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server';

export async function POST(request: NextRequest) {
  try {
    const { email, password } = await request.json();

    if (!email || !password) {
      return NextResponse.json(
        { error: 'Email v√† m·∫≠t kh·∫©u l√† b·∫Øt bu·ªôc' },
        { status: 400 }
      );
    }

    const supabase = createServerClientWithCookies();

    const { data, error } = await supabase.auth.signInWithPassword({
      email,
      password,
    });

    if (error) {
      return NextResponse.json(
        { error: error.message },
        { status: 400 }
      );
    }

    // ‚úÖ ENSURE PROFILE EXISTS (IDEMPOTENT)
    const userId = data.user.id;

    const { error: upsertError } = await supabase
      .from('profiles')
      .upsert({
        id: userId,
        onboarding_completed: false,
        onboarding_data: {},
      });

    if (upsertError) {
      console.error('Error upserting profile after login:', upsertError);
      // Kh√¥ng fail request ‚Äì profile s·∫Ω ƒë∆∞·ª£c s·ª≠a ·ªü b∆∞·ªõc sau
    }

    return NextResponse.json({
      message: 'ƒêƒÉng nh·∫≠p th√†nh c√¥ng',
      user: data.user,
    });
  } catch (error) {
    console.error('Login error:', error);
    return NextResponse.json(
      { error: 'C√≥ l·ªói x·∫£y ra khi ƒëƒÉng nh·∫≠p' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/auth/logout/route.ts">
import { NextResponse } from 'next/server';
import { createServerClientWithCookies } from '@/lib/supabase-server'
;

export async function POST() {
  try {
    const supabase = createServerClientWithCookies()
;
    await supabase.auth.signOut();

    return NextResponse.json({ message: 'ƒê√£ ƒëƒÉng xu·∫•t' });
  } catch (error) {
    console.error('Logout error:', error);
    return NextResponse.json(
      { error: 'C√≥ l·ªói x·∫£y ra khi ƒëƒÉng xu·∫•t' },
      { status: 500 }
    );
  }
}
</file>

<file path="app/api/auth/signup/route.ts">
import { NextRequest, NextResponse } from 'next/server'
import { createServerClientWithCookies } from '@/lib/supabase-server'

export async function POST(request: NextRequest) {
  const { email, password } = await request.json()

  const supabase = createServerClientWithCookies()

  const { data, error } = await supabase.auth.signUp({
    email,
    password,
    options: {
      emailRedirectTo: `${request.nextUrl.origin}/auth/callback`,
    },
  })

  if (error) {
    return NextResponse.json(
      { error: error.message },
      { status: 400 }
    )
  }

  return NextResponse.json({
    message: 'Check email ƒë·ªÉ verify',
    user: data.user,
  })
}
</file>

<file path="app/components/home/index.tsx">
'use client';

import Hero from './Hero';
import Problems from './Problems';
import Solutions from './Solutions';
import HowItWorks from './HowItWorks';
import ForWho from './ForWho';
import Compare from './Compare';
import WhyAlino from './WhyAlino';
import CTA from './CTA';

export default function HomeBody() {
  return (
    <main className="pt-16">
      <Hero />
      <Problems />
      <Solutions />
      <HowItWorks />
      <ForWho />
      <Compare />
      <WhyAlino />
      <CTA />
    </main>
  );
}
</file>

<file path="app/login/page.tsx">
'use client';

import { useState } from 'react';
import Link from 'next/link';
import Image from 'next/image';

export default function LoginPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');
    setLoading(true);

    try {
      const res = await fetch('/api/auth/login', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password }),
      });

      const data = await res.json();

      if (!res.ok) {
        setError(data.error || 'ƒêƒÉng nh·∫≠p th·∫•t b·∫°i');
        setLoading(false);
        return;
      }

      window.location.href = '/';
    } catch {
      setError('C√≥ l·ªói x·∫£y ra');
      setLoading(false);
    }
  };

  const handleGoogleLogin = async () => {
    const res = await fetch('/api/auth/oauth', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ provider: 'google' }),
    });
    const data = await res.json();
    if (data.url) window.location.href = data.url;
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-[#F9FAFB] px-6 lg:px-6">
      <div className="w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden flex">

        {/* LEFT */}
        <div className="hidden lg:flex w-[45%] bg-gradient-to-br from-[#6366F1]/20 via-[#7C3AED]/15 to-[#EC4899]/20">
          <div className="flex flex-col px-12 pt-12 items-center">
            <Image
              src="/logo/logo.png"
              alt="ALINO"
              width={400}
              height={400}
              priority
              className="w-40 h-40 mb-6"
            />
            <h1 className="text-3xl font-semibold text-[#1F2937] mb-3">
              Ch√†o m·ª´ng t·ªõi v·ªõi Alino
            </h1>
            <p className="text-[#6B7280] leading-relaxed">
              N·ªÅn t·∫£ng qu·∫£n l√Ω c√°c d·ª± √°n h·ª£p t√°c chuy√™n nghi·ªáp
            </p>
          </div>
        </div>

        {/* RIGHT */}
        <div className="w-full lg:w-[55%] px-10 py-8 flex items-center justify-center">
          <div className="w-full max-w-sm">
            <h2 className="text-2xl font-semibold mb-2">ƒêƒÉng nh·∫≠p</h2>
            <p className="text-sm text-[#6B7280] mb-6">
              Nh·∫≠p th√¥ng tin ƒë·ªÉ ti·∫øp t·ª•c
            </p>

            {error && (
              <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
                {error}
              </div>
            )}

            <form onSubmit={handleSubmit} className="space-y-4">
              <input
                type="email"
                placeholder="Email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <input
                type="password"
                placeholder="M·∫≠t kh·∫©u"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <button
                disabled={loading}
                className="w-full py-2.5 rounded-lg text-white font-medium bg-gradient-to-r from-[#6366F1] to-[#EC4899]"
              >
                {loading ? 'ƒêang ƒëƒÉng nh·∫≠p...' : 'ƒêƒÉng nh·∫≠p'}
              </button>
            </form>

            <div className="my-5 text-center text-xs text-[#9CA3AF]">HO·∫∂C</div>

            <button
              onClick={handleGoogleLogin}
              className="w-full py-2.5 border rounded-lg text-sm hover:bg-gray-50 flex items-center justify-center gap-3"
            >
              <svg className="w-5 h-5" viewBox="0 0 24 24">
                <path
                  fill="#4285F4"
                  d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                />
                <path
                  fill="#34A853"
                  d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                />
                <path
                  fill="#FBBC05"
                  d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                />
                <path
                  fill="#EA4335"
                  d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                />
              </svg>
              ƒêƒÉng nh·∫≠p v·ªõi Google
            </button>

            <p className="mt-6 text-center text-sm text-[#6B7280]">
              Ch∆∞a c√≥ t√†i kho·∫£n?{' '}
              <Link href="/signup" className="text-[#6366F1] font-medium">
                ƒêƒÉng k√Ω
              </Link>
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="app/signup/page.tsx">
'use client';

import { useState } from 'react';
import Link from 'next/link';
import Image from 'next/image';

export default function SignupPage() {
  const [email, setEmail] = useState('');
  const [password, setPassword] = useState('');
  const [confirmPassword, setConfirmPassword] = useState('');
  const [error, setError] = useState('');
  const [loading, setLoading] = useState(false);

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault();
    setError('');

    if (password !== confirmPassword) {
      setError('M·∫≠t kh·∫©u x√°c nh·∫≠n kh√¥ng kh·ªõp');
      return;
    }

    if (password.length < 6) {
      setError('M·∫≠t kh·∫©u ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±');
      return;
    }

    setLoading(true);

    try {
      const res = await fetch('/api/auth/signup', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ email, password }),
      });

      const data = await res.json();

      if (!res.ok) {
        setError(data.error || 'ƒêƒÉng k√Ω th·∫•t b·∫°i');
        setLoading(false);
        return;
      }

      window.location.href = '/verify-email';
    } catch {
      setError('C√≥ l·ªói x·∫£y ra');
      setLoading(false);
    }
  };

  const handleGoogleSignup = async () => {
    const res = await fetch('/api/auth/oauth', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ provider: 'google' }),
    });
    const data = await res.json();
    if (data.url) window.location.href = data.url;
  };

  return (
    <div className="min-h-screen flex items-center justify-center bg-[#F9FAFB] px-6">
      <div className="w-full max-w-6xl bg-white rounded-3xl shadow-xl overflow-hidden flex">

        {/* LEFT */}
        <div className="hidden lg:flex w-[45%] bg-gradient-to-br from-[#6366F1]/20 via-[#7C3AED]/15 to-[#EC4899]/20">
          <div className="flex flex-col px-12 pt-12 items-center">
            <Image
              src="/logo/logo.png"
              alt="ALINO"
              width={400}
              height={400}
              priority
              className="w-40 h-40 mb-6"
            />
            <h1 className="text-3xl font-semibold text-[#1F2937] mb-3 text-center">
              Ch√†o m·ª´ng t·ªõi v·ªõi Alino
            </h1>
            <p className="text-[#6B7280] leading-relaxed text-center max-w-sm">
              N·ªÅn t·∫£ng qu·∫£n l√Ω c√°c d·ª± √°n h·ª£p t√°c chuy√™n nghi·ªáp
            </p>
          </div>
        </div>

        {/* RIGHT */}
        <div className="w-full lg:w-[55%] px-10 py-8 flex items-center justify-center">
          <div className="w-full max-w-sm">
            <h2 className="text-2xl font-semibold mb-2">ƒêƒÉng k√Ω</h2>
            <p className="text-sm text-[#6B7280] mb-6">
              T·∫°o t√†i kho·∫£n m·ªõi ƒë·ªÉ b·∫Øt ƒë·∫ßu
            </p>

            {error && (
              <div className="mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm">
                {error}
              </div>
            )}

            <form onSubmit={handleSubmit} className="space-y-4">
              <input
                type="email"
                placeholder="Email"
                value={email}
                onChange={(e) => setEmail(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <input
                type="password"
                placeholder="M·∫≠t kh·∫©u"
                value={password}
                onChange={(e) => setPassword(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <input
                type="password"
                placeholder="X√°c nh·∫≠n m·∫≠t kh·∫©u"
                value={confirmPassword}
                onChange={(e) => setConfirmPassword(e.target.value)}
                className="w-full px-3 py-2.5 border rounded-lg"
                required
              />

              <button
                disabled={loading}
                className="w-full py-2.5 rounded-lg text-white font-medium bg-gradient-to-r from-[#6366F1] to-[#EC4899]"
              >
                {loading ? 'ƒêang t·∫°o t√†i kho·∫£n...' : 'ƒêƒÉng k√Ω'}
              </button>
            </form>

            <div className="my-5 text-center text-xs text-[#9CA3AF]">HO·∫∂C</div>

            <button
              onClick={handleGoogleSignup}
              className="w-full py-2.5 border rounded-lg text-sm hover:bg-gray-50 flex items-center justify-center gap-3"
            >
              <svg className="w-5 h-5" viewBox="0 0 24 24">
                <path
                  fill="#4285F4"
                  d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"
                />
                <path
                  fill="#34A853"
                  d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"
                />
                <path
                  fill="#FBBC05"
                  d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"
                />
                <path
                  fill="#EA4335"
                  d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"
                />
              </svg>
              ƒêƒÉng k√Ω v·ªõi Google
            </button>

            <p className="mt-6 text-center text-sm text-[#6B7280]">
              ƒê√£ c√≥ t√†i kho·∫£n?{' '}
              <Link href="/login" className="text-[#6366F1] font-medium">
                ƒêƒÉng nh·∫≠p
              </Link>
            </p>
          </div>
        </div>
      </div>
    </div>
  );
}
</file>

<file path="core/contracts/auth-repository.ts">
import type { Session } from '@/core/domain/auth';

export interface AuthRepository {
  /**
   * Get the current session
   * @returns The current session or null if not authenticated
   */
  getSession(): Promise<Session | null>;

  /**
   * Sign out the current user
   */
  signOut(): Promise<void>;
}
</file>

<file path="core/contracts/brand-request-repository.ts">
import type { BrandRequest } from '@/core/domain/brand-request';

export interface BrandRequestRepository {
  /**
   * List all brand requests for a creator
   * @param creatorId The creator ID
   * @returns Array of brand requests
   */
  listByCreatorId(creatorId: string): Promise<BrandRequest[]>;

  /**
   * Get a brand request by ID
   * @param id The brand request ID
   * @returns Brand request or null if not found
   */
  getById(id: string): Promise<BrandRequest | null>;
}
</file>

<file path="core/contracts/creator-repository.ts">
import type { Creator } from '@/core/domain/creator';

export interface CreatorRepository {
  /**
   * Get creator by user ID
   * @param userId The user ID
   * @returns Creator or null if not found
   */
  getByUserId(userId: string): Promise<Creator | null>;

  /**
   * Create or update creator profile by user ID
   * @param userId The user ID
   * @param input Creator profile data
   * @returns Updated creator
   */
  upsertByUserId(
    userId: string,
    input: { displayName: string; bio?: string | null; niche?: string | null }
  ): Promise<Creator>;
}
</file>

<file path="core/domain/auth.ts">
export type UserId = string;

export type User = {
  id: UserId;
  email?: string | null;
  name?: string | null;
};

export type Session = {
  user: User;
  accessToken?: string;
  expiresAt?: string;
};
</file>

<file path="core/domain/brand-request.ts">
export type BrandRequestId = string;

export type BrandRequestStatus =
  | 'moi'
  | 'dang_thao_luan'
  | 'da_ky'
  | 'dang_duyet_noi_dung'
  | 'hoan_thanh'
  | 'huy';

export type BrandRequest = {
  id: BrandRequestId;
  creatorId: string;
  brandName: string;
  campaignName: string;
  budget?: number | null;
  status: BrandRequestStatus;
  createdAt?: string;
  updatedAt?: string;
};
</file>

<file path="core/domain/creator.ts">
export type CreatorId = string;

export type Creator = {
  id: CreatorId;
  userId: string;
  displayName: string;
  bio?: string | null;
  niche?: string | null;
  createdAt?: string;
  updatedAt?: string;
};
</file>

<file path="infra/supabase/auth/SupabaseAuthRepository.ts">
import type { AuthRepository } from '@/core/contracts/auth-repository';
import type { Session } from '@/core/domain/auth';
import { supabase } from '../client';

export class SupabaseAuthRepository implements AuthRepository {
  async getSession(): Promise<Session | null> {
    const { data, error } = await supabase.auth.getSession();

    if (error || !data.session) {
      return null;
    }

    const { session } = data;

    return {
      user: {
        id: session.user.id,
        email: session.user.email ?? null,
        name: session.user.user_metadata?.name ?? session.user.user_metadata?.full_name ?? null,
      },
      accessToken: session.access_token,
      expiresAt: new Date(session.expires_at! * 1000).toISOString(),
    };
  }

  async signOut(): Promise<void> {
    await supabase.auth.signOut();
  }
}
</file>

<file path="infra/supabase/client.ts">
import { createClient } from '@supabase/supabase-js';

if (!process.env.NEXT_PUBLIC_SUPABASE_URL) {
  throw new Error('Missing NEXT_PUBLIC_SUPABASE_URL');
}

if (!process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY) {
  throw new Error('Missing NEXT_PUBLIC_SUPABASE_ANON_KEY');
}

export const supabase = createClient(
  process.env.NEXT_PUBLIC_SUPABASE_URL,
  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY
);
</file>

<file path="lib/hooks/useAuth.ts">
// lib/hooks/useAuth.ts
'use client'

import { useEffect, useState } from 'react'
import { useRouter } from 'next/navigation'
import type { Session } from '@supabase/supabase-js'
import { getBrowserSupabase } from '@/lib/supabase-client'

export function useAuth() {
  const [session, setSession] = useState<Session | null>(null)
  const [loading, setLoading] = useState(true)

  const router = useRouter()
  const supabase = getBrowserSupabase() // ‚úÖ SINGLETON

  useEffect(() => {
    let mounted = true

    // üî• LU√îN H·ªéI SERVER TR∆Ø·ªöC
    fetch('/api/auth/session')
      .then((res) => res.json())
      .then(({ session }) => {
        if (!mounted) return

        if (!session) {
          supabase.auth.signOut()
          setSession(null)
        } else {
          setSession(session)
        }
        setLoading(false)
      })
      .catch(() => {
        supabase.auth.signOut()
        setSession(null)
        setLoading(false)
      })

    // üîÅ L·∫Øng nghe auth change (login/logout)
    const {
      data: { subscription },
    } = supabase.auth.onAuthStateChange((_event, session) => {
      setSession(session)
    })

    return () => {
      mounted = false
      subscription.unsubscribe()
    }
  }, [])

  const signOut = async () => {
    await supabase.auth.signOut()
    setSession(null)
    router.push('/login')
  }

  return {
    session,
    user: session?.user ?? null,
    loading,
    signOut,
  }
}
</file>

<file path="lib/api-response.ts">
import { NextResponse } from 'next/server';

/**
 * Standard API response helper
 * Ensures consistent response format with Vietnamese messages
 */

export interface ApiSuccessResponse<T> {
  ok: true;
  data: T;
  message: string;
}

export interface ApiErrorResponse {
  ok: false;
  message: string;
  details?: unknown;
}

/**
 * Create a successful API response
 * @param data Response data
 * @param message Vietnamese message
 * @param status HTTP status code (default: 200)
 */
export function ok<T>(
  data: T,
  message: string,
  status: number = 200
): NextResponse<ApiSuccessResponse<T>> {
  return NextResponse.json(
    {
      ok: true as const,
      data,
      message,
    },
    { status }
  );
}

/**
 * Create an error API response
 * @param message Vietnamese error message
 * @param status HTTP status code (default: 400)
 * @param details Optional error details
 */
export function fail(
  message: string,
  status: number = 400,
  details?: unknown
): NextResponse<ApiErrorResponse> {
  return NextResponse.json(
    {
      ok: false as const,
      message,
      ...(details !== undefined && { details }),
    },
    { status }
  );
}
</file>

<file path="lib/supabase-client.ts">
// lib/supabase-client.ts
'use client'

import { createClient, SupabaseClient } from '@supabase/supabase-js'

let supabaseClient: SupabaseClient | null = null

export function getBrowserSupabase() {
  if (!supabaseClient) {
    supabaseClient = createClient(
      process.env.NEXT_PUBLIC_SUPABASE_URL!,
      process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!
    )
  }

  return supabaseClient
}
</file>

<file path="next.config.js">
/** @type {import('next').NextConfig} */
const nextConfig = {
  // Next.js configuration
  // Add any custom config here if needed
}

module.exports = nextConfig
</file>

<file path="TECHNICAL_SUMMARY.md">
# ALINO APP - TECHNICAL SUMMARY

> **T√†i li·ªáu handover & review**  
> **Ng√†y c·∫≠p nh·∫≠t:** 26/12/2025  
> **Version:** Phase 1-3 Complete

---

## 1. PROJECT OVERVIEW

### M·ª•c ti√™u
N·ªÅn t·∫£ng k·∫øt n·ªëi **Creators** v√† **Brands** ƒë·ªÉ t·∫°o tƒÉng tr∆∞·ªüng th√¥ng qua Creator Marketing.

- **Creator**: T·∫°o profile chuy√™n nghi·ªáp, qu·∫£n l√Ω booking, h·ª£p ƒë·ªìng, nh·∫≠n thanh to√°n
- **Brand**: T√¨m creator ph√π h·ª£p, qu·∫£n l√Ω campaign, tracking, b√°o c√°o

### Tech Stack
- **Frontend**: React 18.2 + TypeScript
- **Build Tool**: Vite 5.0
- **Styling**: TailwindCSS 3.4
- **Routing**: React Router DOM v7.11
- **Backend**: Supabase (Auth + Database + Storage)
- **State**: React Query (profile data) + React Context (auth)
- **Deployment**: Vercel

### Bundle Size
- **Total**: 645KB (gzip: 184KB)
- **Acceptable** cho SaaS app v·ªõi nhi·ªÅu t√≠nh nƒÉng

---

## 2. KI·∫æN TR√öC HI·ªÜN T·∫†I

### Folder Structure
```
src/
‚îú‚îÄ‚îÄ app/providers/         # Context providers (Auth)
‚îú‚îÄ‚îÄ components/            # Shared UI (Layout, Skeleton, Toast, ErrorBoundary)
‚îú‚îÄ‚îÄ features/              # Feature modules (auth, dashboard, landing, onboarding)
‚îú‚îÄ‚îÄ lib/                   # Utils (supabase, queries, errors, env)
‚îú‚îÄ‚îÄ pages/                 # Route entry points
‚îî‚îÄ‚îÄ shared/                # Types, routes, constants, enums
```

### Data Flow
```
Component ‚Üí React Query (useProfile) ‚Üí Supabase Client ‚Üí PostgreSQL
                ‚Üì (cache 5min)
            Query Cache ‚Üí Auto sync khi update
```

### Auth Flow
```
Login/Signup ‚Üí Supabase Auth ‚Üí Session ‚Üí AuthProvider ‚Üí RequireAuth ‚Üí Pages
                                              ‚Üì
                                        AppGate (check role + onboarding)
                                              ‚Üì
                                    Dashboard (Creator/Brand)
```

### Core Components
- **ErrorBoundary**: B·∫Øt l·ªói to√†n app, hi·ªÉn th·ªã fallback UI
- **AuthProvider**: Qu·∫£n l√Ω session/user, subscribe auth changes
- **RequireAuth**: Guard cho protected routes, check email verification
- **AppGate**: Logic routing theo role + onboarding status
- **Onboarding**: Chia th√†nh CreatorOnboarding + BrandOnboarding
- **Profile**: Dynamic render theo role (Creator/Brand)

---

## 3. QUY·∫æT ƒê·ªäNH K·ª∏ THU·∫¨T QUAN TR·ªåNG

### ‚úÖ Phase 1: Critical Fixes

#### 1.1. Refactor Onboarding (657 lines ‚Üí 3 files)
**L√Ω do**: Component qu√° l·ªõn, kh√≥ maintain  
**Gi·∫£i ph√°p**:
- `Onboarding.tsx`: Router (fetch + route theo role)
- `CreatorOnboarding.tsx`: Form ri√™ng cho creator
- `BrandOnboarding.tsx`: Form ri√™ng cho brand

**Trade-off**: C√≥ duplicate code (avatar, validation) nh∆∞ng d·ªÖ extend ƒë·ªôc l·∫≠p.

#### 1.2. ErrorBoundary
**L√Ω do**: App crash ‚Üí white screen, UX t·ªá  
**Gi·∫£i ph√°p**: Class component b·ªçc to√†n app, catch errors, show fallback UI

#### 1.3. Fix Race Conditions
**V·∫•n ƒë·ªÅ**: Navigate tr∆∞·ªõc khi data ready ‚Üí query null  
**Gi·∫£i ph√°p**:
- AuthProvider: Check `mounted` trong callbacks
- AuthCallback/AppGate: Th√™m delay 100ms sau upsert tr∆∞·ªõc khi navigate
- **Trade-off**: Delay nh·ªè (100ms) nh∆∞ng ƒë·∫£m b·∫£o data consistency

---

### ‚úÖ Phase 2: React Query

#### 2.1. T·∫°i sao d√πng React Query?
**V·∫•n ƒë·ªÅ**:
- Profile fetch nhi·ªÅu l·∫ßn (AppGate, Profile, Settings)
- Kh√¥ng c√≥ cache ‚Üí l√£ng ph√≠ bandwidth
- Update profile ‚Üí ph·∫£i refetch th·ªß c√¥ng

**Gi·∫£i ph√°p**:
- `useProfile()`: Fetch + cache 5 ph√∫t
- `useUpdateProfile()`: Mutation + auto invalidate cache
- **Scope**: CH·ªà profile data (kh√¥ng migrate to√†n b·ªô)

**L·ª£i √≠ch**:
- Gi·∫£m API calls ~70%
- Data sync t·ª± ƒë·ªông across components
- Loading/error states nh·∫•t qu√°n

#### 2.2. T·∫°i sao kh√¥ng d√πng Redux/Zustand?
- **Profile data**: Server state ‚Üí React Query ph√π h·ª£p
- **Auth state**: Simple context ƒë·ªß (session + user)
- **Kh√¥ng c√≥ complex client state** c·∫ßn global store

---

### ‚úÖ Phase 3: Code Quality

#### 3.1. Enums thay Magic Strings
**Tr∆∞·ªõc**:
```tsx
const checks = [['fullName', !fullName.trim()], ...];
if (profile.role === 'creator') { ... }
```

**Sau**:
```tsx
const checks = [[ProfileField.FULL_NAME, !fullName.trim()], ...];
if (profile.role === Role.CREATOR) { ... }
```

**L·ª£i √≠ch**: Type safety, autocomplete, kh√¥ng typo

#### 3.2. Structured Error Handling
**Tr∆∞·ªõc**: `catch (err) { setError('L·ªói...') }`  
**Sau**: `catch (err) { setError(handleError(new AppError(...))) }`

**L·ª£i √≠ch**:
- Error codes cho debugging
- User-friendly messages (Ti·∫øng Vi·ªát)
- Severity levels (info/warning/error/critical)
- D·ªÖ t√≠ch h·ª£p Sentry sau n√†y

#### 3.3. Loading Skeletons
**Tr∆∞·ªõc**: Spinner ho·∫∑c text "ƒêang t·∫£i..."  
**Sau**: Skeleton UI (gi·ªëng content layout)

**L·ª£i √≠ch**: Professional UX, perceived performance t·ªët h∆°n

---

## 4. NH·ªÆNG TH·ª® C·ªê T√åNH CH∆ØA L√ÄM

### ‚ùå React Hook Form + Zod
**L√Ω do**: 
- Form hi·ªán t·∫°i ƒë∆°n gi·∫£n, validation th·ªß c√¥ng ƒë·ªß
- Th√™m dependency ~50KB, ch∆∞a c·∫ßn thi·∫øt
- **Khi n√†o c·∫ßn**: Khi c√≥ form ph·ª©c t·∫°p (dynamic fields, nested validation)

### ‚ùå Form Validation Refactor
**L√Ω do**:
- Logic validation ƒëang work, kh√¥ng c√≥ bug
- Refactor = high risk, low reward
- **Khi n√†o c·∫ßn**: Khi scale form (th√™m 10+ fields m·ªõi)

### ‚ùå Dashboard Implementation
**L√Ω do**: 
- Ch·ªâ placeholder, ch·ªù business confirm features
- Kh√¥ng r√µ data model, workflow c·ª• th·ªÉ
- **ƒê√∫ng quy·∫øt ƒë·ªãnh**: Kh√¥ng build blind

### ‚ùå Unit Tests
**L√Ω do**:
- MVP phase, focus stability tr∆∞·ªõc
- Manual test ƒë·ªß cho core flows
- **Khi n√†o c·∫ßn**: Sau khi c√≥ 2-3 features n·ªØa, setup CI/CD

### ‚ùå i18n (Internationalization)
**L√Ω do**:
- Target th·ªã tr∆∞·ªùng Vi·ªát Nam
- Th√™m i18n = overhead, ch·∫≠m development
- **Khi n√†o c·∫ßn**: Khi expand sang th·ªã tr∆∞·ªùng n∆∞·ªõc ngo√†i

### ‚ùå Analytics/Monitoring
**L√Ω do**: Ch∆∞a c√≥ traffic, ch∆∞a c·∫ßn optimize
- **Khi n√†o c·∫ßn**: Sau khi launch public (100+ users)

---

## 5. H∆Ø·ªöNG M·ªû R·ªòNG TI·∫æP THEO

### üéØ Business Priority

#### Ng·∫Øn h·∫°n (1-2 th√°ng)
1. **Dashboard th·ª±c t·∫ø**
   - Creator: Deal management, content calendar, payment tracking
   - Brand: Campaign creation, creator discovery, analytics

2. **Booking Flow**
   - Brand g·ª≠i booking request
   - Creator accept/reject
   - Contract generation

3. **Payment Integration**
   - Escrow system
   - Invoice management
   - Payment history

#### Trung h·∫°n (3-6 th√°ng)
4. **Messaging System** (Creator ‚Üî Brand communication)
5. **Content Review Flow** (upload ‚Üí feedback ‚Üí approve)
6. **Analytics Dashboard** (campaign performance, ROI)

#### D√†i h·∫°n (6-12 th√°ng)
7. **Marketplace** (public creator profiles, search/filter)
8. **AI Matching** (recommend creator based on brand needs)
9. **Mobile App** (React Native ho·∫∑c PWA)

---

### üõ†Ô∏è Tech Improvements

#### High Priority
1. **Unit Tests cho Critical Flows**
   - Auth (login, signup, password reset)
   - Onboarding (validation, data save)
   - Profile (update, avatar upload)
   - **Tool**: Vitest + React Testing Library

2. **Bundle Optimization**
   - Code splitting (React.lazy + Suspense)
   - Dynamic imports cho landing sections
   - Target: 645KB ‚Üí 400KB
   - **Tool**: Vite rollupOptions

3. **Error Monitoring**
   - Integrate Sentry
   - Track errors v·ªõi context (user, page, action)
   - Alert cho critical errors

#### Medium Priority
4. **Performance Monitoring**
   - Web Vitals (LCP, FID, CLS)
   - Custom metrics (API latency, query cache hit rate)
   - **Tool**: Vercel Analytics ho·∫∑c Google Analytics

5. **CI/CD Pipeline**
   - GitHub Actions
   - Auto test ‚Üí build ‚Üí deploy on PR
   - Branch previews

6. **Database Optimization**
   - Add indexes cho queries th∆∞·ªùng d√πng
   - Setup RLS (Row Level Security) policies
   - Backup strategy

#### Nice to Have
7. **Design System** (Storybook for components)
8. **Accessibility Audit** (a11y compliance)
9. **PWA Support** (offline capability, push notifications)

---

## üìä CURRENT STATUS

### ‚úÖ ƒê√£ ho√†n th√†nh
- Auth flow (email/password + Google OAuth)
- Email verification
- Onboarding (Creator + Brand)
- Profile management
- Settings (account, security, password)
- Error handling
- Loading states
- Responsive design

### üöß ƒêang ph√°t tri·ªÉn
- Dashboard (placeholder s·∫µn s√†ng)
- Business features (ch·ªù spec)

### üìã Technical Debt
- **Minimal** - Code quality cao, technical decisions ƒë√∫ng
- Ch·ªâ c√≥ duplicate code nh·ªè ·ªü validation logic
- Kh√¥ng c√≥ major refactor c·∫ßn thi·∫øt

---

## üéì LEARNING & BEST PRACTICES

### Quy·∫øt ƒë·ªãnh ƒë√∫ng
‚úÖ D√πng Vite (fast build)  
‚úÖ Supabase (kh√¥ng c·∫ßn backend ri√™ng)  
‚úÖ React Query (ch·ªâ cho server state)  
‚úÖ TypeScript strict mode (catch bugs s·ªõm)  
‚úÖ Feature-based folder structure (d·ªÖ scale)  
‚úÖ ErrorBoundary (stability)  

### Trade-offs H·ª£p l√Ω
‚öñÔ∏è Delay 100ms (race condition fix) vs UX impact ‚Üí OK  
‚öñÔ∏è Manual validation vs library ‚Üí OK cho form ƒë∆°n gi·∫£n  
‚öñÔ∏è Client-side routing vs SSR ‚Üí OK cho SaaS app  

### Patterns N√™n Gi·ªØ
üîÅ Gate pattern (AppGate cho routing logic)  
üîÅ Provider pattern (AuthProvider)  
üîÅ Feature modules (landing, auth, dashboard)  
üîÅ Shared UI components (components/ui)  

---

## üìû CONTACT & HANDOVER

### Codebase Ready
- ‚úÖ Build th√†nh c√¥ng
- ‚úÖ TypeScript no errors
- ‚úÖ Git history s·∫°ch (3 commits cho 3 phases)
- ‚úÖ Comments r√µ r√†ng trong code

### Knowledge Transfer
- ƒê·ªçc file n√†y tr∆∞·ªõc
- Review 3 commits: Phase 1, 2, 3
- Ch·∫°y local: `npm install` ‚Üí `npm run dev`
- Check `.env.example` cho env vars

### Next Developer Should Know
1. **Auth flow** ph·ª©c t·∫°p (email verify, OAuth, role selection)
2. **Profile data** d√πng React Query ‚Üí check cache khi debug
3. **Validation logic** ·ªü onboarding/profile ‚Üí extend carefully
4. **AppGate** l√† single source of truth cho routing logic

---

**END OF DOCUMENT**
</file>

<file path="app/api/auth/session/route.ts">
// app/api/auth/session/route.ts
import { NextResponse } from 'next/server'
import { createServerClientWithCookies } from '@/lib/supabase-server'

export async function GET() {
  const supabase = createServerClientWithCookies()

  const {
    data: { session },
  } = await supabase.auth.getSession()

  return NextResponse.json({ session })
}
</file>

<file path="app/components/home/Compare.tsx">
'use client';

export default function Compare() {
  return (
    <section className="relative pt-12 md:pt-14 pb-14 md:pb-16 bg-gradient-to-b from-[#F5F7FF] via-[#FAFBFF] to-white">
      <div
        className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[450px] h-[450px] rounded-full blur-[110px] opacity-20"
        style={{ background: '#DDD6FE' }}
      />

      <div className="relative max-w-6xl mx-auto px-6">
        <h2 className="text-4xl md:text-5xl font-semibold tracking-tight text-center mb-10 md:mb-12">
          Tr∆∞·ªõc v√† sau khi d√πng ALINO
        </h2>

        <div className="grid md:grid-cols-2 gap-8">
          <div className="bg-white/80 backdrop-blur-sm rounded-3xl p-10 border-2 border-[#E5E7EB] shadow-lg">
            <h3 className="text-2xl font-semibold mb-8 tracking-tight">
              Tr∆∞·ªõc khi c√≥ ALINO
            </h3>
            <ul className="space-y-4">
              {[
                'Tin nh·∫Øn Zalo/Messenger b·ªã tr√¥i, m·∫•t context',
                'File Google Drive l·ªôn x·ªôn, kh√¥ng ƒë·ªìng b·ªô',
                'Theo d√µi deadline b·∫±ng Excel, d·ªÖ sai s√≥t',
                'Kh√¥ng c√≥ l·ªãch s·ª≠ trao ƒë·ªïi r√µ r√†ng',
                'Thanh to√°n v√† h·ª£p ƒë·ªìng r·∫£i r√°c nhi·ªÅu n∆°i',
                'Kh√¥ng ƒëo l∆∞·ªùng ƒë∆∞·ª£c hi·ªáu qu·∫£ h·ª£p t√°c',
              ].map((item, idx) => (
                <li key={idx} className="flex items-center gap-3">
                  <div className="w-2 h-2 rounded-full bg-[#9CA3AF]" />
                  <span className="text-[#6B7280]">{item}</span>
                </li>
              ))}
            </ul>
          </div>

          <div className="relative rounded-3xl p-[2px] bg-gradient-to-r from-[#6366F1] to-[#EC4899] shadow-xl">
            <div className="bg-gradient-to-br from-white to-[#FAFBFF] rounded-3xl p-10 h-full">
              <h3 className="text-2xl font-semibold mb-8 tracking-tight">
                V·ªõi ALINO
              </h3>
              <ul className="space-y-4">
                {[
                  'N·ªÅn t·∫£ng chung minh b·∫°ch cho c·∫£ hai ph√≠a',
                  'File v√† phi√™n b·∫£n ƒë∆∞·ª£c qu·∫£n l√Ω r√µ r√†ng, ƒë·ªìng b·ªô',
                  'Timeline t·ª± ƒë·ªông, deadline ƒë∆∞·ª£c nh·∫Øc nh·ªü',
                  'L·ªãch s·ª≠ trao ƒë·ªïi ƒë·∫ßy ƒë·ªß, d·ªÖ t√¨m l·∫°i',
                  'Thanh to√°n v√† h·ª£p ƒë·ªìng t·∫≠p trung, minh b·∫°ch',
                  'B√°o c√°o hi·ªáu qu·∫£ h·ª£p t√°c t·ª± ƒë·ªông, c·∫£ hai ph√≠a ƒë·ªÅu th·∫•y',
                ].map((item, idx) => (
                  <li key={idx} className="flex items-center gap-3">
                    <div className="w-2 h-2 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899]" />
                    <span className="text-[#6B7280]">{item}</span>
                  </li>
                ))}
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/CTA.tsx">
'use client';

export default function CTA() {
  return (
    <section className="relative py-20 bg-gradient-to-br from-[#EEF1FF] via-[#F5F7FF] to-white overflow-hidden">
      <div
        className="absolute top-0 left-1/4 w-[500px] h-[500px] rounded-full blur-[120px] opacity-40"
        style={{ background: '#C7D2FE' }}
      />
      <div
        className="absolute bottom-0 right-1/4 w-[480px] h-[480px] rounded-full blur-[115px] opacity-35"
        style={{ background: '#F6C1D1' }}
      />

      <div className="relative max-w-4xl mx-auto px-6 text-center space-y-6">
        <h2 className="text-4xl md:text-5xl lg:text-6xl font-semibold tracking-tight leading-tight">
          B·∫Øt ƒë·∫ßu h·ª£p t√°c{' '}
          <br className="hidden md:block" />
          m·ªôt c√°ch chuy√™n nghi·ªáp h∆°n
        </h2>
        <p className="text-xl text-[#6B7280] max-w-2xl mx-auto">
          ALINO gi√∫p b·∫°n l√†m vi·ªác c√πng ƒë·ªëi t√°c m·ªôt c√°ch minh b·∫°ch, r√µ r√†ng v√† hi·ªáu qu·∫£ h∆°n.
        </p>
        <div className="flex flex-col items-center gap-4">
          <a
            href="/register"
            className="px-10 py-5 rounded-full font-semibold text-lg text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-2xl shadow-[#6366F1]/40"
          >
            B·∫Øt ƒë·∫ßu mi·ªÖn ph√≠
          </a>
          <p className="text-sm text-[#9CA3AF]">
            Kh√¥ng c·∫ßn th·∫ª t√≠n d·ª•ng ‚Ä¢ Thi·∫øt l·∫≠p trong 5 ph√∫t
          </p>
          <p className="text-xs text-[#9CA3AF] mt-2">
            ƒêƒÉng k√Ω ‚Üí ch·ªçn Creator ho·∫∑c Brand ‚Üí t·∫°o workspace ƒë·∫ßu ti√™n
          </p>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/ForWho.tsx">
'use client';

export default function ForWho() {
  return (
    <section className="relative py-14 md:py-16 bg-gradient-to-b from-[#FAFBFF] via-white to-[#F5F7FF]">
      <div
        className="absolute top-20 left-20 w-[380px] h-[380px] rounded-full blur-[100px] opacity-25"
        style={{ background: '#C7D2FE' }}
      />
      <div
        className="absolute bottom-20 right-20 w-[350px] h-[350px] rounded-full blur-[90px] opacity-20"
        style={{ background: '#F6C1D1' }}
      />

      <div className="relative max-w-6xl mx-auto px-6">
        <h2 className="text-4xl md:text-5xl font-semibold tracking-tight text-center mb-10 md:mb-12">
          ALINO d√†nh cho ai?
        </h2>

        <div className="grid md:grid-cols-2 gap-8">
          <div className="bg-white/90 backdrop-blur-sm rounded-3xl p-10 shadow-xl hover:shadow-2xl hover:-translate-y-2 transition-all border border-black/5">
            <h3 className="text-2xl font-semibold mb-6 tracking-tight">
              Creator
            </h3>
            <p className="text-[#6B7280] mb-8 leading-relaxed">
              D√†nh cho nh√† s√°ng t·∫°o n·ªôi dung mu·ªën l√†m vi·ªác chuy√™n nghi·ªáp v·ªõi nhi·ªÅu Brand trong workspace chung, minh b·∫°ch v√† hi·ªáu qu·∫£.
            </p>
            <ul className="space-y-4 mb-10">
              {[
                'Kh√°m ph√° v√† nh·∫≠n l·ªùi m·ªùi h·ª£p t√°c t·ª´ nhi·ªÅu Brand',
                'L√†m vi·ªác trong n·ªÅn t·∫£ng chung, minh b·∫°ch v·ªõi Brand',
                'Giao n·ªôi dung v√† nh·∫≠n feedback c√≥ l·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß',
                'Theo d√µi deadline v√† ti·∫øn ƒë·ªô c·ªßa t·ª´ng d·ª± √°n h·ª£p t√°c',
                'Xem th·ªëng k√™ hi·ªáu qu·∫£ v√† k·∫øt qu·∫£ c√¥ng vi·ªác',
              ].map((benefit, idx) => (
                <li key={idx} className="flex items-start gap-3">
                  <div className="w-5 h-5 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex-shrink-0 mt-0.5 flex items-center justify-center">
                    <div className="w-2 h-2 rounded-full bg-white" />
                  </div>
                  <span className="text-[#6B7280]">{benefit}</span>
                </li>
              ))}
            </ul>
            <a
              href="/register"
              className="inline-block px-8 py-4 rounded-full font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25"
            >
              D√πng th·ª≠ mi·ªÖn ph√≠
            </a>
          </div>

          <div className="bg-gradient-to-br from-[#FAFBFF] to-white rounded-3xl p-10 shadow-xl hover:shadow-2xl hover:-translate-y-2 transition-all border border-black/5">
            <h3 className="text-2xl font-semibold mb-6 tracking-tight">
              Brand / Agency
            </h3>
            <p className="text-[#6B7280] mb-8 leading-relaxed">
              D√†nh cho nh√£n h√†ng v√† c√°c c√¥ng ty c·∫ßn h·ª£p t√°c v·ªõi nhi·ªÅu Creator trong workspace chung, c√πng theo d√µi ti·∫øn ƒë·ªô v√† hi·ªáu qu·∫£.
            </p>
            <ul className="space-y-4 mb-10">
              {[
                'Kh√°m ph√° v√† k·∫øt n·ªëi v·ªõi Creator ph√π h·ª£p',
                'L√†m vi·ªác trong n·ªÅn t·∫£ng chung v·ªõi t·ª´ng Creator',
                'Theo d√µi ti·∫øn ƒë·ªô v√† deadline c·ªßa t·ª´ng d·ª± √°n h·ª£p t√°c',
                'Xem v√† ph·∫£n h·ªìi n·ªôi dung c√≥ l·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß',
                'Xem b√°o c√°o t·ªïng h·ª£p hi·ªáu qu·∫£ c·ªßa t·∫•t c·∫£ d·ª± √°n',
              ].map((benefit, idx) => (
                <li key={idx} className="flex items-start gap-3">
                  <div className="w-5 h-5 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex-shrink-0 mt-0.5 flex items-center justify-center">
                    <div className="w-2 h-2 rounded-full bg-white" />
                  </div>
                  <span className="text-[#6B7280]">{benefit}</span>
                </li>
              ))}
            </ul>
            <a
              href="/register"
              className="inline-block px-8 py-4 rounded-full font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25"
            >
              D√πng th·ª≠ mi·ªÖn ph√≠
            </a>
          </div>
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/Hero.tsx">
'use client';

import TrustedBy from './TrustedBy';

export default function Hero() {
  return (
    <section className="relative h-[calc(100vh-64px)] overflow-hidden">
      <div className="absolute inset-0 bg-gradient-to-b from-[#EEF1FF] via-[#F5F7FF] to-white" />

      <div className="absolute -top-40 -left-40 w-[500px] h-[500px] rounded-full blur-[120px] opacity-50 bg-[#C7D2FE]" />
      <div className="absolute top-1/4 right-0 w-[400px] h-[400px] rounded-full blur-[120px] opacity-40 bg-[#F6C1D1]" />
      <div className="absolute bottom-0 left-1/3 w-[350px] h-[350px] rounded-full blur-[90px] opacity-35 bg-[#DDD6FE]" />

      <div className="relative max-w-7xl mx-auto px-6 h-full flex flex-col pt-16 pb-20">
        <div className="flex-1 grid lg:grid-cols-2 gap-12 items-center">
          <div className="space-y-6">
            <h1 className="text-5xl md:text-6xl lg:text-7xl font-semibold tracking-tight leading-tight">
              Workspace chung cho
              <br />
              <span className="bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">Creator & Brand</span> h·ª£p t√°c hi·ªáu qu·∫£
            </h1>

            <p className="text-lg md:text-xl text-[#6B7280] leading-relaxed max-w-xl">
              Kh√¥ng c√≤n Zalo ‚Äì Excel ‚Äì Drive r·ªùi r·∫°c.<br />
              ALINO gom to√†n b·ªô d·ª± √°n, n·ªôi dung v√† ti·∫øn ƒë·ªô v√†o m·ªôt n∆°i duy nh·∫•t.
            </p>

            <div className="flex flex-col sm:flex-row items-start sm:items-center gap-4">
              <a
                href="/register"
                className="px-7 py-3.5 rounded-full font-semibold text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/30"
              >
                B·∫Øt ƒë·∫ßu mi·ªÖn ph√≠
              </a>
              <span className="text-sm text-[#9CA3AF]">
                Kh√¥ng c·∫ßn th·∫ª ‚Ä¢ 5 ph√∫t thi·∫øt l·∫≠p
              </span>
            </div>
          </div>

          <div className="relative">
  <div className="bg-white/90 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-black/5">
    <div className="space-y-5">

      {/* Top bar */}
      <div className="flex items-center justify-between">
        <div className="flex items-center gap-2">
          <div className="h-3 w-24 bg-[#E5E7EB] rounded-full" />
          <div className="h-3 w-16 bg-[#EEF2FF] rounded-full" />
        </div>
        <span className="text-xs text-[#10B981] bg-[#ECFDF5] px-2 py-0.5 rounded-full">
          Active
        </span>
      </div>

      {/* Content */}
      <div className="grid grid-cols-2 gap-4">
        {/* Creator column */}
        <div className="space-y-3">
          <p className="text-xs font-medium text-[#6366F1]">Creator</p>
          <div className="bg-[#EEF2FF] rounded-xl p-3">
            <p className="text-xs font-medium">Video TikTok</p>
            <p className="text-[11px] text-[#6B7280]">Draft ƒëang ch·ªù duy·ªát</p>
          </div>
          <div className="bg-[#E0E7FF] rounded-xl p-3">
            <p className="text-xs font-medium">Instagram Reel</p>
            <p className="text-[11px] text-[#6B7280]">ƒê√£ g·ª≠i</p>
          </div>
        </div>

        {/* Brand column */}
        <div className="space-y-3">
          <p className="text-xs font-medium text-[#EC4899]">Brand</p>
          <div className="bg-[#FCE7F3] rounded-xl p-3">
            <p className="text-xs font-medium">Feedback</p>
            <p className="text-[11px] text-[#6B7280]">
              ‚ÄúS·ª≠a caption ƒëo·∫°n ƒë·∫ßu‚Äù
            </p>
          </div>
          <div className="bg-[#FBCFE8] rounded-xl p-3">
            <p className="text-xs font-medium">Approved</p>
            <p className="text-[11px] text-[#6B7280]">
              OK ƒëƒÉng ng√†y 25/12
            </p>
          </div>
        </div>
      </div>

      {/* Timeline */}
      <div className="flex items-center gap-2 pt-2">
        <div className="h-2 w-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] rounded-full" />
        <span className="text-[10px] text-[#6B7280]">75%</span>
      </div>
    </div>
  </div>
</div>
        </div>
        <div className="mt-10">
          <TrustedBy />
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/HowItWorks.tsx">
'use client';

export default function HowItWorks() {
  return (
    <section className="relative py-14 md:py-16 bg-gradient-to-b from-white to-[#FAFBFF]">
      <div
        className="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] rounded-full blur-[120px] opacity-18"
        style={{ background: '#F6C1D1' }}
      />

      <div className="relative max-w-6xl mx-auto px-6">
        <h2 className="text-4xl md:text-5xl font-semibold tracking-tight text-center mb-10 md:mb-12">
          ALINO ho·∫°t ƒë·ªông nh∆∞ th·∫ø n√†o?
        </h2>

        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-8 relative">
          {[
            {
              step: '1',
              title: 'T·∫°o t√†i kho·∫£n',
              desc: 'ƒêƒÉng k√Ω nhanh ch√≥ng, ch·ªçn vai tr√≤ Creator ho·∫∑c Brand.',
            },
            {
              step: '2',
              title: 'Kh√°m ph√° & k·∫øt n·ªëi',
              desc: 'Brand t√¨m Creator ph√π h·ª£p, Creator nh·∫≠n l·ªùi m·ªùi h·ª£p t√°c.',
            },
            {
              step: '3',
              title: 'L√†m vi·ªác c√πng nhau',
              desc: 'Creator t·∫°o n·ªôi dung, Brand xem v√† ph·∫£n h·ªìi tr·ª±c ti·∫øp tr√™n n·ªÅn t·∫£ng chung.',
            },
            {
              step: '4',
              title: 'Theo d√µi & ƒë√°nh gi√°',
              desc: 'C·∫£ hai ph√≠a xem ti·∫øn ƒë·ªô, th·ªëng k√™ v√† k·∫øt qu·∫£ h·ª£p t√°c minh b·∫°ch.',
            },
          ].map((item, idx) => (
            <div key={idx} className="relative">
              <div className="bg-gradient-to-br from-white to-[#FAFBFF] rounded-3xl p-8 border border-black/5 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all">
                <div className="w-12 h-12 rounded-full bg-gradient-to-r from-[#6366F1] to-[#EC4899] flex items-center justify-center text-xl font-bold text-white mb-6">
                  {item.step}
                </div>
                <h3 className="font-semibold text-lg mb-3 tracking-tight">
                  {item.title}
                </h3>
                <p className="text-sm text-[#6B7280] leading-relaxed">
                  {item.desc}
                </p>
              </div>
              {idx < 3 && (
                <div className="hidden lg:block absolute top-1/2 -right-4 w-8 h-0.5 bg-gradient-to-r from-[#6366F1] to-[#EC4899]" />
              )}
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/Problems.tsx">
'use client';

export default function Problems() {
  return (
    <section className="relative py-14 md:py-16 bg-gradient-to-b from-white via-[#FAFBFF] to-[#F5F7FF]">
      <div
        className="absolute top-20 right-20 w-[350px] h-[350px] rounded-full blur-[90px] opacity-25"
        style={{ background: '#F6C1D1' }}
      />

      <div className="relative max-w-6xl mx-auto px-6">
        <h2 className="text-4xl md:text-5xl font-semibold tracking-tight text-center mb-10 md:mb-12">
          H·ª£p t√°c nhi·ªÅu h∆°n{' '}
          <br className="md:hidden" />
          nh∆∞ng quy tr√¨nh ng√†y c√†ng r·ªëi
        </h2>

        <div className="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
          {[
            'Tin nh·∫Øn Zalo/Messenger b·ªã tr√¥i, m·∫•t context cu·ªôc h·ªôi tho·∫°i',
            'File Google Drive l·ªôn x·ªôn, kh√¥ng bi·∫øt phi√™n b·∫£n n√†o l√† m·ªõi nh·∫•t',
            'Theo d√µi deadline b·∫±ng Excel, d·ªÖ b·ªã qu√™n ho·∫∑c tr√πng l·ªãch',
            'Kh√¥ng c√≥ l·ªãch s·ª≠ ph·∫£n h·ªìi, kh√¥ng nh·ªõ ƒë√£ trao ƒë·ªïi g√¨',
            'Thanh to√°n v√† h·ª£p ƒë·ªìng n·∫±m r·∫£i r√°c nhi·ªÅu n∆°i',
            'Kh√¥ng ƒëo l∆∞·ªùng ƒë∆∞·ª£c hi·ªáu qu·∫£ c·ªßa t·ª´ng d·ª± √°n h·ª£p t√°c',
          ].map((point, idx) => (
            <div
              key={idx}
              className="bg-white/80 backdrop-blur-sm rounded-3xl p-6 border border-black/5 shadow-sm hover:shadow-md hover:-translate-y-1 transition-all"
            >
              <div className="flex items-start gap-3">
                <div className="w-2 h-2 rounded-full bg-[#9CA3AF] mt-2 flex-shrink-0" />
                <p className="text-[#6B7280] leading-relaxed">{point}</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/Solutions.tsx">
'use client';

export default function Solutions() {
  return (
    <section className="relative pt-12 md:pt-14 pb-14 md:pb-16 bg-gradient-to-b from-[#F5F7FF] via-[#FAFBFF] to-white">
      <div
        className="absolute top-0 left-0 w-[400px] h-[400px] rounded-full blur-[100px] opacity-35"
        style={{ background: '#C7D2FE' }}
      />
      <div
        className="absolute bottom-0 right-0 w-[380px] h-[380px] rounded-full blur-[95px] opacity-30"
        style={{ background: '#DDD6FE' }}
      />

      <div className="relative max-w-6xl mx-auto px-6">
        <h2 className="text-4xl md:text-5xl font-semibold tracking-tight text-center mb-10 md:mb-12">
          ALINO t·∫°o n·ªÅn t·∫£ng h·ª£p t√°c r√µ r√†ng
        </h2>

        <div className="grid md:grid-cols-2 lg:grid-cols-4 gap-6">
          {[
            {
              title: 'N·ªÅn t·∫£ng chung',
              desc: 'Creator v√† Brand l√†m vi·ªác c√πng nhau trong m·ªôt n∆°i duy nh·∫•t, minh b·∫°ch v√† ƒë·ªìng b·ªô.',
            },
            {
              title: 'Quy tr√¨nh r√µ r√†ng',
              desc: 'Timeline t·ª± ƒë·ªông: Y√™u c·∫ßu ‚Üí Draft ‚Üí Feedback ‚Üí Duy·ªát ‚Üí Ho√†n th√†nh.',
            },
            {
              title: 'L·ªãch s·ª≠ ƒë·∫ßy ƒë·ªß',
              desc: 'M·ªçi trao ƒë·ªïi, comment v√† thay ƒë·ªïi ƒë·ªÅu ƒë∆∞·ª£c l∆∞u l·∫°i, kh√¥ng bao gi·ªù m·∫•t context.',
            },
            {
              title: 'B√°o c√°o minh b·∫°ch',
              desc: 'Th·ªëng k√™ ti·∫øn ƒë·ªô v√† k·∫øt qu·∫£ h·ª£p t√°c ƒë∆∞·ª£c c·∫≠p nh·∫≠t t·ª± ƒë·ªông, c·∫£ hai ph√≠a ƒë·ªÅu th·∫•y.',
            },
          ].map((feature, idx) => (
            <div
              key={idx}
              className="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg hover:shadow-xl hover:-translate-y-2 transition-all border border-black/5"
            >
              <h3 className="font-semibold text-lg mb-3 tracking-tight">
                {feature.title}
              </h3>
              <p className="text-sm text-[#6B7280] leading-relaxed">
                {feature.desc}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
</file>

<file path="app/components/home/TrustedBy.tsx">
'use client';

export default function TrustedBy() {
  return (
    <div className="pb-4 pt-6">
      <p className="text-center text-[11px] uppercase tracking-widest text-[#9CA3AF] mb-3">
        ƒê∆∞·ª£c tin d√πng tr√™n c√°c n·ªÅn t·∫£ng
      </p>
      <div className="flex justify-center gap-10 text-sm text-[#6B7280] font-medium">
        <span>Tiktok</span>
        <span>Instagram</span>
        <span>Facebook</span>
        <span>Youtube</span>
      </div>
    </div>
  );
}
</file>

<file path="app/components/home/WhyAlino.tsx">
'use client';

export default function WhyAlino() {
  return (
    <section className="relative py-14 md:py-16 bg-gradient-to-b from-white via-[#FAFBFF] to-white">
      <div
        className="absolute top-0 right-0 w-[450px] h-[450px] rounded-full blur-[100px] opacity-25"
        style={{ background: '#C7D2FE' }}
      />
      <div
        className="absolute bottom-0 left-0 w-[400px] h-[400px] rounded-full blur-[95px] opacity-20"
        style={{ background: '#F6C1D1' }}
      />

      <div className="relative max-w-5xl mx-auto px-6">
        <h2 className="text-4xl md:text-5xl font-semibold tracking-tight text-center mb-10 md:mb-12">
          T·∫°i sao ch·ªçn ALINO?
        </h2>

        <div className="grid md:grid-cols-3 gap-8">
          {[
            {
              title: 'Thi·∫øt k·∫ø cho th·ªã tr∆∞·ªùng Vi·ªát Nam',
              desc: 'Hi·ªÉu r√µ c√°ch l√†m vi·ªác c·ªßa Creator v√† Brand t·∫°i Vi·ªát Nam, ALINO ƒë∆∞·ª£c x√¢y d·ª±ng ph√π h·ª£p v·ªõi th·ª±c t·∫ø h·ª£p t√°c.',
            },
            {
              title: 'ƒê∆°n gi·∫£n, t·∫≠p trung',
              desc: 'Kh√¥ng ph·ª©c t·∫°p, kh√¥ng th·ª´a t√≠nh nƒÉng. ALINO t·∫≠p trung v√†o nh·ªØng g√¨ th·ª±c s·ª± c·∫ßn thi·∫øt cho h·ª£p t√°c hi·ªáu qu·∫£.',
            },
            {
              title: 'X√¢y d·ª±ng cho h·ª£p t√°c l√¢u d√†i',
              desc: 'Kh√¥ng ch·ªâ m·ªôt l·∫ßn h·ª£p t√°c, ALINO gi√∫p b·∫°n x√¢y d·ª±ng m·ªëi quan h·ªá l√†m vi·ªác b·ªÅn v·ªØng v·ªõi ƒë·ªëi t√°c.',
            },
          ].map((item, idx) => (
            <div
              key={idx}
              className="bg-white/90 backdrop-blur-sm rounded-3xl p-8 shadow-lg hover:shadow-xl hover:-translate-y-1 transition-all border border-black/5"
            >
              <h3 className="font-semibold text-lg mb-4 tracking-tight">
                {item.title}
              </h3>
              <p className="text-sm text-[#6B7280] leading-relaxed">
                {item.desc}
              </p>
            </div>
          ))}
        </div>
      </div>
    </section>
  );
}
</file>

<file path="lib/container.ts">
import type { AuthRepository } from '@/core/contracts/auth-repository';
import type { CreatorRepository } from '@/core/contracts/creator-repository';
import type { BrandRequestRepository } from '@/core/contracts/brand-request-repository';
import { SupabaseAuthRepository } from '@/infra/supabase/auth/SupabaseAuthRepository';

export function getServices(): {
  authRepository: AuthRepository;
  creatorRepository: CreatorRepository;
  brandRequestRepository: BrandRequestRepository;
} {
  return {
    authRepository: new SupabaseAuthRepository(),
    creatorRepository: null as any,
    brandRequestRepository: null as any,
  };
}
</file>

<file path="postcss.config.js">
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}
</file>

<file path="app/components/layout/Footer.tsx">
'use client';

import Image from 'next/image';
import { FaFacebook, FaInstagram, FaTiktok, FaYoutube, FaLinkedin, FaPhone, FaEnvelope, FaMapMarkerAlt } from 'react-icons/fa';

export default function Footer() {
  return (
    <footer className="relative pt-20 pb-8 bg-white border-t border-black/5">
      <div className="max-w-7xl mx-auto px-6">
        <div className="grid md:grid-cols-5 gap-12 mb-8">
          <div className="space-y-4">
            <div className="flex items-center gap-3">
              <Image
                src="/logo/logo.png"
                alt="ALINO"
                width={28}
                height={28}
                className="w-7 h-7"
              />
              <span className="font-semibold text-lg tracking-tight bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
                ALINO
              </span>
            </div>
            <p className="text-sm text-[#6B7280] leading-relaxed">
              N·ªÅn t·∫£ng h·ª£p t√°c cho Creator v√† Brand chuy√™n nghi·ªáp.
            </p>
            <div className="flex items-center gap-4 pt-2">
              <a
                href="https://facebook.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#1877F2] transition-colors hover:scale-110 transform duration-200"
              >
                <FaFacebook size={20} />
              </a>
              <a
                href="https://instagram.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#DD2A7B] transition-colors hover:scale-110 transform duration-200"
              >
                <FaInstagram size={20} />
              </a>
              <a
                href="https://tiktok.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#000000] transition-colors hover:scale-110 transform duration-200"
              >
                <FaTiktok size={20} />
              </a>
              <a
                href="https://youtube.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#FF0000] transition-colors hover:scale-110 transform duration-200"
              >
                <FaYoutube size={20} />
              </a>
              <a
                href="https://linkedin.com"
                target="_blank"
                rel="noopener noreferrer"
                className="text-[#9CA3AF] hover:text-[#0A66C2] transition-colors hover:scale-110 transform duration-200"
              >
                <FaLinkedin size={20} />
              </a>
            </div>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">S·∫£n ph·∫©m</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li>
                <a href="#product" className="hover:text-[#6366F1] transition-colors">
                  T√≠nh nƒÉng
                </a>
              </li>
              <li>
                <a href="#pricing" className="hover:text-[#6366F1] transition-colors">
                  B·∫£ng gi√°
                </a>
              </li>
              <li>
                <a href="#how-it-works" className="hover:text-[#6366F1] transition-colors">
                  C√°ch ho·∫°t ƒë·ªông
                </a>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">C√¥ng ty</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li>
                <a href="#about" className="hover:text-[#6366F1] transition-colors">
                  V·ªÅ ch√∫ng t√¥i
                </a>
              </li>
              <li>
                <a href="#news" className="hover:text-[#6366F1] transition-colors">
                  Tin t·ª©c
                </a>
              </li>
              <li>
                <a href="#contact" className="hover:text-[#6366F1] transition-colors">
                  Li√™n h·ªá
                </a>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">Ph√°p l√Ω</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li>
                <a href="#terms" className="hover:text-[#6366F1] transition-colors">
                  ƒêi·ªÅu kho·∫£n s·ª≠ d·ª•ng
                </a>
              </li>
              <li>
                <a href="#privacy" className="hover:text-[#6366F1] transition-colors">
                  Ch√≠nh s√°ch b·∫£o m·∫≠t
                </a>
              </li>
            </ul>
          </div>

          <div>
            <h4 className="font-semibold text-sm mb-4 tracking-tight">Li√™n h·ªá</h4>
            <ul className="space-y-3 text-sm text-[#6B7280]">
              <li className="flex items-start gap-3">
                <FaPhone className="mt-0.5 flex-shrink-0" size={16} />
                <a href="tel:+84707970216" className="hover:text-[#6366F1] transition-colors">
                  +84 707 970 216
                </a>
              </li>
              <li className="flex items-start gap-3">
                <FaEnvelope className="mt-0.5 flex-shrink-0" size={16} />
                <a href="mailto:contact@alino.net" className="hover:text-[#6366F1] transition-colors">
                  contact@alino.net
                </a>
              </li>
              <li className="flex items-start gap-3 leading-relaxed">
                <FaMapMarkerAlt className="mt-0.5 flex-shrink-0" size={16} />
                <span>
                  Landmark 81
                  <br />
                  720A ƒêi·ªán Bi√™n Ph·ªß, Ph∆∞·ªùng 22, Qu·∫≠n B√¨nh Th·∫°nh, TP. H·ªì Ch√≠ Minh, Vi·ªát Nam
                </span>
              </li>
            </ul>
          </div>
        </div>

        <div className="pt-8 border-t border-black/5 text-center text-sm text-[#9CA3AF]">
          ¬© 2025 ALINO. All rights reserved.
        </div>
      </div>
    </footer>
  );
}
</file>

<file path="app/components/layout/Header.tsx">
'use client';

import Image from 'next/image';
import Link from 'next/link';
import { useRouter, usePathname } from 'next/navigation';

export default function Header() {
  const router = useRouter();
  const pathname = usePathname();

  const handleLogoClick = (e: React.MouseEvent) => {
    e.preventDefault();
    if (pathname !== '/') {
      router.push('/');
    }
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  return (
    <header className="fixed top-0 inset-x-0 z-50 h-16 bg-white/80 backdrop-blur-xl border-b border-black/5">
      <div className="max-w-7xl mx-auto px-6 h-full flex items-center justify-between">
        <Link
          href="/"
          onClick={handleLogoClick}
          className="flex items-center gap-3 cursor-pointer"
        >
          <Image
            src="/logo/logo.png"
            alt="ALINO"
            width={32}
            height={32}
            className="w-8 h-8"
          />
          <span className="font-semibold text-lg tracking-tight bg-gradient-to-r from-[#6366F1] to-[#EC4899] bg-clip-text text-transparent">
            ALINO
          </span>
        </Link>

        <nav className="hidden md:flex items-center gap-10 text-sm text-[#6B7280]">
          <a href="#about" className="underline-gradient hover:text-[#6366F1] transition-colors">
            V·ªÅ ch√∫ng t√¥i
          </a>
          <a href="#product" className="underline-gradient hover:text-[#6366F1] transition-colors">
            S·∫£n ph·∫©m
          </a>
          <a href="#news" className="underline-gradient hover:text-[#6366F1] transition-colors">
            Tin t·ª©c
          </a>
          <a href="#contact" className="underline-gradient hover:text-[#6366F1] transition-colors">
            Li√™n h·ªá
          </a>
        </nav>

        <div className="flex items-center gap-4 text-sm">
          <a
            href="/login"
            className="text-[#6B7280] hover:text-[#6366F1] transition-colors"
          >
            ƒêƒÉng nh·∫≠p
          </a>
          <Link
            href="/signup"
            className="px-5 py-2.5 rounded-full font-medium text-white bg-gradient-to-r from-[#6366F1] to-[#EC4899] hover:scale-105 transition-transform shadow-lg shadow-[#6366F1]/25"
          >
            ƒêƒÉng k√Ω
          </Link>
        </div>
      </div>
    </header>
  );
}
</file>

<file path="core/.gitkeep">

</file>

<file path="tailwind.config.js">
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: ["./app/**/*.{js,ts,jsx,tsx}"],
  theme: {
    extend: {
      fontFamily: {
        sans: ['var(--font-inter)', 'system-ui', 'sans-serif'],
      },
      colors: {
        background: '#FFFFFF',
        foreground: '#0A0A0A',
        border: '#E5E7EB',
      },
    },
  },
  plugins: [],
}
</file>

<file path="app/globals.css">
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  * {
    @apply border-border;
  }
  
  body {
    @apply bg-background text-foreground;
    font-family: var(--font-inter), system-ui, sans-serif;
  }
}

.underline-gradient {
  position: relative;
}

.underline-gradient::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: 0;
  width: 0;
  height: 2px;
  background: linear-gradient(90deg, #6366F1, #EC4899);
  transition: width 0.3s ease;
}

.underline-gradient:hover::after {
  width: 100%;
}
</file>

<file path="app/page.tsx">
import { redirect } from 'next/navigation';
import HomePageClient from './components/home/HomePageClient';

export default function HomePage({
  searchParams,
}: {
  searchParams: { code?: string };
}) {
  // üî• Intercept email verification code from Supabase
  // Supabase always redirects to Site URL (/) with ?code=...
  if (searchParams?.code) {
    redirect(`/auth/callback?code=${searchParams.code}`);
  }

  return <HomePageClient />;
}
</file>

<file path="README.md">
# MVP Codebase

A clean, modern, production-oriented MVP environment built with Next.js, TypeScript, and React.

## Tech Stack

- Node.js (LTS)
- TypeScript (strict mode)
- React
- Next.js (App Router)
- npm

## Getting Started

### Installation

```bash
npm install
```

### Development

```bash
npm run dev
```

This starts the development server at [http://localhost:3000](http://localhost:3000).

### Build

```bash
npm run build
```

### Production

```bash
npm start
```

### Backup

```bash
npm run backup
```

This script:
1. Runs repomix to bundle the entire codebase
2. Commits the repomix output
3. Pushes to the connected GitHub repository

## Project Structure

- `app/` - UI components and routes (Next.js App Router)
- `core/` - Domain models, types, and business logic
- `infra/` - Backend integration, auth, and external services
- `lib/` - Shared utilities and helpers
- `scripts/` - Build and utility scripts
- `public/` - Static assets

## Environment Variables

Copy `.env.example` to `.env.local` and fill in your values. Never commit `.env.local` or any files containing secrets.

## TypeScript

The project uses TypeScript in strict mode with absolute imports:
- `@/app` - App directory
- `@/core` - Core business logic
- `@/infra` - Infrastructure code
- `@/lib` - Shared utilities
</file>

<file path="app/layout.tsx">
import type { Metadata } from 'next';
import { Inter } from 'next/font/google';
import './globals.css';

const inter = Inter({
  subsets: ['latin', 'vietnamese'],
  variable: '--font-inter',
  display: 'swap',
});

export const metadata: Metadata = {
  title: 'ALINO - Qu·∫£n l√Ω h·ª£p t√°c Creator‚ÄìBrand',
  description: 'N·ªÅn t·∫£ng qu·∫£n l√Ω h·ª£p t√°c gi·ªØa Creator v√† Brand chuy√™n nghi·ªáp',
};

export default function RootLayout({
  children,
}: Readonly<{
  children: React.ReactNode;
}>) {
  return (
    <html lang="vi" className={inter.variable}>
      <body className="font-sans antialiased">
        {children}
      </body>
    </html>
  );
}
</file>

<file path=".env.example">
NEXT_PUBLIC_SUPABASE_URL=https://iralrlsuxoqbgcjzdpbb.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlyYWxybHN1eG9xYmdjanpkcGJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjY1ODA5ODUsImV4cCI6MjA4MjE1Njk4NX0.e0x5keoaE0GlXehvTA05LlzGhZWh63FHROkAz9kPqZU
</file>

<file path="tsconfig.json">
{
  "compilerOptions": {
    "target": "ES2020",
    "lib": ["dom", "dom.iterable", "esnext"],
    "allowJs": true,
    "skipLibCheck": true,
    "strict": true,
    "noEmit": true,
    "esModuleInterop": true,
    "module": "esnext",
    "moduleResolution": "bundler",
    "resolveJsonModule": true,
    "isolatedModules": true,
    "jsx": "preserve",
    "incremental": true,
    "plugins": [
      {
        "name": "next"
      }
    ],
    "paths": {
      "@/*": ["./*"]
    }
  },
  "include": ["next-env.d.ts", "**/*.ts", "**/*.tsx", ".next/types/**/*.ts"],
  "exclude": ["node_modules"]
}
</file>

<file path=".gitignore">
# =====================
# Dependencies
# =====================
node_modules/
.pnp
.pnp.js

# =====================
# Next.js / Build
# =====================
.next/
out/
build/
dist/

# =====================
# Environment variables
# =====================
.env
.env.local
.env.*.local

# =====================
# Logs
# =====================
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# =====================
# OS / Editor
# =====================
.DS_Store

# =====================
# TypeScript
# =====================
*.tsbuildinfo
next-env.d.ts

# =====================
# Repomix (local only)
# =====================
repomix-output.*

# =====================
# MS Office temp files
# =====================
~$*.docx
~$*.xlsx
~$*.pptx
</file>

<file path="package.json">
{
  "name": "code-mvp",
  "version": "0.1.0",
  "private": true,
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "repomix": "repomix",
    "backup": "git add -A && git commit -m \"chore: backup\" || echo \"No changes to commit\"; git push"
  },
  "dependencies": {
    "@supabase/auth-helpers-nextjs": "^0.15.0",
    "@supabase/supabase-js": "^2.89.0",
    "next": "^14.2.35",
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "react-icons": "^5.5.0"
  },
  "devDependencies": {
    "@types/node": "^20.14.12",
    "@types/react": "^18.3.3",
    "@types/react-dom": "^18.3.0",
    "autoprefixer": "^10.4.23",
    "postcss": "^8.5.6",
    "repomix": "^1.7.3",
    "tailwindcss": "^3.4.1",
    "typescript": "^5.5.4"
  }
}
</file>

</files>
